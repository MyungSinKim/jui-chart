if(function(a,b){var c={jquery:"undefined"!=typeof jQuery?jQuery:null},d={},e={},f={template:{evaluate:/<\!([\s\S]+?)\!>/g,interpolate:/<\!=([\s\S]+?)\!>/g,escape:/<\!-([\s\S]+?)\!>/g},logUrl:"tool/debug.html"},g=c["util.base"]={browser:{webkit:"WebkitAppearance"in document.documentElement.style,mozilla:"undefined"!=typeof a.mozInnerScreenX,msie:a.navigator.userAgent.indexOf("Trident")!=-1},isTouch:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(a.navigator.userAgent),inherit:function(a,b){this.typeCheck("function",a)&&this.typeCheck("function",b)&&(a.parent=b,a.prototype=new b,a.prototype.constructor=a,a.prototype.parent=a.prototype,a.prototype["super"]=function(a,b){return this.constructor.prototype[a].apply(this,b)})},extend:function(a,b,c){function d(a){return g.typeCheck("object",a)}if(this.typeCheck(["object","function"],a)||(a={}),!this.typeCheck(["object","function"],b))return a;for(var e in b)c===!0?d(a[e])?this.extend(a[e],b[e],c):this.typeCheck("undefined",a[e])&&(a[e]=b[e]):d(a[e])?this.extend(a[e],b[e],c):a[e]=b[e];return a},pxToInt:function(a){return this.typeCheck("string",a)&&a.indexOf("px")!=-1?parseInt(a.split("px").join("")):a},clone:function(a){var b=this.typeCheck("array",a)?[]:{};for(var c in a)this.typeCheck("object",a[c])?b[c]=this.clone(a[c]):b[c]=a[c];return b},deepClone:function(a,b){var c=null;if(b=b||{},this.typeCheck("array",a)){c=new Array(a.length);for(var d=0,e=a.length;d<e;d++)c[d]=this.deepClone(a[d],b)}else if(this.typeCheck("date",a))c=a;else if(this.typeCheck("object",a)){c={};for(var f in a)b[f]?c[f]=a[f]:c[f]=this.deepClone(a[f],b)}else c=a;return c},sort:function(a){var b=jui.include("util.sort");return new b(a)},runtime:function(a,b){var c=(new Date).getTime();b();var d=(new Date).getTime();console.log(a+" : "+(d-c)+"ms")},template:function(a,b){var c=jui.include("util.template");return b?c(a,b,f.template):c(a,null,f.template)},resize:function(b,c){var d=function(){var a=0;return function(){clearTimeout(a),a=setTimeout(b,c)}}();a.addEventListener?a.addEventListener("resize",d):object.attachEvent?a.attachEvent("onresize",d):a.onresize=d},index:function(){var a=jui.include("util.keyparser");return new a},chunk:function(a,b){for(var c=[],d=0,e=a.length;d<e;)c.push(a.slice(d,d+=b));return c},typeCheck:function(a,b){function c(a,b){return"string"==typeof a&&("string"==a?"string"==typeof b:"integer"==a?"number"==typeof b&&b%1==0:"float"==a?"number"==typeof b&&b%1!=0:"number"==a?"number"==typeof b:"boolean"==a?"boolean"==typeof b:"undefined"==a?"undefined"==typeof b:"null"==a?null===b:"array"==a?b instanceof Array:"date"==a?b instanceof Date:"function"==a?"function"==typeof b:"object"==a&&!("object"!=typeof b||null===b||b instanceof Array||b instanceof Date||b instanceof RegExp))}if("object"==typeof a&&a.length){for(var d=a,e=0;e<d.length;e++)if(c(d[e],b))return!0;return!1}return c(a,b)},typeCheckObj:function(a,b){if("object"==typeof a){var c=this;for(var d in a){var e=a[d];"function"==typeof e&&!function(d,e){a[d]=function(){for(var a=arguments,f=b[d],g=0;g<a.length;g++)if(!c.typeCheck(f[g],a[g]))throw new Error("JUI_CRITICAL_ERR: the "+g+"th parameter is not a "+f[g]+" ("+name+")");return e.apply(this,a)}}(d,e)}}},dataToCsv:function(a,b,c){for(var d="",e=c?c:b.length,f=-1;f<e;f++){for(var g=[],h=0;h<a.length;h++)if(a[h])if(f==-1)g.push('"'+a[h]+'"');else{var i=b[f][a[h]];g.push(isNaN(i)?'"'+i+'"':i)}d+=g.join(",")+"\n"}return d},dataToCsv2:function(a){for(var b="",c=this.extend({fields:null,rows:null,names:null,types:null,count:this.typeCheck("integer",a.count)?a.count:a.rows.length},a),d=-1;d<c.count;d++){for(var e=[],f=0;f<c.fields.length;f++)if(c.fields[f])if(d==-1)c.names&&c.names[f]?e.push('"'+c.names[f]+'"'):e.push('"'+c.fields[f]+'"');else{var g=c.rows[d][c.fields[f]];this.typeCheck("array",c.types)?"string"==c.types[f]?e.push('"'+g+'"'):"integer"==c.types[f]?e.push(parseInt(g)):"float"==c.types[f]?e.push(parseFloat(g)):e.push(g):e.push(isNaN(g)?'"'+g+'"':g)}b+=e.join(",")+"\n"}return b},fileToCsv:function(a,b){var c=new FileReader;c.onload=function(a){g.typeCheck("function",b)&&b(a.target.result)},c.readAsText(a)},csvToBase64:function(a){var b=jui.include("util.base64");return"data:application/octet-stream;base64,"+b.encode(a)},csvToData:function(a,b,c){for(var d=[],e=b.split("\n"),f=1;f<e.length;f++)if(""!=e[f]){for(var g=e[f].split(","),h={},i=0;i<a.length;i++)h[a[i]]=g[i],this.startsWith(g[i],'"')&&this.endsWith(g[i],'"')?h[a[i]]=g[i].split('"').join(""):h[a[i]]=g[i],this.inArray(a[i],c)!=-1&&(h[a[i]]=parseFloat(g[i]));d.push(h)}return d},getCsvFields:function(a,b){for(var c=this.typeCheck("array",b)?b:a,d=0;d<c.length;d++)isNaN(c[d])||(c[d]=a[c[d]]);return c},svgToBase64:function(a){var b=jui.include("util.base64");return"data:image/svg+xml;base64,"+b.encode(a)},dateFormat:function(a,b,c){function d(a,b){var c=a+"";for(b=b||2;c.length<b;)c="0"+c;return c}var e=["\0","January","February","March","April","May","June","July","August","September","October","November","December"],f=["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],g=["","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],h=["","Sun","Mon","Tue","Wed","Thu","Fri","Sat"],i=c?a.getUTCFullYear():a.getFullYear();b=b.replace(/(^|[^\\])yyyy+/g,"$1"+i),b=b.replace(/(^|[^\\])yy/g,"$1"+i.toString().substr(2,2)),b=b.replace(/(^|[^\\])y/g,"$1"+i);var j=(c?a.getUTCMonth():a.getMonth())+1;b=b.replace(/(^|[^\\])MMMM+/g,"$1"+e[0]),b=b.replace(/(^|[^\\])MMM/g,"$1"+f[0]),b=b.replace(/(^|[^\\])MM/g,"$1"+d(j)),b=b.replace(/(^|[^\\])M/g,"$1"+j);var k=c?a.getUTCDate():a.getDate();b=b.replace(/(^|[^\\])dddd+/g,"$1"+g[0]),b=b.replace(/(^|[^\\])ddd/g,"$1"+h[0]),b=b.replace(/(^|[^\\])dd/g,"$1"+d(k)),b=b.replace(/(^|[^\\])d/g,"$1"+k);var l=c?a.getUTCHours():a.getHours();b=b.replace(/(^|[^\\])HH+/g,"$1"+d(l)),b=b.replace(/(^|[^\\])H/g,"$1"+l);var m=l>12?l-12:0==l?12:l;b=b.replace(/(^|[^\\])hh+/g,"$1"+d(m)),b=b.replace(/(^|[^\\])h/g,"$1"+m);var n=c?a.getUTCMinutes():a.getMinutes();b=b.replace(/(^|[^\\])mm+/g,"$1"+d(n)),b=b.replace(/(^|[^\\])m/g,"$1"+n);var o=c?a.getUTCSeconds():a.getSeconds();b=b.replace(/(^|[^\\])ss+/g,"$1"+d(o)),b=b.replace(/(^|[^\\])s/g,"$1"+o);var p=c?a.getUTCMilliseconds():a.getMilliseconds();b=b.replace(/(^|[^\\])fff+/g,"$1"+d(p,3)),p=Math.round(p/10),b=b.replace(/(^|[^\\])ff/g,"$1"+d(p)),p=Math.round(p/10),b=b.replace(/(^|[^\\])f/g,"$1"+p);var q=l<12?"AM":"PM";b=b.replace(/(^|[^\\])TT+/g,"$1"+q),b=b.replace(/(^|[^\\])T/g,"$1"+q.charAt(0));var r=q.toLowerCase();b=b.replace(/(^|[^\\])tt+/g,"$1"+r),b=b.replace(/(^|[^\\])t/g,"$1"+r.charAt(0));var s=-a.getTimezoneOffset(),t=c||!s?"Z":s>0?"+":"-";if(!c){s=Math.abs(s);var u=Math.floor(s/60),v=s%60;t+=d(u)+":"+d(v)}b=b.replace(/(^|[^\\])K/g,"$1"+t);var w=(c?a.getUTCDay():a.getDay())+1;return b=b.replace(new RegExp(g[0],"g"),g[w]),b=b.replace(new RegExp(h[0],"g"),h[w]),b=b.replace(new RegExp(e[0],"g"),e[j]),b=b.replace(new RegExp(f[0],"g"),f[j]),b=b.replace(/\\(.)/g,"$1")},createId:function(a){return[a||"id",+new Date,Math.round(100*Math.random())%100].join("-")},btoa:function(a){var b=jui.include("util.base64");return b.encode(a)},atob:function(a){var b=jui.include("util.base64");return b.decode(a)},timeLoop:function(a,b){return function(c,d){function e(a){a<1||(1==a?(c.call(b,a),d.call(b)):setTimeout(function(){a>-1&&c.call(b,a--),a>-1&&e(a)},1))}e(a)}},loop:function(a,b){var c=0,d=a,e=Math.ceil(a/5);return function(a){for(var f=c,g=1*e,h=2*e,i=3*e,j=4*e,k=g,l=h,m=i,n=j,o=d;f<k&&f<d;)a.call(b,f,1),f++,g<l&&g<d&&(a.call(b,g,2),g++),h<m&&h<d&&(a.call(b,h,3),h++),i<n&&i<d&&(a.call(b,i,4),i++),j<o&&j<d&&(a.call(b,j,5),j++)}},loopArray:function(a,b){var c=a.length,d=0,e=c,f=Math.ceil(c/5);return function(c){for(var g=d,h=1*f,i=2*f,j=3*f,k=4*f,l=h,m=i,n=j,o=k,p=e;g<l&&g<e;)c.call(b,a[g],g,1),g++,h<m&&h<e&&(c.call(b,a[h],h,2),h++),i<n&&i<e&&(c.call(b,a[i],i,3),i++),j<o&&j<e&&(c.call(b,a[j],j,4),j++),k<p&&k<e&&(c.call(b,a[k],k,5),k++)}},makeIndex:function(a,b){var c={},d=this.loopArray(a);return d(function(a,d){var e=a[b];"undefined"==typeof c[e]&&(c[e]=[]),c[e].push(d)}),c},startsWith:function(a,b,c){return c=c||0,a.lastIndexOf(b,c)===c},endsWith:function(a,b,c){var d=a;(void 0===c||c>d.length)&&(c=d.length),c-=b.length;var e=d.indexOf(b,c);return e!==-1&&e===c},inArray:function(a,b){if(this.typeCheck(["undefined","null"],a)||!this.typeCheck("array",b))return-1;for(var c=0,d=b.length;c<d;c++)if(b[c]==a)return c;return-1},trim:function(a){var b="[\\x20\\t\\r\\n\\f]",c=new RegExp("^"+b+"+|((?:^|[^\\\\])(?:\\\\.)*)"+b+"+$","g");return null==a?"":(a+"").replace(c,"")},ready:function(){function b(){if(!g.isReady){try{document.documentElement.doScroll("left")}catch(a){return void setTimeout(b,1)}g.ready()}}function c(a){g.bindReady();g.type(a);d.done(a)}var d,e,f={};f["[object Boolean]"]="boolean",f["[object Number]"]="number",f["[object String]"]="string",f["[object Function]"]="function",f["[object Array]"]="array",f["[object Date]"]="date",f["[object RegExp]"]="regexp",f["[object Object]"]="object";var g={isReady:!1,readyWait:1,holdReady:function(a){a?g.readyWait++:g.ready(!0)},ready:function(a){if(a===!0&&!--g.readyWait||a!==!0&&!g.isReady){if(!document.body)return setTimeout(g.ready,1);if(g.isReady=!0,a!==!0&&--g.readyWait>0)return;d.resolveWith(document,[g])}},bindReady:function(){if(!d){if(d=g._Deferred(),"complete"===document.readyState)return setTimeout(g.ready,1);if(document.addEventListener)document.addEventListener("DOMContentLoaded",e,!1),a.addEventListener("load",g.ready,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",e),a.attachEvent("onload",g.ready);var c=!1;try{c=null==a.frameElement}catch(f){}document.documentElement.doScroll&&c&&b()}}},_Deferred:function(){var a,b,c,d=[],e={done:function(){if(!c){var b,f,h,i,j,k=arguments;for(a&&(j=a,a=0),b=0,f=k.length;b<f;b++)h=k[b],i=g.type(h),"array"===i?e.done.apply(e,h):"function"===i&&d.push(h);j&&e.resolveWith(j[0],j[1])}return this},resolveWith:function(e,f){if(!c&&!a&&!b){f=f||[],b=1;try{for(;d[0];)d.shift().apply(e,f)}finally{a=[e,f],b=0}}return this},resolve:function(){return e.resolveWith(this,arguments),this},isResolved:function(){return!(!b&&!a)},cancel:function(){return c=1,d=[],this}};return e},type:function(a){return null==a?String(a):f[Object.prototype.toString.call(a)]||"object"}};return document.addEventListener?e=function(){document.removeEventListener("DOMContentLoaded",e,!1),g.ready()}:document.attachEvent&&(e=function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",e),g.ready())}),c}(),param:function(a){var b=/%20/g,c=[],d=function(a,b){b=g.typeCheck("function",b)?b():null==b?"":b,c[c.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};for(var e in a)d(e,a[e]);return c.join("&").replace(b,"+")},ajax:function(a){var b=null,c="",d=null,e=g.extend({url:null,type:"GET",data:null,async:!0,success:null,fail:null},a);if(this.typeCheck("string",e.url)&&this.typeCheck("function",e.success)){if(this.typeCheck("object",e.data)&&(c=this.param(e.data)),this.typeCheck("undefined",XMLHttpRequest))for(var f=["MSXML2.XmlHttp.5.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp.2.0","Microsoft.XmlHttp"],h=0,i=f.length;h<i;h++)try{b=new ActiveXObject(f[h]);break}catch(j){}else b=new XMLHttpRequest;null!=b&&(b.open(e.type,e.url,e.async),b.send(c),d=function(){4===b.readyState&&200==b.status?e.success(b):g.typeCheck("function",e.fail)&&e.fail(b)},e.async?b.onreadystatechange=d:d())}},scrollWidth:function(){var a=document.createElement("p");a.style.width="100%",a.style.height="200px";var b=document.createElement("div");b.style.position="absolute",b.style.top="0px",b.style.left="0px",b.style.visibility="hidden",b.style.width="200px",b.style.height="150px",b.style.overflow="hidden",b.appendChild(a),document.body.appendChild(b);var c=a.offsetWidth;b.style.overflow="scroll";var d=a.offsetWidth;return c==d&&(d=b.clientWidth),document.body.removeChild(b),c-d}},h=function(a){for(var b=[],d=0;d<a.length;d++){var e=c[a[d]];if(g.typeCheck(["function","object"],e))b.push(e);else{var f=i(a[d]);null==f?(console.log("JUI_WARNING_MSG: '"+a[d]+"' is not loaded"),b.push(null)):b.push(f)}}return b},i=function(a){var b=null,a=a+".";for(var d in c)if(d.indexOf(a)!=-1&&g.typeCheck(["function","object"],c[d])){var e=d.split(a).join("");e.indexOf(".")==-1&&(null==b&&(b={}),b[e]=c[d])}return b};a.jui=b.jui={ready:function(){var a=[],b=2==arguments.length?arguments[1]:arguments[0],c=2==arguments.length?arguments[0]:null;if(!g.typeCheck(["array","null"],c)||!g.typeCheck("function",b))throw new Error("JUI_CRITICAL_ERR: Invalid parameter type of the function");g.ready(function(){if(c)a=h(c);else{var d=i("ui"),e={};g.extend(e,d),g.extend(e,i("grid")),a=[d,e,g]}b.apply(null,a)})},defineUI:function(a,b,f,i){if(!(g.typeCheck("string",a)&&g.typeCheck("array",b)&&g.typeCheck("function",f)&&g.typeCheck(["string","undefined"],i)))throw new Error("JUI_CRITICAL_ERR: Invalid parameter type of the function");if(g.typeCheck("function",e[a]))throw new Error("JUI_CRITICAL_ERR: '"+a+"' is already exist");if(g.typeCheck("undefined",i)&&(i="event"),!g.typeCheck("function",e[i]))throw new Error("JUI_CRITICAL_ERR: Parents are the only function");if(d[i]!==!0)throw new Error("JUI_CRITICAL_ERR: UI function can not be inherited");var j=h(b),k=f.apply(null,j);g.inherit(k,e[i]),c[a]=e["core"!=i?"event":"core"].init({type:a,"class":k}),e[a]=k,d[a]=!0},createUIObject:function(a,b,c,d,e,f){var h=new a["class"],i=jui.defineOptions(a["class"],e||{});h.init.prototype=h,h.init.prototype.selector=b,h.init.prototype.root=d,h.init.prototype.options=i,h.init.prototype.tpl={},h.init.prototype.event=new Array,h.init.prototype.timestamp=(new Date).getTime(),h.init.prototype.index=c,h.init.prototype.module=a,g.typeCheck("function",f)&&f(h,i);for(var j in i.tpl){var k=i.tpl[j];g.typeCheck("string",k)&&""!=k&&(h.init.prototype.tpl[j]=g.template(k))}var l=new h.init;for(var m in i.event)l.on(m,i.event[m]);return d.jui=l,l},define:function(a,b,f,i){if(!(g.typeCheck("string",a)&&g.typeCheck("array",b)&&g.typeCheck("function",f)&&g.typeCheck(["string","undefined","null"],i)))throw new Error("JUI_CRITICAL_ERR: Invalid parameter type of the function");if(g.typeCheck("function",e[a]))throw new Error("JUI_CRITICAL_ERR: '"+a+"' is already exist");var j=h(b),k=f.apply(null,j);if(g.typeCheck("function",e[i])){if(d[i]!==!0)throw new Error("JUI_CRITICAL_ERR: UI function can not be inherited");g.inherit(k,e[i])}c[a]=k,e[a]=k,d[a]=!0},redefine:function(a,b,f,g,h){h||d[a]!==!0||(c[a]=null,e[a]=null,d[a]=!1),(!h||h&&d[a]!==!0)&&this.define(a,b,f,g)},defineOptions:function(a,b,c){function d(a,b){if(g.typeCheck("function",a)){if(g.typeCheck("function",a.setup)){var c=a.setup();for(var e in c)g.typeCheck("undefined",b[e])&&(b[e]=c[e])}d(a.parent,b)}return b}for(var e=d(a,{}),f=Object.keys(e),h=Object.keys(b),i=0;i<h.length;i++){var j=h[i];if(g.inArray(j,f)==-1&&g.inArray(j,c)==-1)throw new Error("JUI_CRITICAL_ERR: '"+j+"' is not an option")}return g.extend(b,e,!0),b},include:function(a){if(!g.typeCheck("string",a))throw new Error("JUI_CRITICAL_ERR: Invalid parameter type of the function");var b=c[a];if(g.typeCheck(["function","object"],b))return b;var d=i(a);return null==d?(console.log("JUI_WARNING_MSG: '"+a+"' is not loaded"),null):d},includeAll:function(){var a=[];for(var b in c)a.push(c[b]);return a},log:function(b){var c=a.open(b||f.logUrl,"JUIM","width=1024, height=768, toolbar=no, menubar=no, resizable=yes");return jui.debugAll(function(a,b){c.log(a,b)}),c},setup:function(a){return g.typeCheck("object",a)&&(f=g.extend(f,a)),f}},"object"==typeof module&&module.exports&&(module.exports=a.jui||c.jui)}(window,"undefined"!=typeof global?global:window),jui.define("util.dom",["util.base"],function(a){return{find:function(){var b=arguments;if(1==b.length){if(a.typeCheck("string",b[0]))return document.querySelectorAll(b[0])}else if(2==b.length&&a.typeCheck("object",b[0])&&a.typeCheck("string",b[1]))return b[0].querySelectorAll(b[1]);return[]},each:function(b,c){if(a.typeCheck("function",c)){var d=null;a.typeCheck("string",b)?d=document.querySelectorAll(b):a.typeCheck("array",b)&&(d=b),null!=d&&Array.prototype.forEach.call(d,function(a,b){c.apply(a,[b,a])})}},attr:function(b,c){if(a.typeCheck(["string","array"],b)){var d=document.querySelectorAll(b);if(a.typeCheck("object",c))for(var e=0;e<d.length;e++)for(var f in c)d[e].setAttribute(f,c[f]);else if(a.typeCheck("string",c)&&d.length>0)return d[0].getAttribute(c)}},remove:function(a){this.each(a,function(){this.parentNode.removeChild(this)})},offset:function(a){function b(a){return null!=a&&a==a.window}function c(a){return b(a)?a:9===a.nodeType&&(a.defaultView||a.parentWindow)}var d,e,f={top:0,left:0},g=a&&a.ownerDocument;if(g){d=g.documentElement;var h="undefined";return typeof a.getBoundingClientRect!==h&&(f=a.getBoundingClientRect()),e=c(g),{top:f.top+(e.pageYOffset||d.scrollTop)-(d.clientTop||0),left:f.left+(e.pageXOffset||d.scrollLeft)-(d.clientLeft||0)}}}}}),jui.define("util.sort",[],function(){var a=function(a,b){function c(b,c){var d=a[b];a[b]=a[c],a[c]=d}function d(b,d,f){var g=d,h=a[b];c(b,f);for(var i=d;i<f;i++)(e(a[i],h)||!e(h,a[i])&&i%2==1)&&(c(i,g),g++);return c(f,g),g}var e=null,a=b?a.slice(0):a;this.setCompare=function(a){e=a},this.run=function(b,c){var e=null;return"number"!=typeof b&&(b=0),"number"!=typeof c&&(c=a.length-1),b<c&&(e=b+Math.ceil(.5*(c-b)),newPivot=d(e,b,c),this.run(b,newPivot-1),this.run(newPivot+1,c)),a}};return a}),jui.define("util.keyparser",[],function(){var a=function(){this.isIndexDepth=function(a){return"string"==typeof a&&a.indexOf(".")!=-1},this.getIndexList=function(a){for(var b=[],c=(""+a).split("."),d=0;d<c.length;d++)b[d]=parseInt(c[d]);return b},this.changeIndex=function(a,b,c){for(var d=this.getIndexList(c).length,e=this.getIndexList(a),f=this.getIndexList(b),g=0;g<d;g++)e.shift();return f.concat(e).join(".")},this.getNextIndex=function(a){var b=this.getIndexList(a),c=b.pop()+1;return b.push(c),b.join(".")},this.getParentIndex=function(a){return this.isIndexDepth(a)?a.substr(0,a.lastIndexOf(".")):null}};return a}),jui.define("util.base64",[],function(){var a={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(b){var c,d,e,f,g,h,i,j="",k=0;for(b=a._utf8_encode(b);k<b.length;)c=b.charCodeAt(k++),d=b.charCodeAt(k++),e=b.charCodeAt(k++),f=c>>2,g=(3&c)<<4|d>>4,h=(15&d)<<2|e>>6,i=63&e,isNaN(d)?h=i=64:isNaN(e)&&(i=64),j=j+a._keyStr.charAt(f)+a._keyStr.charAt(g)+a._keyStr.charAt(h)+a._keyStr.charAt(i);return j},decode:function(b){var c,d,e,f,g,h,i,j="",k=0;for(b=b.replace(/[^A-Za-z0-9\+\/\=]/g,"");k<b.length;)f=a._keyStr.indexOf(b.charAt(k++)),g=a._keyStr.indexOf(b.charAt(k++)),h=a._keyStr.indexOf(b.charAt(k++)),i=a._keyStr.indexOf(b.charAt(k++)),c=f<<2|g>>4,d=(15&g)<<4|h>>2,e=(3&h)<<6|i,j+=String.fromCharCode(c),64!=h&&(j+=String.fromCharCode(d)),64!=i&&(j+=String.fromCharCode(e));return j=a._utf8_decode(j)},_utf8_encode:function(a){a=a.replace(/\r\n/g,"\n");for(var b=String.fromCharCode(239)+String.fromCharCode(187)+String.fromCharCode(191),c=0;c<a.length;c++){var d=a.charCodeAt(c);d<128?b+=String.fromCharCode(d):d>127&&d<2048?(b+=String.fromCharCode(d>>6|192),b+=String.fromCharCode(63&d|128)):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128),b+=String.fromCharCode(63&d|128))}return b},_utf8_decode:function(a){for(var b="",c=0,d=c1=c2=0;c<a.length;)d=a.charCodeAt(c),d<128?(b+=String.fromCharCode(d),c++):d>191&&d<224?(c2=a.charCodeAt(c+1),b+=String.fromCharCode((31&d)<<6|63&c2),c+=2):(c2=a.charCodeAt(c+1),c3=a.charCodeAt(c+2),b+=String.fromCharCode((15&d)<<12|(63&c2)<<6|63&c3),c+=3);return b}};return a}),jui.define("util.math",["util.base"],function(a){function b(a,b){for(var c=[],d=0,e=a.length;d<e;d++){for(var f=0,g=0,h=a[d].length;g<h;g++)f+=a[d][g]*b[g];c.push(f)}return c}function c(a,c){for(var d=[],e=[],f=0,g=c.length;f<g;f++)d[f]=[],e[f]=[];for(var f=0,g=c.length;f<g;f++)for(var h=0,i=c[f].length;h<i;h++)d[h].push(c[f][h]);for(var f=0,g=d.length;f<g;f++)for(var j=b(a,d[f]),h=0,i=j.length;h<i;h++)e[h].push(j[h]);return e}function d(a,b){var c=new Float32Array(4);return c[0]=a[0][0]*b[0]+a[0][1]*b[1]+a[0][2]*b[2]+a[0][3]*b[3],c[1]=a[1][0]*b[0]+a[1][1]*b[1]+a[1][2]*b[2]+a[1][3]*b[3],c[2]=a[2][0]*b[0]+a[2][1]*b[1]+a[2][2]*b[2]+a[2][3]*b[3],c[3]=a[3][0]*b[0]+a[3][1]*b[1]+a[3][2]*b[2]+a[3][3]*b[3],c}function e(a,b){var c=[new Float32Array(4),new Float32Array(4),new Float32Array(4),new Float32Array(4)],d=[new Float32Array([b[0][0],b[1][0],b[2][0],b[3][0]]),new Float32Array([b[0][1],b[1][1],b[2][1],b[3][1]]),new Float32Array([b[0][2],b[1][2],b[2][2],b[3][2]]),new Float32Array([b[0][3],b[1][3],b[2][3],b[3][3]])];return c[0][0]=a[0][0]*d[0][0]+a[0][1]*d[0][1]+a[0][2]*d[0][2]+a[0][3]*d[0][3],c[1][0]=a[1][0]*d[0][0]+a[1][1]*d[0][1]+a[1][2]*d[0][2]+a[1][3]*d[0][3],c[2][0]=a[2][0]*d[0][0]+a[2][1]*d[0][1]+a[2][2]*d[0][2]+a[2][3]*d[0][3],c[3][0]=a[3][0]*d[0][0]+a[3][1]*d[0][1]+a[3][2]*d[0][2]+a[3][3]*d[0][3],c[0][1]=a[0][0]*d[1][0]+a[0][1]*d[1][1]+a[0][2]*d[1][2]+a[0][3]*d[1][3],c[1][1]=a[1][0]*d[1][0]+a[1][1]*d[1][1]+a[1][2]*d[1][2]+a[1][3]*d[1][3],c[2][1]=a[2][0]*d[1][0]+a[2][1]*d[1][1]+a[2][2]*d[1][2]+a[2][3]*d[1][3],c[3][1]=a[3][0]*d[1][0]+a[3][1]*d[1][1]+a[3][2]*d[1][2]+a[3][3]*d[1][3],c[0][2]=a[0][0]*d[2][0]+a[0][1]*d[2][1]+a[0][2]*d[2][2]+a[0][3]*d[2][3],c[1][2]=a[1][0]*d[2][0]+a[1][1]*d[2][1]+a[1][2]*d[2][2]+a[1][3]*d[2][3],c[2][2]=a[2][0]*d[2][0]+a[2][1]*d[2][1]+a[2][2]*d[2][2]+a[2][3]*d[2][3],c[3][2]=a[3][0]*d[2][0]+a[3][1]*d[2][1]+a[3][2]*d[2][2]+a[3][3]*d[2][3],c[0][3]=a[0][0]*d[3][0]+a[0][1]*d[3][1]+a[0][2]*d[3][2]+a[0][3]*d[3][3],c[1][3]=a[1][0]*d[3][0]+a[1][1]*d[3][1]+a[1][2]*d[3][2]+a[1][3]*d[3][3],c[2][3]=a[2][0]*d[3][0]+a[2][1]*d[3][1]+a[2][2]*d[3][2]+a[2][3]*d[3][3],c[3][3]=a[3][0]*d[3][0]+a[3][1]*d[3][1]+a[3][2]*d[3][2]+a[3][3]*d[3][3],c}function f(a){var b=[new Float32Array(4),new Float32Array(4),new Float32Array(4),new Float32Array(4)],c=a[0][0],d=a[0][1],e=a[0][2],f=a[0][3],g=a[1][0],h=a[1][1],i=a[1][2],j=a[1][3],k=a[2][0],l=a[2][1],m=a[2][2],n=a[2][3],o=a[3][0],p=a[3][1],q=a[3][2],r=a[3][3];b[0][0]=i*n*p-j*m*p+j*l*q-h*n*q-i*l*r+h*m*r,b[0][1]=f*m*p-e*n*p-f*l*q+d*n*q+e*l*r-d*m*r,b[0][2]=e*j*p-f*i*p+f*h*q-d*j*q-e*h*r+d*i*r,b[0][3]=f*i*l-e*j*l-f*h*m+d*j*m+e*h*n-d*i*n,b[1][0]=j*m*o-i*n*o-j*k*q+g*n*q+i*k*r-g*m*r,b[1][1]=e*n*o-f*m*o+f*k*q-c*n*q-e*k*r+c*m*r,b[1][2]=f*i*o-e*j*o-f*g*q+c*j*q+e*g*r-c*i*r,b[1][3]=e*j*k-f*i*k+f*g*m-c*j*m-e*g*n+c*i*n,b[2][0]=h*n*o-j*l*o+j*k*p-g*n*p-h*k*r+g*l*r,b[2][1]=f*l*o-d*n*o-f*k*p+c*n*p+d*k*r-c*l*r,b[2][2]=d*j*o-f*h*o+f*g*p-c*j*p-d*g*r+c*h*r,b[2][3]=f*h*k-d*j*k-f*g*l+c*j*l+d*g*n-c*h*n,b[3][0]=i*l*o-h*m*o-i*k*p+g*m*p+h*k*q-g*l*q,b[3][1]=d*m*o-e*l*o+e*k*p-c*m*p-d*k*q+c*l*q,b[3][2]=e*h*o-d*i*o-e*g*p+c*i*p+d*g*q-c*h*q,b[3][4]=d*i*k-e*h*k+e*g*l-c*i*l-d*g*m+c*h*m;var s=1/(c*b[0][0]+g*b[0][1]+k*b[0][2]+o*b[0][3]);return 0===s?b=[new Float32Array([1,0,0,0]),new Float32Array([0,1,0,0]),new Float32Array([0,0,1,0]),new Float32Array([0,0,0,1])]:(b[0][0]*=s,b[0][1]*=s,b[0][2]*=s,b[0][3]*=s,b[1][0]*=s,b[1][1]*=s,b[1][2]*=s,b[1][3]*=s,b[2][0]*=s,b[2][1]*=s,b[2][2]*=s,b[2][3]*=s,b[3][0]*=s,b[3][1]*=s,b[3][2]*=s,b[3][4]*=s),b}var g={rotate:function(a,b,c){return{x:a*Math.cos(c)-b*Math.sin(c),y:a*Math.sin(c)+b*Math.cos(c)}},resize:function(a,b,c,d){var e=d/c;return c>=a&&e<=1?(c=a,d=b*e):d>=b&&(d=b,c=a/e),{width:c,height:d}},radian:function(a){return a*Math.PI/180},degree:function(a){return 180*a/Math.PI},angle:function(a,b,c,d){var e=c-a,f=d-b;return Math.atan2(f,e)},interpolateNumber:function(a,b){var c=b-a;return function(b){return a+c*b}},interpolateRound:function(a,b){var c=b-a;return function(b){return Math.round(a+c*b)}},getFixed:function(a,b){var c=(a+"").split("."),d=c.length<2?0:c[1].length,e=(b+"").split("."),f=e.length<2?0:e[1].length;return d>f?d:f},fixed:function(a){var b=this.getFixed(a,0),c=Math.pow(10,b),d=function(a){return Math.round(a*c)/c};return d.plus=function(a,b){return Math.round(a*c+b*c)/c},d.minus=function(a,b){return Math.round(a*c-b*c)/c},d.multi=function(a,b){return Math.round(a*c*(b*c))/(c*c)},d.div=function(a,b){var d=a*c/(b*c),e=Math.pow(10,this.getFixed(d,0));return Math.round(d*e)/e},d.remain=function(a,b){return Math.round(a*c%(b*c))/c},d},round:function(a,b){var c=Math.pow(10,b);return Math.round(a*c)/c},plus:function(a,b){var c=Math.pow(10,this.getFixed(a,b));return Math.round(a*c+b*c)/c},minus:function(a,b){var c=Math.pow(10,this.getFixed(a,b));return Math.round(a*c-b*c)/c},multi:function(a,b){var c=Math.pow(10,this.getFixed(a,b));return Math.round(a*c*(b*c))/(c*c)},div:function(a,b){var c=Math.pow(10,this.getFixed(a,b)),d=a*c/(b*c),e=Math.pow(10,this.getFixed(d,0));return Math.round(d*e)/e},remain:function(a,b){var c=Math.pow(10,this.getFixed(a,b));return Math.round(a*c%(b*c))/c},nice:function(a,b,c,d){function e(a,b){var c=Math.floor(Math.log(a)/Math.LN10),d=a/Math.pow(10,c);return b?d<1.5?niceFraction=1:d<3?niceFraction=2:d<7?niceFraction=5:niceFraction=10:d<=1?niceFraction=1:d<=2?niceFraction=2:d<=5?niceFraction=5:niceFraction=10,niceFraction*Math.pow(10,c)}function f(){m=d?e(g-h,!1):g-h,l=d?e(m/k,!0):m/k,i=d?Math.floor(h/l)*l:h,j=d?Math.floor(g/l)*l:g}if(d=d||!1,a>b)var g=a,h=b;else var h=a,g=b;var i,j,k=c,l=0,m=[];return f(),{min:i,max:j,range:m,spacing:l}},matrix:function(d,e){return a.typeCheck("array",e[0])?c(d,e):b(d,e)},matrix3d:function(a,b){return b[0]instanceof Array||b[0]instanceof Float32Array?e(a,b):d(a,b)},inverseMatrix3d:function(a){return f(a)},scaleValue:function(a,b,c,d,e){function f(){var d=c-b,e=a-b,f=e/d;return f}b=b==c?0:b;var g=e-d,h=g*f();return h+d}};return g},null,!0),jui.define("util.template",[],function(){var a=function(a,b,c){var d={},e={},f=Array.prototype,g=f.slice,h=f.forEach,i={"\\":"\\","'":"'",r:"\r",n:"\n",t:"\t",u2028:"\u2028",u2029:"\u2029"};for(var j in i)i[i[j]]=j;var k=/\\|'|\r|\n|\t|\u2028|\u2029/g,l=/\\(\\|'|r|n|t|u2028|u2029)/g,m=/.^/,n=function(a){return a.replace(l,function(a,b){return i[b]})},o=d.each=d.forEach=function(a,b,c){if(null!=a)if(h&&a.forEach===h)a.forEach(b,c);else if(a.length===+a.length){for(var f=0,g=a.length;f<g;f++)if(f in a&&b.call(c,a[f],f,a)===e)return}else for(var i in a)if(d.has(a,i)&&b.call(c,a[i],i,a)===e)return};return d.has=function(a,b){return hasOwnProperty.call(a,b)},d.defaults=function(a){return o(g.call(arguments,1),function(b){for(var c in b)null==a[c]&&(a[c]=b[c])}),a},d.template=function(a,b,c){c=d.defaults(c||{});var e="__p+='"+a.replace(k,function(a){return"\\"+i[a]}).replace(c.escape||m,function(a,b){return"'+\n_.escape("+n(b)+")+\n'"}).replace(c.interpolate||m,function(a,b){return"'+\n("+n(b)+")+\n'"}).replace(c.evaluate||m,function(a,b){return"';\n"+n(b)+"\n;__p+='"})+"';\n";c.variable||(e="with(obj||{}){\n"+e+"}\n"),e="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+e+"return __p;\n";var f=new Function(c.variable||"obj","_",e);if(b)return f(b,d);var g=function(a){return f.call(this,a,d)};return g.source="function("+(c.variable||"obj")+"){\n"+e+"}",g},d.template(a,b,c)};return a}),jui.define("util.color",["util.base","util.math"],function(a,b){function c(a){var b=0,c=1,d=0,e=10,f=6;if(a){for(var g=0;g<a.length&&!(g>f);g++)b+=c*(a.charCodeAt(g)%e),d+=c*(e-1),c*=.7;d>0&&(b/=d)}return b}var d={regex:/(linear|radial)\((.*)\)(.*)/i,format:function(a,b){if("hex"==b){var c=a.r.toString(16);a.r<16&&(c="0"+c);var d=a.g.toString(16);a.g<16&&(d="0"+d);var e=a.b.toString(16);return a.b<16&&(e="0"+e),"#"+[c,d,e].join("").toUpperCase()}return"rgb"==b?"undefined"==typeof a.a?"rgb("+[a.r,a.g,a.b].join(",")+")":"rgba("+[a.r,a.g,a.b,a.a].join(",")+")":a},scale:function(){function a(a,b){var f={r:parseInt(c.r+(e.r-c.r)*a,10),g:parseInt(c.g+(e.g-c.g)*a,10),b:parseInt(c.b+(e.b-c.b)*a,10)};return d.format(f,b)}var c,e;return a.domain=function(b,f){return c=d.rgb(b),e=d.rgb(f),a},a.ticks=function(c){for(var d=1/c,e=0,f=[];e<=1;){var g=a(e,"hex");f.push(g),e=b.plus(e,d)}return f},a},map:function(a,b){var c=[];b=b||5;for(var e=d.scale(),f=0,g=a.length-1;f<g;f++)if(0==f)c=e.domain(a[f],a[f+1]).ticks(b);else{var h=e.domain(a[f],a[f+1]).ticks(b);h.shift(),c=c.concat(h)}return c},rgb:function(b){if("string"==typeof b){if(b.indexOf("rgb(")>-1){for(var c=b.replace("rgb(","").replace(")","").split(","),d=0,e=c.length;d<e;d++)c[d]=parseInt(a.trim(c[d]),10);return{r:c[0],g:c[1],b:c[2],a:1}}if(b.indexOf("rgba(")>-1){for(var c=b.replace("rgba(","").replace(")","").split(","),d=0,e=c.length;d<e;d++)e-1==d?c[d]=parseFloat(a.trim(c[d])):c[d]=parseInt(a.trim(c[d]),10);return{r:c[0],g:c[1],b:c[2],a:c[3]}}if(0==b.indexOf("#")){b=b.replace("#","");var c=[];if(3==b.length)for(var d=0,e=b.length;d<e;d++){var f=b.substr(d,1);c.push(parseInt(f+f,16))}else for(var d=0,e=b.length;d<e;d+=2)c.push(parseInt(b.substr(d,2),16));return{r:c[0],g:c[1],b:c[2],a:1}}}return b},HSVtoRGB:function(a,b,c){360==a&&(a=0);var d=b*c,e=d*(1-Math.abs(a/60%2-1)),f=c-d,g=[];return 0<=a&&a<60?g=[d,e,0]:60<=a&&a<120?g=[e,d,0]:120<=a&&a<180?g=[0,d,e]:180<=a&&a<240?g=[0,e,d]:240<=a&&a<300?g=[e,0,d]:300<=a&&a<360&&(g=[d,0,e]),{r:Math.ceil(255*(g[0]+f)),g:Math.ceil(255*(g[1]+f)),b:Math.ceil(255*(g[2]+f))}},RGBtoHSV:function(a,b,c){var d=a/255,e=b/255,f=c/255,g=Math.max(d,e,f),h=Math.min(d,e,f),i=g-h,j=0;0==i?j=0:g==d?j=60*((e-f)/i%6):g==e?j=60*((f-d)/i+2):g==f&&(j=60*((d-e)/i+4)),j<0&&(j=360+j);var k=0;k=0==g?0:i/g;var l=g;return{h:j,s:k,v:l}},trim:function(a){return(a||"").replace(/^\s+|\s+$/g,"")},lighten:function(a,b){a=a.replace(/[^0-9a-f]/gi,""),b=b||0;var c,d,e=[];for(d=0;d<6;d+=2)c=parseInt(a.substr(d,2),16),c=Math.round(Math.min(Math.max(0,c+c*b),255)).toString(16),e.push(("00"+c).substr(c.length));return"#"+e.join("")},darken:function(a,b){return this.lighten(a,-b)},parse:function(a){return this.parseGradient(a)},parseGradient:function(a){var b=a.match(this.regex);if(!b)return a;var c=this.trim(b[1]),d=this.parseAttr(c,this.trim(b[2])),e=this.parseStop(this.trim(b[3])),f={type:c+"Gradient",attr:d,children:e};return f},parseStop:function(a){for(var b=a.split(","),c=[],d=0,e=b.length;d<e;d++){var a=b[d],f=a.split(" ");0!=f.length&&(1==f.length?c.push({type:"stop",attr:{"stop-color":f[0]}}):2==f.length?c.push({type:"stop",attr:{offset:f[0],"stop-color":f[1]}}):3==f.length&&c.push({type:"stop",attr:{offset:f[0],"stop-color":f[1],"stop-opacity":f[2]}}))}for(var g=-1,h=-1,d=0,e=c.length;d<e;d++){var a=c[d];if(0==d?a.offset||(a.offset=0):d==e-1&&(a.offset||(a.offset=1)),g==-1&&"undefined"==typeof a.offset)g=d;else if(h==-1&&"undefined"==typeof a.offset){h=d;for(var i=h-g,j=c[h].offset.indexOf("%")>-1?parseFloat(c[h].offset)/100:c[h].offset,k=c[g].offset.indexOf("%")>-1?parseFloat(c[g].offset)/100:c[g].offset,l=j-k,m=l/i,n=k+m,o=g+1;o<h;o++)c[o].offset=n,n+=m;g=h,h=-1}}return c},parseAttr:function(a,b){if("linear"!=a){for(var c=b.split(","),d=0,e=c.length;d<e;d++)c[d].indexOf("%")==-1&&(c[d]=parseFloat(c[d]));return{cx:c[0],cy:c[1],r:c[2],fx:c[3],fy:c[4]}}switch(b){case"":case"left":return{x1:0,y1:0,x2:1,y2:0,direction:b||"left"};case"right":return{x1:1,y1:0,x2:0,y2:0,direction:b};case"top":return{x1:0,y1:0,x2:0,y2:1,direction:b};case"bottom":return{x1:0,y1:1,x2:0,y2:0,direction:b};case"top left":return{x1:0,y1:0,x2:1,y2:1,direction:b};case"top right":return{x1:1,y1:0,x2:0,y2:1,direction:b};case"bottom left":return{x1:0,y1:1,x2:1,y2:0,direction:b};case"bottom right":return{x1:1,y1:1,x2:0,y2:0,direction:b};default:for(var c=b.split(","),d=0,e=c.length;d<e;d++)c[d].indexOf("%")==-1&&(c[d]=parseFloat(c[d]));return{x1:c[0],y1:c[1],x2:c[2],y2:c[3]}}},colorHash:function(a,b){var d=0;return a&&(a=a.replace(/.*`/,""),a=a.replace(/\(.*/,""),d=c(a)),"function"==typeof b?b(d):{r:200+Math.round(55*d),g:0+Math.round(230*(1-d)),b:0+Math.round(55*(1-d))}}};return d.map.parula=function(a){return d.map(["#352a87","#0f5cdd","#00b5a6","#ffc337","#fdff00"],a)},d.map.jet=function(a){return d.map(["#00008f","#0020ff","#00ffff","#51ff77","#fdff00","#ff0000","#800000"],a);
},d.map.hsv=function(a){return d.map(["#ff0000","#ffff00","#00ff00","#00ffff","#0000ff","#ff00ff","#ff0000"],a)},d.map.hot=function(a){return d.map(["#0b0000","#ff0000","#ffff00","#ffffff"],a)},d.map.pink=function(a){return d.map(["#1e0000","#bd7b7b","#e7e5b2","#ffffff"],a)},d.map.bone=function(a){return d.map(["#000000","#4a4a68","#a6c6c6","#ffffff"],a)},d.map.copper=function(a){return d.map(["#000000","#3d2618","#9d623e","#ffa167","#ffc77f"],a)},d}),jui.define("manager",["util.base"],function(a){var b=new function(){var c=[],d=[];this.add=function(a){c.push(a)},this.emit=function(a,b,d){for(var e=[],f=0;f<c.length;f++){var g=c[f];a!=g.selector&&a!=g.type||e.push(g)}for(var f=0;f<e.length;f++)for(var g=e[f],h=0;h<g.length;h++)g[h].emit(b,d)},this.get=function(b){if(a.typeCheck("integer",b))return c[b];if(a.typeCheck("string",b)){for(var d=0;d<c.length;d++){var e=c[d];if(b==e.selector)return 1==e.length?e[0]:e}for(var f=[],d=0;d<c.length;d++){var e=c[d];b==e.type&&f.push(e)}return f}},this.getAll=function(){return c},this.remove=function(b){if(a.typeCheck("integer",b))return c.splice(b,1)[0]},this.shift=function(){return c.shift()},this.pop=function(){return c.pop()},this.size=function(){return c.length},this.debug=function(b,c,d,e){if(b.__proto__){var f=["emit","on","addEvent","addValid","callBefore","callAfter","callDelay","setTpl","setVo","setOption"];for(var g in b){var h=b[g];"function"==typeof h&&a.inArray(g,f)==-1&&!function(a,d,f,g){b.__proto__[a]=function(){var b=Date.now(),h=d.apply(this,arguments),i=Date.now();return"function"==typeof e?e({type:jui.get(c).type,name:a,c_index:f,u_index:g,time:i-b},arguments):(isNaN(f)||isNaN(g)?console.log("NAME("+a+"), TIME("+(i-b)+"ms), ARGUMENTS..."):console.log("TYPE("+jui.get(c).type+"), NAME("+a+"), INDEX("+f+":"+g+"), TIME("+(i-b)+"ms), ARGUMENTS..."),console.log(arguments),console.log("")),h}}(g,h,c,d)}}},this.debugAll=function(a){for(var b=0;b<c.length;b++)for(var d=c[b],e=0;e<d.length;e++)this.debug(d[e],b,e,a)},this.addClass=function(a){d.push(a)},this.getClass=function(b){if(a.typeCheck("integer",b))return d[b];if(a.typeCheck("string",b))for(var c=0;c<d.length;c++)if(b==d[c].type)return d[c];return null},this.getClassAll=function(){return d},this.create=function(c,d,e){var f=b.getClass(c);if(a.typeCheck("null",f))throw new Error("JUI_CRITICAL_ERR: '"+c+"' does not exist");return f["class"](d,e)}};return b}),jui.define("collection",[],function(){var a=function(a,b,c,d){this.type=a,this.selector=b,this.options=c,this.destroy=function(){for(var a=0;a<d.length;a++)d[a].destroy()};for(var e=0;e<d.length;e++)this.push(d[e])};return a.prototype=Object.create(Array.prototype),a}),jui.define("core",["util.base","util.dom","manager","collection"],function(a,b,c,d){var e=function(){this.emit=function(b,c){if(a.typeCheck("string",b)){for(var d,e=0;e<this.event.length;e++){var f=this.event[e];if(f.type==b.toLowerCase()){var g=a.typeCheck("array",c)?c:[c];d=f.callback.apply(this,g)}}return d}},this.on=function(b,c){a.typeCheck("string",b)&&a.typeCheck("function",c)&&this.event.push({type:b.toLowerCase(),callback:c,unique:!1})},this.off=function(b){for(var c=[],d=0;d<this.event.length;d++){var e=this.event[d];(a.typeCheck("function",b)&&e.callback!=b||a.typeCheck("string",b)&&e.type!=b.toLowerCase())&&c.push(e)}this.event=c},this.addValid=function(b,c){if(this.__proto__){var d=this.__proto__[b];this.__proto__[b]=function(){for(var e=arguments,f=0;f<e.length;f++)if(!a.typeCheck(c[f],e[f]))throw new Error("JUI_CRITICAL_ERR: the "+f+"th parameter is not a "+c[f]+" ("+b+")");return d.apply(this,e)}}},this.callBefore=function(b,c){if(this.__proto__){var d=this.__proto__[b];this.__proto__[b]=function(){var b=arguments;return a.typeCheck("function",c)?c.apply(this,b)!==!1?d.apply(this,b):void 0:d.apply(this,b)}}},this.callAfter=function(b,c){if(this.__proto__){var d=this.__proto__[b];this.__proto__[b]=function(){var b=arguments,e=d.apply(this,b);return a.typeCheck("function",c)&&e!==!1&&c.apply(this,b),e}}},this.callDelay=function(b,c){function d(b,d){var f=e.apply(b,d);a.typeCheck("function",c.after)&&f!==!1&&c.after.apply(b,d)}if(this.__proto__){var e=this.__proto__[b],f=isNaN(c.delay)?0:c.delay;this.__proto__[b]=function(){var b=this,e=arguments;a.typeCheck("function",c.before)&&c.before.apply(b,e),f>0?setTimeout(function(){d(b,e)},f):d(b,e)}}},this.setTpl=function(b,c){this.tpl[b]=a.template(c)},this.setOption=function(b,c){if(a.typeCheck("object",b))for(var d in b)this.options[d]=b[d];else this.options[b]=c},this.destroy=function(){if(this.__proto__)for(var a in this.__proto__)delete this.__proto__[a]}};return e.build=function(e){return function(f,g){var h=[],i=[];a.typeCheck("string",f)?i=b.find(f):a.typeCheck("object",f)?i.push(f):i.push(document.createElement("div"));for(var j=0,k=i.length;j<k;j++)h[j]=jui.createUIObject(e,f,j,i[j],g);return c.add(new d(e.type,f,g,h)),0==h.length?null:1==h.length?h[0]:h}},e.init=function(a){var b=null;return"object"==typeof a&&(b=e.build(a),c.addClass({type:a.type,"class":b})),b},e.setup=function(){return{tpl:{},event:{}}},window.jui="object"==typeof jui?a.extend(jui,c,!0):c,e}),jui.define("event",["jquery","util.base","manager","collection"],function(a,b,c,d){var e=function(){function c(b){for(var c=["webkit","moz","MS","o",""],d=0;d<c.length;d++){var e=b.type;c[d]||(e=e.toLowerCase()),a(b.target).on(c[d]+e,b.callback)}g.push(b)}function d(b){b.callback&&!b.children?a(b.target).on(b.type,b.callback):a(b.target).on(b.type,b.children,b.callback),g.push(b)}function e(b){b.callback&&!b.children?a(b.target).on(f(b.type),b.callback):a(b.target).on(f(b.type),b.children,b.callback),g.push(b)}function f(a){return{click:"touchstart",dblclick:"touchend",mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"}[a]}var g=[];this.add=function(f){var g={target:f[0],type:f[1]};b.typeCheck("function",f[2])?g=a.extend(g,{callback:f[2]}):b.typeCheck("string",f[2])&&(g=a.extend(g,{children:f[2],callback:f[3]}));for(var h=b.typeCheck("array",g.type)?g.type:[g.type],i=0;i<h.length;i++)g.type=h[i],g.type.toLowerCase().indexOf("animation")!=-1?c(g):("body"!=g.target&&g.target!=window&&g.target!=document&&a(g.target).off(g.type),b.isTouch?e(g):d(g))},this.trigger=function(c,d){a(c).trigger(b.isTouch?f(d):d)},this.get=function(a){return g[a]},this.getAll=function(){return g},this.size=function(){return g.length}},f=function(){var b=null;this.find=function(b){return a(this.root).find(b)},this.addEvent=function(){this.listen.add(arguments)},this.addTrigger=function(a,b){this.listen.trigger(a,b)},this.setVo=function(){this.options.vo&&(null!=b&&b.reload(),b=a(this.selector).jbinder(),this.bind=b)},this.destroy=function(){for(var b=0;b<this.listen.size();b++){var c=this.listen.get(b);a(c.target).off(c.type)}if(this.__proto__)for(var d in this.__proto__)delete this.__proto__[d]}};return f.build=function(b){return function(f,g){var h=[],i=a(f||"<div />");return i.each(function(c){h[c]=jui.createUIObject(b,i.selector,c,this,g,function(b,c){b.init.prototype.listen=new e,a("script").each(function(b){if(f==a(this).data("jui")||f==a(this).data("vo")||f instanceof HTMLElement){var d=a(this).data("tpl");if(""==d)throw new Error("JUI_CRITICAL_ERR: 'data-tpl' property is required");c.tpl[d]=a(this).html()}})})}),c.add(new d(b.type,f,g,h)),0==h.length?null:1==h.length?h[0]:h}},f.init=function(a){var b=null;return"object"==typeof a&&(b=f.build(a),c.addClass({type:a.type,"class":b})),b},f.setup=function(){return{vo:null}},f},"core"),"object"==typeof module&&module.exports)try{module.exports=require("juijs")}catch(e){console.log("JUI_WARNING_MSG: Base module does not exist")}jui.redefine("util.time",["util.base"],function(a){var b={MILLISECOND:1e3,MINUTE:6e4,HOUR:36e5,DAY:864e5,years:"years",months:"months",days:"days",hours:"hours",minutes:"minutes",seconds:"seconds",milliseconds:"milliseconds",weeks:"weeks",diff:function(a,c,d){var e=+c-+d;return"seconds"==a?Math.abs(Math.floor(e/b.MILLISECOND)):"minutes"==a?Math.abs(Math.floor(e/b.MINUTE)):"hours"==a?Math.abs(Math.floor(e/b.HOUR)):"days"==a?Math.abs(Math.floor(e/b.DAY)):e},add:function(a){if(arguments.length<=2)return a;if(arguments.length>2){for(var b=new Date((+a)),c=1;c<arguments.length;c+=2){var d="string"==typeof arguments[c]?this[arguments[c]]:arguments[c],e=arguments[c+1];this.years==d?b.setFullYear(b.getFullYear()+e):this.months==d?b.setMonth(b.getMonth()+e):this.days==d?b.setDate(b.getDate()+e):this.hours==d?b.setHours(b.getHours()+e):this.minutes==d?b.setMinutes(b.getMinutes()+e):this.seconds==d?b.setSeconds(b.getSeconds()+e):this.milliseconds==d?b.setMilliseconds(b.getMilliseconds()+e):this.weeks==d&&b.setDate(b.getDate()+7*e)}return b}},format:function(b,c,d){return a.dateFormat(b,c,d)}};return b},null,!0),jui.redefine("util.transform",["util.math"],function(a){var b=function(b){function c(c){for(var d=0,e=b.length;d<e;d++)b[d]=a.matrix(c,b[d]);return b}this.matrix=function(){var b=arguments,c=b[0];return"move"==c?[new Float32Array([1,0,b[1]]),new Float32Array([0,1,b[2]]),new Float32Array([0,0,1])]:"scale"==c?[new Float32Array([b[1],0,0]),new Float32Array([0,b[2],0]),new Float32Array([0,0,1])]:"rotate"==c?[new Float32Array([Math.cos(a.radian(b[1])),-Math.sin(a.radian(b[1])),0]),new Float32Array([Math.sin(a.radian(b[1])),Math.cos(a.radian(b[1])),0]),new Float32Array([0,0,1])]:"move3d"==c?[new Float32Array([1,0,0,b[1]]),new Float32Array([0,1,0,b[2]]),new Float32Array([0,0,1,b[3]]),new Float32Array([0,0,0,1])]:"scale3d"==c?[new Float32Array([b[1],0,0,0]),new Float32Array([0,b[2],0,0]),new Float32Array([0,0,b[3],0]),new Float32Array([0,0,0,1])]:"rotate3dz"==c?[new Float32Array([Math.cos(a.radian(b[1])),-Math.sin(a.radian(b[1])),0,0]),new Float32Array([Math.sin(a.radian(b[1])),Math.cos(a.radian(b[1])),0,0]),new Float32Array([0,0,1,0]),new Float32Array([0,0,0,1])]:"rotate3dx"==c?[new Float32Array([1,0,0,0]),new Float32Array([0,Math.cos(a.radian(b[1])),-Math.sin(a.radian(b[1])),0]),new Float32Array([0,Math.sin(a.radian(b[1])),Math.cos(a.radian(b[1])),0]),new Float32Array([0,0,0,1])]:"rotate3dy"==c?[new Float32Array([Math.cos(a.radian(b[1])),0,Math.sin(a.radian(b[1])),0]),new Float32Array([0,1,0,0]),new Float32Array([-Math.sin(a.radian(b[1])),0,Math.cos(a.radian(b[1])),0]),new Float32Array([0,0,0,1])]:void 0},this.move=function(a,b){return c(this.matrix("move",a,b))},this.move3d=function(a,b,d){return c(this.matrix("move3d",a,b,d))},this.scale=function(a,b){return c(this.matrix("scale",a,b))},this.scale3d=function(a,b,d){return c(this.matrix("scale3d",a,b,d))},this.rotate=function(a){return c(this.matrix("rotate",a))},this.rotate3dz=function(a){return c(this.matrix("rotate3dz",a))},this.rotate3dx=function(a){return c(this.matrix("rotate3dx",a))},this.rotate3dy=function(a){return c(this.matrix("rotate3dy",a))},this.custom=function(a){return c(a)},this.merge=function(){for(var b=arguments,d=this.matrix.apply(this,b[0]),e=1;e<b.length;e++)d=a.matrix(d,this.matrix.apply(this,b[e]));return c(d)},this.merge2=function(c){for(var d=0,e=b.length;d<e;d++){for(var f=c.apply(null,b[d]),g=this.matrix.apply(this,f[0]),h=1;h<f.length;h++)g=a.matrix(g,this.matrix.apply(this,f[h]));b[d]=a.matrix(g,b[d])}}};return b},null,!0),jui.define("util.svg.element",[],function(){var a=function(){var b=[];this.create=function(a,b){this.element=document.createElementNS("http://www.w3.org/2000/svg",a),this.children=[],this.parent=null,this.styles={},this.attributes={},this.order=0,this.attr(b)},this.each=function(a){if("function"==typeof a){for(var b=0,c=this.children.length;b<c;b++){var d=this.children[b];a.apply(d,[b,d])}return this.children}},this.get=function(a){return this.children[a]?this.children[a]:null},this.index=function(a){for(var b=0;b<this.children.length;b++)if(a==this.children[b])return b;return-1},this.append=function(b){return b instanceof a&&(b.parent&&b.remove(),this.children.push(b),b.parent=this),this},this.prepend=function(a){return this.insert(0,a)},this.insert=function(a,b){return b.parent&&b.remove(),this.children.splice(a,0,b),b.parent=this,this},this.remove=function(){for(var a=0,b=[],c=this.parent.children,d=0;d<c.length;d++){if(c[d]==this){a=d;break}b.push(c[d])}return this.parent.children=b,this},this.attr=function(a){if("undefined"!=typeof a&&a){if("string"==typeof a)return this.attributes[a]||this.element.getAttribute(a);for(var b in a)this.attributes[b]=a[b],b.indexOf("xlink:")!=-1?this.element.setAttributeNS("http://www.w3.org/1999/xlink",b,a[b]):this.element.setAttribute(b,a[b]);return this}},this.css=function(a){var b=[];for(var c in a)this.styles[c]=a[c];for(var c in a)b.push(c+":"+a[c]);return this.attr({style:b.join(";")}),this},this.html=function(a){return this.element.innerHTML=a,this},this.text=function(a){for(var b=this.element.childNodes,c=0;c<b.length;c++)this.element.removeChild(b[c]);return this.element.appendChild(document.createTextNode(a)),this},this.on=function(a,c){var d=function(a){"function"==typeof c&&c.call(this,a)};return this.element.addEventListener(a,d,!1),b.push({type:a,callback:d}),this},this.off=function(a){if(a){for(var c=[],d=0,e=b.length;d<e;d++){var f=b[d];f.type!=a?c.push(f):this.element.removeEventListener(f.type,f.callback,!1)}b=c}else for(var d=0,e=b.length;d<e;d++){var f=b.shift();this.element.removeEventListener(f.type,f.callback,!1)}return this},this.hover=function(a,c){var d=function(b){"function"==typeof a&&a.call(this,b)},e=function(a){"function"==typeof c&&c.call(this,a)};return this.element.addEventListener("mouseover",d,!1),this.element.addEventListener("mouseout",e,!1),b.push({type:"mouseover",callback:d}),b.push({type:"mouseout",callback:e}),this},this.size=function(){var a={width:0,height:0},b=this.element.getBoundingClientRect();if(!b||0==b.width&&0==b.height){for(var c=["height","paddingTop","paddingBottom","borderTopWidth","borderBottomWidth"],d=["width","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"],e=window.getComputedStyle(this.element),f=0;f<c.length;f++)a.height+=parseFloat(e[c[f]]);for(var f=0;f<d.length;f++)a.width+=parseFloat(e[d[f]]);a.width=a.width||this.element.getAttribute("width"),a.height=a.height||this.element.getAttribute("height")}else a.width=b.width,a.height=b.height;return isNaN(a.width)&&(a.width=0),isNaN(a.height)&&(a.height=0),a},this.is=function(a){return this instanceof jui.include(a)}};return a}),jui.define("util.svg.element.transform",["util.base"],function(a){var b=function(){function b(a){var b=[];for(var c in d)d[c]&&b.push(d[c]);a.attr({transform:b.join(" ")})}function c(a){for(var b=[],c=0;c<a.length;c++)b.push(a[c]);return b.join(",")}var d={translate:null,scale:null,rotate:null,skew:null,matrix:null};this.translate=function(){return d.translate="translate("+c(arguments)+")",b(this),this},this.rotate=function(a,c,e){if(1==arguments.length)var f=a;else if(3==arguments.length)var f=a+" "+c+","+e;return d.rotate="rotate("+f+")",b(this),this},this.scale=function(){return d.scale="scale("+c(arguments)+")",b(this),this},this.skew=function(){return d.skew="skew("+c(arguments)+")",b(this),this},this.matrix=function(){return d.matrix="matrix("+c(arguments)+")",b(this),this},this.data=function(b){var c=this.attr("transform"),d={translate:/[^translate()]+/g,rotate:/[^rotate()]+/g,scale:/[^scale()]+/g,skew:/[^skew()]+/g,matrix:/[^matrix()]+/g};return a.typeCheck("string",c)?c.match(d[b])[0]:null}};return b},"util.svg.element"),jui.define("util.svg.element.path",["util.base"],function(a){var b=function(){var b=[];this.moveTo=function(a,c,d){return b.push((d||"m")+a+","+c),this},this.MoveTo=function(a,b){return this.moveTo(a,b,"M")},this.lineTo=function(a,c,d){return b.push((d||"l")+a+","+c),this},this.LineTo=function(a,b){return this.lineTo(a,b,"L")},this.hLineTo=function(a,c){return b.push((c||"h")+a),this},this.HLineTo=function(a){return this.hLineTo(a,"H")},this.vLineTo=function(a,c){return b.push((c||"v")+a),this},this.VLineTo=function(a){return this.vLineTo(a,"V")},this.curveTo=function(a,c,d,e,f,g,h){return b.push((h||"c")+a+","+c+" "+d+","+e+" "+f+","+g),this},this.CurveTo=function(a,b,c,d,e,f){return this.curveTo(a,b,c,d,e,f,"C")},this.sCurveTo=function(a,c,d,e,f){return b.push((f||"s")+a+","+c+" "+d+","+e),this},this.SCurveTo=function(a,b,c,d){return this.sCurveTo(a,b,c,d,"S")},this.qCurveTo=function(a,c,d,e,f){return b.push((f||"q")+a+","+c+" "+d+","+e),this},this.QCurveTo=function(a,b,c,d){return this.qCurveTo(a,b,c,d,"Q")},this.tCurveTo=function(a,c,d,e,f){return b.push((f||"t")+a+","+c+" "+d+","+e),this},this.TCurveTo=function(a,b,c,d){return this.tCurveTo(a,b,c,d,"T")},this.arc=function(a,c,d,e,f,g,h,i){return e=e?1:0,f=f?1:0,b.push((i||"a")+a+","+c+" "+d+" "+e+","+f+" "+g+","+h),this},this.Arc=function(a,b,c,d,e,f,g){return this.arc(a,b,c,d,e,f,g,"A")},this.closePath=function(a){return b.push(a||"z"),this},this.ClosePath=function(){return this.closePath("Z")},this.join=function(){b.length>0&&(this.attr({d:b.join(" ")}),b=[])},this.length=function(){var c=a.createId(),d=b.join(" "),e=document.createElement("svg"),f=document.createElementNS("http://www.w3.org/2000/svg","path");f.setAttributeNS(null,"id",c),f.setAttributeNS(null,"d",d),e.appendChild(f),document.body.appendChild(e);var g=document.getElementById(c).getTotalLength();return document.body.removeChild(e),g}};return b},"util.svg.element.transform"),jui.define("util.svg.element.path.rect",[],function(){var a=function(){this.round=function(a,b,c,d,e,f){c=c?c:0,d=d?d:0,e=e?e:0,f=f?f:0,this.MoveTo(0,c).Arc(c,c,0,0,1,c,0).HLineTo(a-d).Arc(d,d,0,0,1,a,d).VLineTo(b-e).Arc(e,e,0,0,1,a-e,b).HLineTo(f).Arc(f,f,0,0,1,0,b-f).ClosePath().join()}};return a},"util.svg.element.path"),jui.define("util.svg.element.path.symbol",[],function(){var a=function(){var a="";this.template=function(a,b){var c=a,d=half_r=a/2,e=b/2,f="a"+half_r+","+half_r+" 0 1,1 "+c+",0",g="a"+half_r+","+half_r+" 0 1,1 "+-c+",0",h={triangle:["m0,"+-e,"l"+d+","+b,"l"+-a+",0","l"+d+","+-b].join(" "),rect:["m"+-d+","+-e,"l"+a+",0","l0,"+b,"l"+-a+",0","l0,"+-b].join(" "),cross:["m"+-d+","+-e,"l"+a+","+b,"m0,"+-b,"l"+-a+","+b].join(" "),circle:["m"+-c+",0",f,g].join(" ")};return h.rectangle=h.rect,h},this.join=function(){a.length>0&&(this.attr({d:a}),a="")},this.add=function(b,c,d){a+=" M"+b+","+c+d},this.triangle=function(a,b,c,d){return this.MoveTo(a,b).moveTo(0,-d/2).lineTo(c/2,d).lineTo(-c,0).lineTo(c/2,-d)},this.rect=this.rectangle=function(a,b,c,d){return this.MoveTo(a,b).moveTo(-c/2,-d/2).lineTo(c,0).lineTo(0,d).lineTo(-c,0).lineTo(0,-d)},this.cross=function(a,b,c,d){return this.MoveTo(a,b).moveTo(-c/2,-d/2).lineTo(c,d).moveTo(0,-d).lineTo(-c,d)},this.circle=function(a,b,c){return this.MoveTo(a,b).moveTo(-c,0).arc(c/2,c/2,0,1,1,c,0).arc(c/2,c/2,0,1,1,-c,0)}};return a},"util.svg.element.path"),jui.define("util.svg.element.poly",[],function(){var a=function(){var a=[];this.point=function(b,c){return a.push(b+","+c),this},this.join=function(){if(a.length>0){var b=a[0];a.push(b),this.attr({points:a.join(" ")}),a=[]}}};return a},"util.svg.element.transform"),jui.define("util.svg.base",["util.base","util.math","util.color","util.svg.element","util.svg.element.transform","util.svg.element.path","util.svg.element.path.symbol","util.svg.element.path.rect","util.svg.element.poly"],function(a,b,c,d,e,f,g,h,i){var j=null,k=function(){this.create=function(a,b,c,d){return a.create(b,c),a},this.createChild=function(a,b,c,d){return this.create(a,b,c,d)},this.custom=function(a,b,c){return this.create(new d,a,b,c)},this.defs=function(a){return this.create(new d,"defs",null,a)},this.symbol=function(a,b){return this.create(new d,"symbol",a,b)},this.g=this.group=function(a,b){return this.create(new e,"g",a,b)},this.marker=function(a,b){return this.create(new d,"marker",a,b)},this.a=function(a,b){return this.create(new e,"a",a,b)},this["switch"]=function(a,b){return this.create(new d,"switch",a,b)},this.use=function(a){return this.create(new d,"use",a)},this.rect=function(a,b){return this.create(new e,"rect",a,b)},this.line=function(a,b){return this.create(new e,"line",a,b)},this.circle=function(a,b){return this.create(new e,"circle",a,b)},this.text=function(b,c){return 2==arguments.length?a.typeCheck("function",c)?this.create(new e,"text",b,c):this.create(new e,"text",b).text(c):this.create(new e,"text",b)},this.textPath=function(b,c){return a.typeCheck("string",c)?this.create(new d,"textPath",b).text(c):this.create(new d,"textPath",b)},this.tref=function(b,c){return a.typeCheck("string",c)?this.create(new d,"tref",b).text(c):this.create(new d,"tref",b)},this.tspan=function(b,c){return a.typeCheck("string",c)?this.create(new d,"tspan",b).text(c):this.create(new d,"tspan",b)},this.ellipse=function(a,b){return this.create(new e,"ellipse",a,b)},this.image=function(a,b){return this.create(new e,"image",a,b)},this.path=function(a,b){return this.create(new f,"path",a,b)},this.pathSymbol=function(a,b){return this.create(new g,"path",a,b)},this.pathRect=function(a,b){return this.create(new h,"path",a,b)},this.polyline=function(a,b){return this.create(new i,"polyline",a,b)},this.polygon=function(a,b){return this.create(new i,"polygon",a,b)},this.pattern=function(a,b){return this.create(new d,"pattern",a,b)},this.mask=function(a,b){return this.create(new d,"mask",a,b)},this.clipPath=function(a,b){return this.create(new d,"clipPath",a,b)},this.linearGradient=function(a,b){return this.create(new d,"linearGradient",a,b)},this.radialGradient=function(a,b){return this.create(new d,"radialGradient",a,b)},this.filter=function(a,b){return this.create(new d,"filter",a,b)},this.foreignObject=function(a,b){return this.create(new e,"foreignObject",a,b)},this.stop=function(a){return this.createChild(new d,"stop",a)},this.animate=function(a){return this.createChild(new d,"animate",a)},this.animateColor=function(a){return this.createChild(new d,"animateColor",a)},this.animateMotion=function(a){return this.createChild(new d,"animateMotion",a)},this.animateTransform=function(a){return this.createChild(new d,"animateTransform",a)},this.mpath=function(a){return this.createChild(new d,"mpath",a)},this.set=function(a){return this.createChild(new d,"set",a)},this.feBlend=function(a){return this.createChild(new d,"feBlend",a)},this.feColorMatrix=function(a){return this.createChild(new d,"feColorMatrix",a)},this.feComponentTransfer=function(a){return this.createChild(new d,"feComponentTransfer",a)},this.feComposite=function(a){return this.createChild(new d,"feComposite",a)},this.feConvolveMatrix=function(a){return this.createChild(new d,"feConvolveMatrix",a)},this.feDiffuseLighting=function(a){return this.createChild(new d,"feDiffuseLighting",a)},this.feDisplacementMap=function(a){return this.createChild(new d,"feDisplacementMap",a)},this.feFlood=function(a){return this.createChild(new d,"feFlood",a)},this.feGaussianBlur=function(a){return this.createChild(new d,"feGaussianBlur",a)},this.feImage=function(a){return this.createChild(new d,"feImage",a)},this.feMerge=function(a,b){return this.createChild(new d,"feMerge",a,b)},this.feMergeNode=function(a){return this.createChild(new d,"feMergeNode",a)},this.feMorphology=function(a){return this.createChild(new d,"feMorphology",a)},this.feOffset=function(a){return this.createChild(new d,"feOffset",a)},this.feSpecularLighting=function(a){return this.createChild(new d,"feSpecularLighting",a)},this.feTile=function(a){return this.createChild(new d,"feTile",a)},this.feTurbulence=function(a){return this.createChild(new d,"feTurbulence",a)}};return k.create=function(a,b,c){return null==j&&(j=new k),j.custom(a,b,c)},k}),jui.define("util.svg.base3d",["util.base","util.math","util.color"],function(a,b,c){var d=function(){this.rect3d=function(a,d,e,f,g){var h=this,i=b.radian(f),j=0,k=0,l=d,m=e,n=Math.cos(i)*g,o=Math.sin(i)*g,p=d+n,q=e+o,r=h.group({},function(){h.path({fill:c.lighten(a,.15),stroke:c.lighten(a,.15)}).MoveTo(n,j).LineTo(p,k).LineTo(l,o).LineTo(j,o),h.path({fill:a,stroke:a}).MoveTo(j,o).LineTo(j,q).LineTo(l,q).LineTo(l,o),h.path({fill:c.darken(a,.2),stroke:c.darken(a,.2)}).MoveTo(l,q).LineTo(p,m).LineTo(p,k).LineTo(l,o)});return r},this.cylinder3d=function(d,e,f,g,h,i){var j=this,k=b.radian(g),i=void 0==i?1:0==i?.01:i,l=e/2,m=l*i,n=Math.cos(k)*h/2,o=Math.sin(k)*h/2,p=a.createId("cylinder3d"),q=j.group({},function(){j.ellipse({fill:c.darken(d,.05),"fill-opacity":.85,stroke:c.darken(d,.05),rx:l,ry:o,cx:l,cy:f}).translate(n,o),j.path({fill:"url(#"+p+")","fill-opacity":.85,stroke:d}).MoveTo(l-m,o).LineTo(0,f).Arc(l,o,0,0,0,e,f).LineTo(l+m,o).Arc(l+m,o,0,0,1,l-m,o).translate(n,o),j.ellipse({fill:c.lighten(d,.2),"fill-opacity":.95,stroke:c.lighten(d,.2),rx:l*i,ry:o*i,cx:l,cy:o}).translate(n,o),j.linearGradient({id:p,x1:"100%",x2:"0%",y1:"0%",y2:"0%"},function(){j.stop({offset:"0%","stop-color":c.lighten(d,.15)}),j.stop({offset:"33.333333333333336%","stop-color":c.darken(d,.2)}),j.stop({offset:"66.66666666666667%","stop-color":c.darken(d,.2)}),j.stop({offset:"100%","stop-color":c.lighten(d,.15)})})});return q}};return d},"util.svg.base"),jui.redefine("util.svg",["util.base","util.math","util.color","util.svg.element","util.svg.element.transform","util.svg.element.path","util.svg.element.path.symbol","util.svg.element.path.rect","util.svg.element.poly"],function(a,b,c,d,e,f,g,h,i){var j=function(b,c){function g(){l.root=m=new d,n=new e,o=new e,m.create("svg",c),n.create("g"),o.create("g"),n.translate(.5,.5),o.translate(.5,.5),b.appendChild(m.element),m.append(n),m.append(o)}function h(a){var b=a.children;k(b)&&b.sort(function(a,b){return a.order-b.order});for(var c=0,d=b.length;c<d;c++){var e=b[c];e&&(e.children.length>0&&h(e),(e instanceof f||e instanceof i)&&e.join(),e.parent==a&&a.element.appendChild(e.element))}}function j(a){for(var b=a.children,c=0,d=b.length;c<d;c++){var e=b[c];e&&(e.off(),e.children.length>0&&j(e))}}function k(a){for(var b=0,c=a.length;b<c;b++)if(a[b].order>0)return!0;return!1}var l=this,m=null,n=null,o=null,p={},q=0,r=!1;this.create=function(b,c,d,e){return b.create(c,d),0==q?n.append(b):p[q].append(b),a.typeCheck("function",e)&&(q++,p[q]=b,e.call(b),q--),b},this.createChild=function(a,b,c,d){if(a.parent==n)throw new Error("JUI_CRITICAL_ERR: Parents are required elements of the '"+b+"'");return this.create(a,b,c,d)},this.size=function(){if(2!=arguments.length)return m.size();var a=arguments[0],b=arguments[1];m.attr({width:a,height:b})},this.clear=function(a){n.each(function(){this.element.parentNode&&n.element.removeChild(this.element)}),j(n),a===!0&&(o.each(function(){this.element.parentNode&&o.element.removeChild(this.element)}),j(o))},this.reset=function(a){this.clear(a),n.children=[],a===!0&&(o.children=[])},this.render=function(a){this.clear(),h(r===!1||a===!0?m:n),r=!0},this.download=function(b){a.typeCheck("string",b)&&(b=b.split(".")[0]);var c=document.createElement("a");c.download=b?b+".svg":"svg.svg",c.href=this.toDataURI(),document.body.appendChild(c),c.click(),c.parentNode.removeChild(c)},this.downloadImage=function(b,c){c=c||"image/png";var d=new Image,e=this.size(),f=this.toDataURI().replace('width="100%"','width="'+e.width+'"').replace('height="100%"','height="'+e.height+'"');d.onload=function(){var e=document.createElement("canvas");e.width=d.width,e.height=d.height;var f=e.getContext("2d");f.drawImage(d,0,0);var g=e.toDataURL(c);a.typeCheck("string",b)&&(b=b.split(".")[0]);var h=document.createElement("a");h.download=b?b+".png":"svg.png",h.href=g,document.body.appendChild(h),h.click(),h.parentNode.removeChild(h)},d.src=f},this.exportCanvas=function(a){var b=new Image,c=this.size(),d=this.toDataURI().replace('width="100%"','width="'+c.width+'"').replace('height="100%"','height="'+c.height+'"');b.onload=function(){a.width=b.width,a.height=b.height;var c=a.getContext("2d");c.drawImage(b,0,0)},b.src=d},this.toXML=function(){var a=b.innerHTML;return a=a.replace('xmlns="http://www.w3.org/2000/svg"',""),['<?xml version="1.0" encoding="utf-8"?>',a.replace("<svg ",'<svg xmlns="http://www.w3.org/2000/svg" ')].join("\n")},this.toDataURI=function(){var b=this.toXML();return(a.browser.mozilla||a.browser.msie)&&(b=encodeURIComponent(b)),a.browser.msie?"data:image/svg+xml,"+b:"data:image/svg+xml;utf8,"+b},this.autoRender=function(a,b){q>0||(b?n.append(a):o.append(a))},this.getTextSize=function(a,b){if(""==a)return{width:0,height:0};b=b||{};var c=document.body||m.element,d=document.createElementNS("http://www.w3.org/2000/svg","svg");d.setAttributeNS(null,"width",500),d.setAttributeNS(null,"height",100),d.setAttributeNS(null,"x",-2e4),d.setAttributeNS(null,"y",-2e4);var e=document.createElementNS("http://www.w3.org/2000/svg","text");e.setAttributeNS(null,"x",-200),e.setAttributeNS(null,"y",-200),e.appendChild(document.createTextNode(a)),b.fontSize&&e.setAttributeNS(null,"font-size",b.fontSize),b.fontFamily&&e.setAttributeNS(null,"font-family",b.fontFamily),b.bold&&e.setAttributeNS(null,"font-weight",b.bold),b.style&&e.setAttributeNS(null,"font-style",b.style),d.appendChild(e),c.appendChild(d);var f=e.getBoundingClientRect();return c.removeChild(d),{width:f.width,height:f.height}},g()};return j.createObject=function(a){var b=new d;if(b.create(a.type,a.attr),a.children instanceof Array)for(var c=0,e=a.children.length;c<e;c++)b.append(j.createObject(a.children[c]));return b},j},"util.svg.base3d",!0),jui.define("util.scale.linear",["util.math"],function(a){var b=function(){function c(a){if(l<a)return g?c(l):e[0]+Math.abs(a-d[0])*q;if(k>a)return g?c(k):e[0]-Math.abs(a-d[0])*q;var b=(a-d[0])/o;return r(b)}var d=[0,1],e=[0,1],f=!1,g=!1,h={},i=null,j=null,k=null,l=null,m=null,n=null,o=null,p=null,q=0,r=null,s=null;return c.cache=function(){return h},c.min=function(){return Math.min.apply(Math,d)},c.max=function(){return Math.max.apply(Math,d)},c.rangeMin=function(){return Math.min.apply(Math,e)},c.rangeMax=function(){return Math.max.apply(Math,e)},c.rate=function(a,b){return c(c.max()*(a/b))},c.clamp=function(a){g=a||!1},c.domain=function(a){if(!arguments.length)return d;for(var b=0;b<a.length;b++)d[b]=a[b];return k=c.min(),l=c.max(),o=d[1]-d[0],this},c.range=function(b){if(!arguments.length)return e;for(var d=0;d<b.length;d++)e[d]=b[d];return i=a.interpolateRound(e[0],e[1]),j=a.interpolateNumber(e[0],e[1]),m=c.rangeMin(),n=c.rangeMax(),p=Math.abs(n-m),q=p/o,r=f?i:j,this},c.rangeRound=function(a){return f=!0,c.range(a)},c.rangeBand=function(){return s},c.invert=function(a){var c=b().domain(e).range(d);return c(a)},c.ticks=function(b,e,f,g){g=g||!1;var h=c.max();if(0==d[0]&&0==d[1])return[];for(var i=a.nice(d[0],d[1],b||10,e||!1),j=[],k=g?i.max:i.min,l=g?i.min:i.max,m=i.spacing,n=a.fixed(m);g?l<=k:k<=l;)j.push(k),k=g?n.minus(k,m):n.plus(k,m);if(g){j[0]!=h&&j.unshift(h);for(var o=0,p=j.length;o<p;o++)j[o]=Math.abs(j[o]-h)}else j[j.length-1]!=l&&k>l&&j.push(l),d[0]>d[1]&&j.reverse();var q=c(j[0]),r=c(j[1]);return s=Math.abs(r-q),j},c};return b}),jui.define("util.scale.circle",[],function(){var a=function(){function a(a){}var b=[],c=[],d=0;return a.domain=function(a){if("undefined"==typeof a)return b;for(var c=0;c<a.length;c++)b[c]=a[c];return this},a.range=function(a){if("undefined"==typeof a)return c;for(var b=0;b<a.length;b++)c[b]=a[b];return this},a.rangePoints=function(e,f){f=f||0;for(var g=b.length,h=(e[1]-e[0]-f)/g,i=[],j=0;j<b.length;j++)0==j?i[j]=e[0]+f/2+h/2:i[j]=i[j-1]+h;return c=i,d=h,a},a.rangeBands=function(e,f,g){f=f||0,g=g||0;for(var h=b.length,i=h-1,j=(e[1]-e[0])/i,k=[],l=0;l<b.length;l++)0==l?k[l]=e[0]:k[l]=j+k[l-1];return d=j,c=k,a},a.rangeBand=function(){return d},a};return a}),jui.define("util.scale.log",["util.base","util.scale.linear"],function(a,b){var c=function(c){function d(a){return a<0?-(Math.log(Math.abs(a))/Math.log(h)):a>0?Math.log(a)/Math.log(h):0}function e(a){return a<0?-Math.pow(h,Math.abs(a)):a>0?Math.pow(h,a):0}function f(a){return Math.pow(h,(a+"").length-1)<a}function g(a){return Math.pow(h,(a+"").length)}var h=c||10,i=b(),j=[],k=null,l=null,m=function(a){var b=a;return a>k?b=k:a<l&&(b=l),i(d(b))};return a.extend(m,i),m.log=function(){
for(var a=[],b=0;b<j.length;b++)a[b]=d(j[b]);return a},m.domain=function(a){if(!arguments.length)return j;for(var b=0;b<a.length;b++)j[b]=a[b];if(k=Math.max.apply(Math,j),l=Math.min.apply(Math,j),f(k)&&(j[1]=k=g(k)),f(Math.abs(l))){var c=g(Math.abs(l));j[0]=l=l<0?-c:c}return i.domain(m.log()),m},m.base=function(a){return i.domain(m.log()),m},m.invert=function(a){return e(i.invert(a))},m.ticks=function(a,b,c){var d=i.ticks(a,b,c||1e20,!0);d[d.length-1]<i.max()&&d.push(i.max());for(var f=[],g=0,h=d.length;g<h;g++)f[g]=e(d[g]);return f},m};return c}),jui.define("util.scale.ordinal",[],function(){var a=function(){function a(a){var d=""+a;if("undefined"!=typeof e[d])return e[d];for(var f=-1,g=0;g<b.length;g++)if("string"==typeof a&&b[g]===a){f=g;break}return f>-1?(e[d]=c[f],c[f]):"undefined"!=typeof c[a]?(e[d]=c[a],c[a]):null}var b=[],c=[],d=0,e={},f=!1;return a.domain=function(a){if("undefined"==typeof a)return b;for(var c=0;c<a.length;c++)b[c]=a[c];return this},a.range=function(a){if("undefined"==typeof a)return c;for(var b=0;b<a.length;b++)c[b]=a[b];return this},a.rangePoints=function(e,g){g=g||0;for(var h=b.length,i=(e[1]-e[0]-g)/h,j=[],k=0;k<b.length;k++)0==k?j[k]=e[0]+g/2+i/2:j[k]=j[k-1]+i;return c=j,d=i,f=!0,a},a.rangeBands=function(e,g,h){g=g||0,h=h||0;for(var i=b.length,j=i-1,k=(e[1]-e[0])/j,l=[],m=0;m<b.length;m++)0==m?l[m]=e[0]:l[m]=k+l[m-1];return d=k,c=l,f=!1,a},a.rangeBand=function(){return d},a.invert=function(a){var b=Math.min(c[0],c[1]);if(f){b-=d/2;var e=a;e<b&&(e=b);var g=Math.abs(e-b)/d;return Math.floor(g)}var g=Math.abs(a-b)/d;return Math.ceil(g)},a};return a}),jui.define("util.scale.time",["util.math","util.time","util.scale.linear"],function(a,b,c){var d=function(){var a,d=[],e=c(),f=e.domain;return e.domain=function(a){if(!arguments.length)return f.call(e);for(var b=0;b<a.length;b++)d[b]=+a[b];return f.call(e,d)},e.min=function(){return Math.min(d[0],d[d.length-1])},e.max=function(){return Math.max(d[0],d[d.length-1])},e.rate=function(a,b){return e(e.max()*(a/b))},e.ticks=function(c,f){for(var g=d[0],h=d[1],i=[];g<h;)i.push(new Date((+g))),g=b.add(g,c,f);i.push(new Date((+g)));var j=e(i[1]),k=e(i[2]);return a=k-j,i},e.realTicks=function(c,f){var g=d[0],h=d[1],i=[],j=new Date((+g)),k=null;for(c==b.years?k=new Date(j.getFullYear(),0,1):c==b.months?k=new Date(j.getFullYear(),j.getMonth(),1):c==b.days||c==b.weeks?k=new Date(j.getFullYear(),j.getMonth(),j.getDate()):c==b.hours?k=new Date(j.getFullYear(),j.getMonth(),j.getDate(),j.getHours(),0,0,0):c==b.minutes?k=new Date(j.getFullYear(),j.getMonth(),j.getDate(),j.getHours(),j.getMinutes(),0,0):c==b.seconds?k=new Date(j.getFullYear(),j.getMonth(),j.getDate(),j.getHours(),j.getMinutes(),j.getSeconds(),0):c==b.milliseconds&&(k=new Date(j.getFullYear(),j.getMonth(),j.getDate(),j.getHours(),j.getMinutes(),j.getSeconds(),j.getMilliseconds())),k=b.add(k,c,f);+k<+h;)i.push(new Date((+k))),k=b.add(k,c,f);var l=e(i[1]),m=e(i[2]);return a=m-l,i},e.rangeBand=function(){return a},e.invert=function(a){var b=c().domain(e.range()).range(e.domain());return new Date(b(a))},e};return d}),jui.redefine("util.scale",["util.math","util.time"],function(a,b){var c={circle:function(){function a(a){}var b=[],c=[],d=0;return a.domain=function(a){if("undefined"==typeof a)return b;for(var c=0;c<a.length;c++)b[c]=a[c];return this},a.range=function(a){if("undefined"==typeof a)return c;for(var b=0;b<a.length;b++)c[b]=a[b];return this},a.rangePoints=function(e,f){f=f||0;for(var g=b.length,h=(e[1]-e[0]-f)/g,i=[],j=0;j<b.length;j++)0==j?i[j]=e[0]+f/2+h/2:i[j]=i[j-1]+h;return c=i,d=h,a},a.rangeBands=function(e,f,g){f=f||0,g=g||0;for(var h=b.length,i=h-1,j=(e[1]-e[0])/i,k=[],l=0;l<b.length;l++)0==l?k[l]=e[0]:k[l]=j+k[l-1];return d=j,c=k,a},a.rangeBand=function(){return d},a},ordinal:function(){function a(a){var d=""+a;if("undefined"!=typeof e[d])return e[d];for(var f=-1,g=0;g<b.length;g++)if("string"==typeof a&&b[g]===a){f=g;break}return f>-1?(e[d]=c[f],c[f]):"undefined"!=typeof c[a]?(b[a]=a,e[d]=c[a],c[a]):null}var b=[],c=[],d=0,e={};return a.domain=function(a){if("undefined"==typeof a)return b;for(var c=0;c<a.length;c++)b[c]=a[c];return this},a.range=function(a){if("undefined"==typeof a)return c;for(var b=0;b<a.length;b++)c[b]=a[b];return this},a.rangePoints=function(e,f){f=f||0;for(var g=b.length,h=(e[1]-e[0]-f)/g,i=[],j=0;j<b.length;j++)0==j?i[j]=e[0]+f/2+h/2:i[j]=i[j-1]+h;return c=i,d=h,a},a.rangeBands=function(e,f,g){f=f||0,g=g||0;for(var h=b.length,i=h-1,j=(e[1]-e[0])/i,k=[],l=0;l<b.length;l++)0==l?k[l]=e[0]:k[l]=j+k[l-1];return d=j,c=k,a},a.rangeBand=function(){return d},a.invert=function(a){return Math.ceil(a/d)},a},time:function(){var a,d=[],e=c.linear(),f=e.domain;return e.domain=function(a){if(!arguments.length)return f.call(e);for(var b=0;b<a.length;b++)d[b]=+a[b];return f.call(e,d)},e.min=function(){return Math.min(d[0],d[d.length-1])},e.max=function(){return Math.max(d[0],d[d.length-1])},e.rate=function(a,b){return e(e.max()*(a/b))},e.ticks=function(c,f){for(var g=d[0],h=d[1],i=[];g<h;)i.push(new Date((+g))),g=b.add(g,c,f);i.push(new Date((+g)));var j=e(i[1]),k=e(i[2]);return a=k-j,i},e.realTicks=function(c,f){var g=d[0],h=d[1],i=[],j=new Date((+g)),k=null;for(c==b.years?k=new Date(j.getFullYear(),0,1):c==b.months?k=new Date(j.getFullYear(),j.getMonth(),1):c==b.days||c==b.weeks?k=new Date(j.getFullYear(),j.getMonth(),j.getDate()):c==b.hours?k=new Date(j.getFullYear(),j.getMonth(),j.getDate(),j.getHours(),0,0,0):c==b.minutes?k=new Date(j.getFullYear(),j.getMonth(),j.getDate(),j.getHours(),j.getMinutes(),0,0):c==b.seconds?k=new Date(j.getFullYear(),j.getMonth(),j.getDate(),j.getHours(),j.getMinutes(),j.getSeconds(),0):c==b.milliseconds&&(k=new Date(j.getFullYear(),j.getMonth(),j.getDate(),j.getHours(),j.getMinutes(),j.getSeconds(),j.getMilliseconds())),k=b.add(k,c,f);+k<+h;)i.push(new Date((+k))),k=b.add(k,c,f);var l=e(i[1]),m=e(i[2]);return a=m-l,i},e.rangeBand=function(){return a},e.invert=function(a){var b=c.linear().domain(e.range()).range(e.domain());return new Date(b(a))},e},log:function(a){function b(a){return a<0?-(Math.log(Math.abs(a))/Math.log(g)):a>0?Math.log(a)/Math.log(g):0}function d(a){return a<0?-Math.pow(g,Math.abs(a)):a>0?Math.pow(g,a):0}function e(a){return Math.pow(g,(a+"").length-1)<a}function f(a){return Math.pow(g,(a+"").length)}var g=a||10,h=c.linear(),i=[],j=null,k=null,l=function(a){var c=a;return a>j?c=j:a<k&&(c=k),h(b(c))};return $.extend(l,h),l.log=function(){for(var a=[],c=0;c<i.length;c++)a[c]=b(i[c]);return a},l.domain=function(a){if(!arguments.length)return i;for(var b=0;b<a.length;b++)i[b]=a[b];if(j=Math.max.apply(Math,i),k=Math.min.apply(Math,i),e(j)&&(i[1]=j=f(j)),e(Math.abs(k))){var c=f(Math.abs(k));i[0]=k=k<0?-c:c}return h.domain(l.log()),l},l.base=function(a){return h.domain(l.log()),l},l.invert=function(a){return d(h.invert(a))},l.ticks=function(a,b,c){var e=h.ticks(a,b,c||1e20,!0);e[e.length-1]<h.max()&&e.push(h.max());for(var f=[],g=0,i=e.length;g<i;g++)f[g]=d(e[g]);return f},l},linear:function(){function b(a){if(l<a)return g?b(l):e[0]+Math.abs(a-d[0])*q;if(k>a)return g?b(k):e[0]-Math.abs(a-d[0])*q;var c=(a-d[0])/o;return r(c)}var d=[0,1],e=[0,1],f=!1,g=!1,h={},i=null,j=null,k=null,l=null,m=null,n=null,o=null,p=null,q=0,r=null,s=null;return b.cache=function(){return h},b.min=function(){return Math.min.apply(Math,d)},b.max=function(){return Math.max.apply(Math,d)},b.rangeMin=function(){return Math.min.apply(Math,e)},b.rangeMax=function(){return Math.max.apply(Math,e)},b.rate=function(a,c){return b(b.max()*(a/c))},b.clamp=function(a){g=a||!1},b.domain=function(a){if(!arguments.length)return d;for(var c=0;c<a.length;c++)d[c]=a[c];return k=b.min(),l=b.max(),o=d[1]-d[0],this},b.range=function(c){if(!arguments.length)return e;for(var d=0;d<c.length;d++)e[d]=c[d];return i=a.interpolateRound(e[0],e[1]),j=a.interpolateNumber(e[0],e[1]),m=b.rangeMin(),n=b.rangeMax(),p=Math.abs(n-m),q=p/o,r=f?i:j,this},b.rangeRound=function(a){return f=!0,b.range(a)},b.rangeBand=function(){return s},b.invert=function(a){var b=c.linear().domain(e).range(d);return b(a)},b.ticks=function(c,e,f,g){g=g||!1;var h=b.max();if(0==d[0]&&0==d[1])return[];for(var i=a.nice(d[0],d[1],c||10,e||!1),j=[],k=g?i.max:i.min,l=g?i.min:i.max,m=i.spacing,n=a.fixed(m);g?l<=k:k<=l;)j.push(k),k=g?n.minus(k,m):n.plus(k,m);if(g){j[0]!=h&&j.unshift(h);for(var o=0,p=j.length;o<p;o++)j[o]=Math.abs(j[o]-h)}else j[j.length-1]!=l&&k>l&&j.push(l),d[0]>d[1]&&j.reverse();var q=b(j[0]),r=b(j[1]);return s=Math.abs(r-q),j},b}};return c},null,!0),jui.define("chart.vector",[],function(){var a=function(b,c,d){this.x=b||0,this.y=c||0,this.z=d||0,this.add=function(b){return b instanceof a?new a(this.x+b.x,this.y+b.y,this.z+b.z):new a(this.x+b,this.y+b,this.z+b)},this.subtract=function(b){return b instanceof a?new a(this.x-b.x,this.y-b.y,this.z-b.z):new a(this.x-b,this.y-b,this.z-b)},this.multiply=function(b){return b instanceof a?new a(this.x*b.x,this.y*b.y,this.z*b.z):new a(this.x*b,this.y*b,this.z*b)},this.dotProduct=function(a){var b=this.x*a.x+this.y*a.y+this.z*a.z;return Math.acos(b/(this.getMagnitude()*a.getMagnitude()))},this.crossProduct=function(b){return new a(this.y*b.z-this.z*b.y,this.z*b.x-this.x*b.z,this.x*b.y-this.y*b.x)},this.normalize=function(){var a=this.getMagnitude();this.x/=a,this.y/=a,this.z/=a},this.getMagnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}};return a}),jui.define("chart.draw",["util.base"],function(a){var b=function(){this.render=function(){if(!a.typeCheck("function",this.draw))throw new Error("JUI_CRITICAL_ERR: 'draw' method must be implemented");a.typeCheck("function",this.drawBefore)&&this.drawBefore();var b=this.draw();if(a.typeCheck("function",this.drawAnimate)){var c=this.grid||this.brush||this.widget||this.map;c.animate!==!1&&this.drawAnimate(b)}return a.typeCheck("function",this.drawAfter)&&this.drawAfter(b),b},this.format=function(){var a=this.grid||this.brush||this.widget,b=a.format||this.chart.format;return b.apply(this.chart,arguments)},this.balloonPoints=function(a,b,c,d){var e=[];return"top"==a?(e.push([0,0].join(",")),e.push([b,0].join(",")),e.push([b,c].join(",")),e.push([b/2+d/2,c].join(",")),e.push([b/2,c+d].join(",")),e.push([b/2-d/2,c].join(",")),e.push([0,c].join(",")),e.push([0,0].join(","))):"bottom"==a?(e.push([0,d].join(",")),e.push([b/2-d/2,d].join(",")),e.push([b/2,0].join(",")),e.push([b/2+d/2,d].join(",")),e.push([b,d].join(",")),e.push([b,d+c].join(",")),e.push([0,d+c].join(",")),e.push([0,d].join(","))):"left"==a?(e.push([0,0].join(",")),e.push([b,0].join(",")),e.push([b,c/2-d/2].join(",")),e.push([b+d,c/2].join(",")),e.push([b,c/2+d/2].join(",")),e.push([b,c].join(",")),e.push([0,c].join(",")),e.push([0,0].join(","))):"right"==a?(e.push([0,0].join(",")),e.push([b,0].join(",")),e.push([b,c].join(",")),e.push([0,c].join(",")),e.push([0,c/2+d/2].join(",")),e.push([0-d,c/2].join(",")),e.push([0,c/2-d/2].join(",")),e.push([0,0].join(","))):(e.push([0,0].join(",")),e.push([b,0].join(",")),e.push([b,c].join(",")),e.push([0,c].join(",")),e.push([0,0].join(","))),e.join(" ")},this.on=function(b,c){var d=this;return this.chart.on(b,function(){if(a.startsWith(b,"axis.")&&a.typeCheck("integer",d.axis.index)){var e=d.chart.axis(d.axis.index),f=arguments[0];a.typeCheck("object",e)&&arguments[1]==d.axis.index&&c.apply(d,[f])}else c.apply(d,arguments)},"render")},this.calculate3d=function(){var b=this.axis.area("width"),c=this.axis.area("height"),d=this.axis.area("x"),e=this.axis.area("y"),f=this.axis.depth,g=this.axis.degree,h=this.axis.perspective,i=arguments;a.typeCheck("integer",g.x)||(g.x=0),a.typeCheck("integer",g.y)||(g.y=0),a.typeCheck("integer",g.z)||(g.z=0);for(var j=0;j<i.length;j++)i[j].perspective=h,i[j].rotate(Math.max(b,c,f),g,d+b/2,e+c/2,f/2)}};return b.setup=function(){return{type:null,animate:!1}},b}),jui.define("chart.axis",["util.base"],function(a){var b=function(b,c,d){function e(a,c){return a.x=f(a.x,b.area("width")),a.y=f(a.y,b.area("height")),a.width=f(a.width,b.area("width")),a.height=f(a.height,b.area("height")),a.x2=a.x+a.width,a.y2=a.y+a.height,a.x+=c.left||0,a.y+=c.top||0,a.x2-=c.right||0,a.y2-=c.bottom||0,a.width=a.x2-a.x,a.height=a.y2-a.y,a}function f(b,c){return a.typeCheck("string",b)&&b.indexOf("%")>-1?c*(parseFloat(b.replace("%",""))/100):b}function g(c,d){if(("x"==d||"y"==d||"z"==d)&&!a.typeCheck("object",c[d]))return null;c[d]=c[d]||{},"x"==d?c[d].orient="top"==c[d].orient?"top":"bottom":"y"==d?c[d].orient="right"==c[d].orient?"right":"left":"z"==d?c[d].orient="center":"c"==d&&(c[d].type=c[d].type||"panel",c[d].orient="custom"),c[d].type=c[d].type||"block";var e=jui.include("chart.grid."+c[d].type);jui.defineOptions(e,c[d]);var f=new e(b,c,c[d]);f.chart=b,f.axis=c,f.grid=c[d],f.svg=b.svg;var g=f.render();return p.isFull3D()||("left"==c[d].orient?g.root.translate(b.area("x")+p.area("x")-c[d].dist,b.area("y")):"right"==c[d].orient?g.root.translate(b.area("x")+p.area("x2")+c[d].dist,b.area("y")):"bottom"==c[d].orient?g.root.translate(b.area("x"),b.area("y")+p.area("y2")+c[d].dist):"top"==c[d].orient?g.root.translate(b.area("x"),b.area("y")+p.area("y")-c[d].dist):g.root&&g.root.translate(b.area("x")+p.area("x"),b.area("y")+p.area("y"))),g.scale.type=c[d].type,g.scale.root=g.root,g.scale}function h(c,d){if("map"==d&&!a.typeCheck("object",c[d]))return null;c[d]=c[d]||{};var e=jui.include("chart.map");jui.defineOptions(e,c[d]),null==q&&(q=new e(b,c,c[d])),q.chart=b,q.axis=c,q.map=c[d],q.svg=b.svg;var f=q.render();return f.root.translate(b.area("x")+p.area("x"),b.area("y")+p.area("y")),f.scale.type=c[d].type,f.scale.root=f.root,f.scale}function i(a){var b=p.origin,c=p.buffer,d=Math.ceil(b.length/c);a<1?p.page=1:p.page=a>d?d:a,p.start=(p.page-1)*c,p.end=p.start+c,p.end>b.length&&(p.start=b.length-c,p.end=b.length),p.end<=b.length&&(p.start=p.start<0?0:p.start,p.data=b.slice(p.start,p.end),b.length>0&&p.page++)}function j(a,b){var c=p.origin;p.end=b>c.length?c.length:b,p.start=a<0?0:a,p.data=c.slice(p.start,p.end)}function k(){u&&(u.remove(),u=null),t=a.createId("clip-id-"),u=b.svg.clipPath({id:t},function(){b.svg.rect({x:r.x,y:r.y,width:r.width,height:r.height})}),b.appendDefs(u),w&&(w.remove(),w=null),v=a.createId("clip-rect-id-"),w=b.svg.clipPath({id:v},function(){b.svg.rect({x:0,y:0,width:r.width,height:r.height})}),b.appendDefs(w)}function l(a){var b=p.area("y"),c=p.area("x");return a.chartY>b&&a.chartY<b+p.area("height")&&a.chartX>c&&a.chartX<c+p.area("width")&&(a.axisX=a.chartX-c,a.axisY=a.chartY-b,!0)}function m(){var a=!1,c=d.index;b.on("chart.mousemove",function(d){l(d)?a||(b.emit("axis.mouseover",[d,c]),a=!0):a&&(b.emit("axis.mouseout",[d,c]),a=!1),l(d)&&b.emit("axis.mousemove",[d,c])}),b.on("bg.mousemove",function(d){!l(d)&&a&&(b.emit("axis.mouseout",[d,c]),a=!1)}),b.on("chart.mousedown",function(a){l(a)&&b.emit("axis.mousedown",[a,c])}),b.on("chart.mouseup",function(a){l(a)&&b.emit("axis.mouseup",[a,c])}),b.on("chart.click",function(a){l(a)&&b.emit("axis.click",[a,c])}),b.on("chart.dbclick",function(a){l(a)&&b.emit("axis.dbclick",[a,c])}),b.on("chart.rclick",function(a){l(a)&&b.emit("axis.rclick",[a,c])}),b.on("chart.mousewheel",function(a){l(a)&&b.emit("axis.mousewheel",[a,c])})}function n(){var a=b.theme("axisBorderWidth"),c=s.left+s.right,d=s.top+s.bottom,e=b.svg.rect({rx:b.theme("axisBorderRadius"),ry:b.theme("axisBorderRadius"),fill:b.theme("axisBackgroundColor"),"fill-opacity":b.theme("axisBackgroundOpacity"),stroke:b.theme("axisBorderColor"),"stroke-width":a,width:r.width+c-a,height:r.height+d-a,x:r.x-s.left,y:r.y-s.top});return e.translate(b.area("x"),b.area("y")),e}function o(){a.extend(p,{data:d.data,origin:d.origin,buffer:d.buffer,shift:d.shift,index:d.index,page:d.page,start:d.start,end:d.end,degree:d.degree,depth:d.depth,perspective:d.perspective}),p.origin=p.data,p.start>0||p.end>0?j(p.start,p.end):i(p.page),m(),p.reload(d)}var p=this,q=null,r={},s={},t="",u=null,v="",w=null;this.getValue=function(b,c,e){var f=b[d.keymap[c]];return a.typeCheck("undefined",f)?(f=b[c],a.typeCheck("undefined",f)?e:f):f},this.reload=function(c){var d=b.area();a.extend(this,{x:c.x,y:c.y,z:c.z,c:c.c,map:c.map}),s=a.typeCheck("integer",c.padding)?{left:c.padding,right:c.padding,bottom:c.padding,top:c.padding}:c.padding,r=e(a.extend(c.area,{x:0,y:0,width:d.width,height:d.height},!0),s),k(),this.root=n(),this.x=g(this,"x"),this.y=g(this,"y"),this.z=g(this,"z"),this.c=g(this,"c"),this.map=h(this,"map"),this.buffer=c.buffer,this.shift=c.shift,this.index=c.index,this.page=c.page,this.start=c.start,this.end=c.end,this.degree=c.degree,this.depth=c.depth,this.perspective=c.perspective},this.area=function(b){return a.typeCheck("undefined",r[b])?r:r[b]},this.padding=function(b){return a.typeCheck("undefined",s[b])?s:s[b]},this.get=function(a){var b={area:r,padding:s,clipId:t,clipRectId:v};return b[a]||d[a]},this.set=function(e,f,g){a.typeCheck("object",f)?g===!0?(c[e]=a.deepClone(f),d[e]=a.deepClone(f)):(a.extend(c[e],f),a.extend(d[e],f)):(c[e]=f,d[e]=f),b.isRender()&&b.render()},this.updateGrid=this.set,this.update=function(b){this.origin=a.typeCheck("array",b)?b:[b],this.page=1,this.start=0,this.end=0,this.screen(1)},this.screen=function(a){i(a),this.end<=this.origin.length&&b.isRender()&&b.render()},this.next=function(){var a=this.origin,c=this.buffer,d=this.shift;this.start+=d;var e=this.start+c>a.length;this.end=e?a.length:this.start+c,this.start=e?a.length-c:this.start,this.start=this.start<0?0:this.start,this.data=a.slice(this.start,this.end),b.isRender()&&b.render()},this.prev=function(){var a=this.origin,c=this.buffer,d=this.shift;this.start-=d;var e=this.start<0;this.end=e?c:this.start+c,this.start=e?0:this.start,this.data=a.slice(this.start,this.end),b.isRender()&&b.render()},this.zoom=function(a,c){a!=c&&(j(a,c),b.isRender()&&b.render())},this.isFull3D=function(){return!a.typeCheck(["undefined","null"],this.z)},o()};return b.setup=function(){return{extend:null,x:null,y:null,z:null,c:null,map:null,data:[],origin:[],keymap:{},area:{},padding:{top:0,bottom:0,left:0,right:0},buffer:1e4,shift:1,page:1,start:0,end:0,degree:{x:0,y:0,z:0},depth:0,perspective:.9}},b}),jui.define("chart.map",["util.base","util.dom","util.math","util.svg"],function(a,b,c,d){var e=function(){function c(b){function c(b){for(var c={},d=b.split(";"),e=0;e<d.length;e++)if(d[e].indexOf(":")!=-1){var f=d[e].split(":");c[a.trim(f[0])]=a.trim(f[1])}return c}for(var e=[],f=0,g=b.length;f<g;f++)if(a.typeCheck("object",b[f])){var h={};a.typeCheck("string",b[f].style)&&(h=c(b[f].style),delete b[f].style);var i=d.createObject({type:null!=b[f].d?"path":"polygon",attr:b[f]});i.attr(a.extend(h,{fill:m.chart.theme("mapPathBackgroundColor"),"fill-opacity":m.chart.theme("mapPathBackgroundOpacity"),stroke:m.chart.theme("mapPathBorderColor"),"stroke-width":m.chart.theme("mapPathBorderWidth"),"stroke-opacity":m.chart.theme("mapPathBorderOpacity")})),e.push({path:i,data:b[f]})}return e}function e(b){if(a.typeCheck("string",b.id)){for(var c=[],d=b.childNodes,f=0,j=d.length;f<j;f++){var k=d[f],l=k.nodeName.toLowerCase();if(1==k.nodeType)if("g"==l)c=c.concat(e(k));else if("path"==l||"polygon"==l){var m={group:b.id};for(var n in k.attributes){var o=k.attributes[n];o.specified&&g(o.name)&&(m[o.name]=h(o))}a.typeCheck("string",m.id)&&a.extend(m,i(m.id)),c.push(m)}}return c}}function f(b){return a.typeCheck("array",n[b])?c(n[b]):(n[b]=[],a.ajax({url:b,async:!1,success:function(c){var d=c.responseXML,f=d.getElementsByTagName("svg"),j=d.getElementsByTagName("style");if(1==f.length){for(var k=f[0].childNodes,l=0,o=k.length;l<o;l++){var p=k[l],q=p.nodeName.toLowerCase();if(1==p.nodeType)if("g"==q)n[b]=n[b].concat(e(p));else if("path"==q||"polygon"==q){var r={};for(var s in p.attributes){var t=p.attributes[s];t.specified&&g(t.name)&&(r[t.name]=h(t))}a.typeCheck("string",r.id)&&a.extend(r,i(r.id)),n[b].push(r)}}for(var l=0;l<j.length;l++)m.svg.root.element.appendChild(j[l])}},fail:function(a){throw new Error("JUI_CRITICAL_ERR: Failed to load resource")}}),c(n[b]))}function g(a){return"group"==a||"id"==a||"title"==a||"x"==a||"y"==a||"d"==a||"points"==a||"class"==a||"style"==a}function h(a){return"x"==a.name||"y"==a.name?parseFloat(a.value):a.value}function i(a){for(var b=m.axis.data,c=0;c<b.length;c++){var d=m.axis.getValue(b[c],"id",null);if(d==a)return b[c]}return null}function j(){for(var b=m.chart.svg.group(),c=f(m.map.path),d=0,e=c.length;d<e;d++){var g=c[d].path,h=c[d].data;b.append(g),a.typeCheck("string",h.id)&&(p[h.id]=c[d])}return b}function k(){var a=m.map.width,b=m.map.height,c=(a*q-a)/2,d=(b*q-b)/2;return{x:c+r,y:d+s}}function l(a,c){function d(a){var c=b.offset(e.root),d=a.pageX-c.left,f=a.pageY-c.top;a.bgX=d,a.bgY=f,a.chartX=d-e.padding("left"),a.chartY=f-e.padding("top")}var e=m.chart;a.on("click",function(a){d(a),e.emit("map.click",[c,a])}),a.on("dblclick",function(a){d(a),e.emit("map.dblclick",[c,a])}),a.on("contextmenu",function(a){d(a),e.emit("map.rclick",[c,a]),a.preventDefault()}),a.on("mouseover",function(a){d(a),e.emit("map.mouseover",[c,a])}),a.on("mouseout",function(a){d(a),e.emit("map.mouseout",[c,a])}),a.on("mousemove",function(a){d(a),e.emit("map.mousemove",[c,a])}),a.on("mousedown",function(a){d(a),e.emit("map.mousedown",[c,a])}),a.on("mouseup",function(a){d(a),e.emit("map.mouseup",[c,a])})}var m=this,n={},o=null,p={},q=1,r=0,s=0;this.scale=function(b){if(a.typeCheck("string",b)){var c=null,d=null,e=null,f=null,g=k();if(a.typeCheck("object",p[b])){if(e=p[b].path,f=p[b].data,null!=f.x){var h=m.axis.getValue(f,"dx",0),i=parseFloat(f.x)+h;c=i*q-g.x}if(null!=f.y){var j=m.axis.getValue(f,"dy",0),l=parseFloat(f.y)+j;d=l*q-g.y}}return{x:c,y:d,path:e,data:f}}},this.scale.each=function(a){var b=this;for(var c in p)a.apply(b,[c,p[c]])},this.scale.size=function(){return{width:m.map.width,height:m.map.height}},this.scale.scale=function(a){return!a||a<0?q:(q=a,o.scale(q),this.view(r,s),q)},this.scale.view=function(b,c){var d={x:r,y:s};if(!a.typeCheck("number",b)||!a.typeCheck("number",c))return d;r=b,s=c;var e=k();return o.translate(-e.x,-e.y),{x:r,y:s}},this.draw=function(){var a=this.chart.svg.group();return q=this.map.scale,r=this.map.viewX,s=this.map.viewY,o=j(),a.append(o),1!=this.map.scale&&this.scale.scale(q),0==this.map.viewX&&0==this.map.viewY||this.scale.view(r,s),this.map.hide&&a.attr({visibility:"hidden"}),{root:a,scale:this.scale}},this.drawAfter=function(a){a.root.attr({"clip-path":"url(#"+this.axis.get("clipRectId")+")"}),setTimeout(function(){m.scale.each(function(a,b){l(b.path,b)})},1)}};return e.setup=function(){return{scale:1,viewX:0,viewY:0,hide:!1,path:"",width:-1,height:-1}},e},"chart.draw"),jui.defineUI("chart.builder",["util.base","util.dom","util.svg","util.color","chart.axis"],function(a,b,c,d,e){a.resize(function(){for(var a=jui.get("chart.builder"),b=0;b<a.length;b++)for(var c=a[b],d=0;d<c.length;d++)c[d].resize()},1e3);var f=function(){function f(a){var b=a.svg.size(),c={width:b.width-(x.left+x.right),height:b.height-(x.top+x.bottom),x:x.left,y:x.top};c.width<0&&(c.width=0),c.height<0&&(c.height=0),c.x2=c.x+c.width,c.y2=c.y+c.height,y=c}function g(b){B=a.deepClone(G.brush),C=a.deepClone(G.widget),D=b.svg.defs(),E={}}function h(b){for(var c=a.deepClone(G.axis,{data:!0,origin:!0}),d=0;d<c.length;d++)jui.defineOptions(e,c[d]),c[d].index=d,A[d]?A[d].reload(c[d]):A[d]=new e(b,G.axis[d],c[d])}function i(b){var c=B;if(null!=c)for(var d=0;d<c.length;d++){var e=jui.include("chart.brush."+c[d].type);jui.defineOptions(e,c[d]);var f=A[c[d].axis];if(c[d].target)a.typeCheck("string",c[d].target)&&(c[d].target=[c[d].target]);else{var g=[];if(f)for(var h in f.data[0])g.push(h);c[d].target=g}c[d].index=d;var i=new e(b,f,c[d]);i.chart=b,i.axis=f,i.brush=c[d],i.svg=b.svg,i.canvas=I.main,i.render()}}function j(a,b){var c=C;if(null!=c)for(var d=0;d<c.length;d++){var e=jui.include("chart.widget."+c[d].type);jui.defineOptions(e,c[d]),c[d].index=d;var f=new e(a,A[0],c[d]);if(f.chart=a,f.axis=A[0],f.widget=c[d],f.svg=a.svg,f.canvas=I.sub,F&&!f.isRender()&&b!==!0)return;var g=f.render();f.isRender()||a.svg.autoRender(g,!1)}}function k(a,c){function d(c){var d=b.offset(a.root),e=c.pageX-d.left,f=c.pageY-d.top;if(c.bgX=e,c.bgY=f,c.chartX=e-a.padding("left"),c.chartY=f-a.padding("top"),!(c.chartX<0||c.chartX>a.area("width")||c.chartY<0||c.chartY>a.area("height")))return!0}var e=!1;c.on("click",function(b){d(b)?a.emit("chart.click",[b]):a.emit("bg.click",[b])}),c.on("dblclick",function(b){d(b)?a.emit("chart.dblclick",[b]):a.emit("bg.dblclick",[b])}),c.on("contextmenu",function(b){d(b)?a.emit("chart.rclick",[b]):a.emit("bg.rclick",[b]),b.preventDefault()}),c.on("mousemove",function(b){d(b)?e?a.emit("chart.mousemove",[b]):(a.emit("chart.mouseover",[b]),e=!0):(e&&(a.emit("chart.mouseout",[b]),e=!1),a.emit("bg.mousemove",[b]))}),c.on("mousedown",function(b){d(b)?a.emit("chart.mousedown",[b]):a.emit("bg.mousedown",[b])}),c.on("mouseup",function(b){d(b)?a.emit("chart.mouseup",[b]):a.emit("bg.mouseup",[b])}),c.on("mouseover",function(b){d(b)||a.emit("bg.mouseover",[b])}),c.on("mouseout",function(b){d(b)||a.emit("bg.mouseout",[b])}),c.on("mousewheel",function(b){d(b)?a.emit("chart.mousewheel",[b]):a.emit("bg.mousewheel",[b])})}function l(a,b){for(var c=0;c<H.render.length;c++)a.off(H.render[c]);if(H.render=[],b===!0){for(var c=0;c<H.renderAll.length;c++)a.off(H.renderAll[c]);H.renderAll=[]}}function m(b,d){if(!a.typeCheck("undefined",d)&&E[d])return"url(#"+E[d]+")";var e=null,f=a.createId("gradient");return b.attr.id=f,e=c.createObject(b),D.append(e),a.typeCheck("undefined",d)||(E[d]=f),"url(#"+f+")"}function n(b){if(a.typeCheck("string",b)){if(b=b.replace("url(#","").replace(")",""),E[b])return"url(#"+b+")";if(b.indexOf("pattern-")==-1)return!1;var d=b.split("-"),e=d.pop(),f=jui.include("chart."+d.join("."));if(!f)return!1;var g=f[e];return"function"==typeof g&&(g=g.call(g)),g.attr&&!g.attr.id&&(g.attr.id=b),g=c.createObject(g),D.append(g),E[b]=b,"url(#"+b+")"}if(b.attr.id=b.attr.id||a.createId("pattern-"),E[b.attr.id])return"url(#"+b.attr.id+")";var g=c.createObject(b);return D.append(g),E[b.attr.id]=b.attr.id,"url(#"+b.attr.id+")"}function o(b){if(a.typeCheck("undefined",b))return"none";if(a.typeCheck("object",b))return"pattern"==b.type?n(b):m(b);if("string"==typeof b){var c=n(b);if(c)return c}var e=d.parse(b);return e==b?b:m(e,b)}function p(b){var c={};a.typeCheck("string",b)?(a.extend(c,jui.include("chart.theme."+b)),a.extend(c,G.style)):a.typeCheck("object",b)&&(a.extend(z,G.style),a.extend(z,b),a.extend(c,z)),z=c}function q(b){G=a.deepClone(b.options,{data:!0,bind:!0});var c=G.padding;x=a.typeCheck("integer",c)?{left:c,right:c,bottom:c,top:c}:c,a.typeCheck("object",G.bind)&&b.bindUI(0,G.bind),a.typeCheck("array",G.axis)||(G.axis=[G.axis]),a.typeCheck("array",G.brush)||(G.brush=[G.brush]),a.typeCheck("array",G.widget)||(G.widget=[G.widget]);for(var d=0;d<G.axis.length;d++){var e=G.axis[d];a.extend(e,G.axis[e.extend],!0)}}function r(){var b=G.icon;if(a.typeCheck(["string","array"],b.path)){for(var c=a.typeCheck("string",b.path)?[b.path]:b.path,d=[],e=0;e<c.length;e++){var f=c[e],g="url("+f+") ";f.indexOf(".eot")!=-1?g+="format('embedded-opentype')":f.indexOf(".woff")!=-1?g+="format('woff')":f.indexOf(".ttf")!=-1?g+="format('truetype')":f.indexOf(".svg")!=-1&&(g+="format('svg')"),d.push(g)}var h="font-family: "+b.type+"; font-weight: normal; font-style: normal; src: "+d.join(",");!function(a){var b=function(){var a=document.createElement("style");return a.appendChild(document.createTextNode("")),document.head.appendChild(a),a.sheet}();b.insertRule(a,0)}("@font-face {"+h+"}")}}function s(a,b){var c=/{([^{}]+)}/g,d=b.match(c);if(null!=d)for(var e=0;e<d.length;e++){var f=d[e].substring(1,d[e].length-1);b=b.replace(d[e],a.icon(f))}return b}function t(b){var c=b.svg.size();return{width:a.typeCheck("integer",G.width)?G.width:c.width,height:a.typeCheck("integer",G.height)?G.height:c.height}}function u(a){a.style.position="relative",a.style.userSelect="none",a.style.webkitUserSelect="none",a.style.MozUserSelect="none",a.setAttribute("unselectable","on")}function v(a){var b=t(a);for(var c in I){var d=document.createElement("CANVAS");d.setAttribute("width",b.width),d.setAttribute("height",b.height),d.style.position="absolute",d.style.left="0px",d.style.top="0px",d.getContext&&(I[c]=d.getContext("2d"),a.root.appendChild(d)),"sub"==c&&(d.on=function(a,b){var c=function(a){"function"==typeof b&&b.call(this,a)};return d.addEventListener(a,c,!1),this})}}function w(a,b){var c=t(a),d=I[b];d.restore(),d.clearRect(0,0,c.width,c.height),d.save(),"main"==b&&d.translate(y.x,y.y)}var x,y,z,A=[],B=[],C=[],D=null,E={},F=!1,G=null,H={render:[],renderAll:[]},I={main:null,sub:null};this.init=function(){q(this),p(G.theme),u(this.root),this.svg=new c(this.root,{width:G.width,height:G.height,"buffered-rendering":"dynamic"}),G.canvas?(v(this),k(this,b.find(this.root,"CANVAS")[1])):k(this,this.svg.root),r(),this.render()},this.get=function(a,b){var c={axis:A,brush:B,widget:C,padding:x,area:y};return c[a][b]?c[a][b]:c[a]||c},this.axis=function(a){return 0==arguments.length?A:A[a]},this.area=function(b){return a.typeCheck("undefined",y[b])?y:y[b]},this.padding=function(b){return a.typeCheck("undefined",x[b])?x:x[b]},this.color=function(b,c){function d(a){var c=z.colors,d=a||b;return d>c.length-1?c[c.length-1]:c[d]}var e=null;return 1==arguments.length?a.typeCheck("string",b)?e=b:a.typeCheck("integer",b)&&(e=d(b)):a.typeCheck(["array","object"],c)?(e=c[b],a.typeCheck("integer",e)&&(e=d(e))):e=d(),E[e]?"url(#"+E[e]+")":o(e)},this.icon=function(a){return jui.include("chart.icon."+G.icon.type)[a]},this.text=function(b,c){return a.typeCheck("string",c)?c=s(this,c):a.typeCheck("undefined",c)&&(c=""),this.svg.text(b,c)},this.texts=function(b,c,d){for(var e=this.svg.group(),f=0;f<c.length;f++)if(a.typeCheck("string",c[f])){var g=(b["font-size"]||10)*(d||1);e.append(this.svg.text(a.extend({y:f*g},b,!0),s(this,c[f])))}return e},this.theme=function(a,b,c){if(0==arguments.length)return z;if(1==arguments.length)return a.indexOf("Color")>-1&&null!=z[a]?o(z[a]):z[a];if(3==arguments.length){var d=a?b:c;return d.indexOf("Color")>-1&&null!=z[d]?o(z[d]):z[d]}},this.format=function(){if(0!=arguments.length){var b=G.format;return a.typeCheck("function",b)?b.apply(this,arguments):arguments[0]}},this.bindUI=function(a,b){function c(){d.axis(a).update(b.listData())}var d=this;"grid.table"==b.module.type?(b.callAfter("update",c),b.callAfter("sort",c),b.callAfter("append",c),b.callAfter("insert",c),b.callAfter("remove",c)):"grid.xtable"==b.module.type&&(b.callAfter("update",c),b.callAfter("sort",c))},this.on=function(b,c,d){a.typeCheck("string",b)&&a.typeCheck("function",c)&&(this.event.push({type:b.toLowerCase(),callback:c}),"render"!=d&&"renderAll"!=d||H[d].push(c))},this.render=function(a){this.svg.reset(a),l(this,a),f(this),this.options.canvas&&(w(this,"main"),a&&w(this,"sub")),g(this),h(this),i(this),j(this,a),this.svg.root.css({"font-family":this.theme("fontFamily")+","+G.icon.type,background:this.theme("backgroundColor")}),this.svg.render(a),this.emit("render",[F]),F=!0},this.appendDefs=function(a){D.append(a)},this.addBrush=function(a){G.brush.push(a),this.isRender()&&this.render()},this.removeBrush=function(a){G.brush.splice(a,1),this.isRender()&&this.render()},this.updateBrush=function(b,c,d){d===!0?G.brush[b]=c:a.extend(G.brush[b],c),this.isRender()&&this.render()},this.addWidget=function(a){G.widget.push(a),this.isRender()&&this.render()},this.removeWidget=function(a){G.widget.splice(a,1),this.isRender()&&this.render()},this.updateWidget=function(b,c,d){d===!0?G.widget[b]=c:a.extend(G.widget[b],c),this.isRender()&&this.render()},this.setTheme=function(a){p(a),this.isRender()&&this.render(!0)},this.setSize=function(a,c){if(2==arguments.length&&(G.width=a,G.height=c),this.svg.size(G.width,G.height),G.canvas)for(var d=b.find(this.root,"CANVAS"),e=t(this),f=0;f<d.length;f++)d[f].setAttribute("width",e.width),d[f].setAttribute("height",e.height);this.isRender()&&this.render(!0);
},this.isFullSize=function(){return"100%"==G.width||"100%"==G.height,!0},this.resize=function(){this.isFullSize()&&this.setSize(),this.isRender()||this.render(!0)},this.isRender=function(){return!F||G.render}};return f.setup=function(){return{width:"100%",height:"100%",padding:{top:50,bottom:50,left:50,right:50},theme:"jennifer",style:{},brush:[],widget:[],axis:[],bind:null,format:null,render:!0,icon:{type:"jennifer",path:null},canvas:!1}},f},"core"),jui.defineUI("chart.plane",["chart.builder","util.base"],function(a,b){var c=function(){var c=null,d=[],e=[],f=[],g=0,h={},i={};this.init=function(){var a=this.options,c={type:"range",step:a.step,line:a.line};h.x=b.extend({domain:a.x},c),h.y=b.extend({domain:a.y},c),h.x.orient="bottom",h.y.orient="left",h.z=b.extend({domain:a.z},c),h.depth=a.depth-2*a.padding,h.degree={x:a.dx,y:a.dy,z:a.dz},h.perspective=a.perspective,i.extend=0,i.x={hide:!0},i.y={hide:!0},i.z={hide:!0},"2d"==a.dimension&&(h.perspective=1,h.degree.x=0,h.degree.y=0,h.degree.z=0,h.z.hideText=!0)},this.push=function(a){b.typeCheck("array",a)&&(d[g]||d.push(b.extend({},0==g?h:i)),d[g].data||(d[g].data=[]),d[g].data.push(a))},this.commit=function(a,b){var c=this.options;e.push({type:"canvas.dot3d",color:g,axis:g,symbol:a||c.symbol,size:2*(b||c.r)}),g++},this.append=function(a,c,f){var j=this.options;d.push(b.extend({},0==g?h:i)),d[g].data=a,e.push({type:"canvas.dot3d",color:g,axis:g,symbol:c||j.symbol,size:2*(f||j.r)}),g++},this.render=function(){var i=this.options;if("3d"==i.dimension&&f.push({type:"polygon.rotate3d"}),null!=c&&(c.root.innerHTML="",c=null),0==d.length&&d.push(h),c=a(this.root,{padding:i.padding,width:i.width,height:i.height,axis:d,brush:e,widget:f,canvas:!0,render:!1,style:{gridFaceBackgroundOpacity:.1}}),b.typeCheck("array",i.colors)){for(var j=[],k=0;k<i.colors.length;k++)j.push(c.color(i.colors[k]));c.setTheme({colors:j})}d=[],e=[],f=[],g=0,c.render()}};return c.setup=function(){return{dimension:"2d",width:500,height:500,depth:500,padding:50,x:[-100,100],y:[-100,100],z:[-100,100],step:4,line:!0,symbol:"dot",r:2,perspective:.9,dx:10,dy:5,dz:0,colors:null}},c},"core"),jui.define("chart.polygon.core",["chart.vector","util.transform","util.math","util.base"],function(a,b,c,d){var e=function(){this.perspective=.9,this.rotate=function(e,f,g,h,i){var j=this.perspective,k=new b(this.vertices),l=k.matrix("move3d",g,h,i);l=c.matrix3d(l,k.matrix("rotate3dx",f.x)),l=c.matrix3d(l,k.matrix("rotate3dy",f.y)),l=c.matrix3d(l,k.matrix("rotate3dz",f.z)),l=c.matrix3d(l,k.matrix("move3d",-g,-h,-i)),this.vertices=k.custom(l);for(var m=0,n=this.vertices.length;m<n;m++){var o=Math.abs(this.vertices[m][2]-e),p=c.scaleValue(o,0,e,j,1),q=new b,r=q.matrix("move3d",g,h,e/2);r=c.matrix3d(r,q.matrix("scale3d",p,p,p)),r=c.matrix3d(r,q.matrix("move3d",-g,-h,-e/2)),this.vertices[m]=c.matrix3d(r,this.vertices[m]),d.typeCheck("array",this.vectors)&&(null==this.vectors[m]?this.vectors[m]=new a(this.vertices[m][0],this.vertices[m][1],this.vertices[m][2]):(this.vectors[m].x=this.vertices[m][0],this.vectors[m].y=this.vertices[m][1],this.vectors[m].z=this.vertices[m][2]))}},this.min=function(){for(var a={x:this.vertices[0][0],y:this.vertices[0][1],z:this.vertices[0][2]},b=1,c=this.vertices.length;b<c;b++)a.x=Math.min(a.x,this.vertices[b][0]),a.y=Math.min(a.y,this.vertices[b][1]),a.z=Math.min(a.z,this.vertices[b][2]);return a},this.max=function(){for(var a={x:this.vertices[0][0],y:this.vertices[0][1],z:this.vertices[0][2]},b=1,c=this.vertices.length;b<c;b++)a.x=Math.max(a.x,this.vertices[b][0]),a.y=Math.max(a.y,this.vertices[b][1]),a.z=Math.max(a.z,this.vertices[b][2]);return a}};return e}),jui.define("chart.polygon.grid",[],function(){var a=function(a,b,c,d,e,f){e=e||0,f=f||0,b=e+b,c=f+c;var g={center:[new Float32Array([e,f,d,1]),new Float32Array([b,f,d,1]),new Float32Array([b,c,d,1]),new Float32Array([e,c,d,1])],horizontal:[new Float32Array([e,c,0,1]),new Float32Array([b,c,0,1]),new Float32Array([b,c,d,1]),new Float32Array([e,c,d,1])],vertical:[new Float32Array([b,f,0,1]),new Float32Array([b,c,0,1]),new Float32Array([b,c,d,1]),new Float32Array([b,f,d,1])]};this.vertices=g[a],this.vectors=[]};return a},"chart.polygon.core"),jui.define("chart.polygon.line",[],function(){var a=function(a,b,c,d,e,f){this.vertices=[new Float32Array([a,b,c,1]),new Float32Array([d,e,f,1])],this.vectors=[]};return a},"chart.polygon.core"),jui.define("chart.polygon.point",[],function(){var a=function(a,b,c){this.vertices=[new Float32Array([a,b,c,1])],this.vectors=[]};return a},"chart.polygon.core"),jui.define("chart.polygon.cube",[],function(){var a=function(a,b,c,d,e,f){this.vertices=[new Float32Array([a,b,c,1]),new Float32Array([a+d,b,c,1]),new Float32Array([a+d,b,c+f,1]),new Float32Array([a,b,c+f,1]),new Float32Array([a,b+e,c,1]),new Float32Array([a+d,b+e,c,1]),new Float32Array([a+d,b+e,c+f,1]),new Float32Array([a,b+e,c+f,1])],this.faces=[[0,1,2,3],[3,2,6,7],[0,3,7,4],[1,2,6,5],[0,1,5,4],[4,5,6,7]],this.vectors=[]};return a},"chart.polygon.core"),jui.define("chart.grid.draw2d",["util.base","util.math"],function(a,b){var c=function(){this.createGridX=function(a,b,c,d,e){var f=this.getLineOption(),g=this.chart.svg.group().translate(c,0),h=this.chart.theme("gridTickBorderSize");return g.append(this.line({y2:"bottom"==a?h:-h,stroke:this.color(d,"gridActiveBorderColor","gridXAxisBorderColor"),"stroke-width":this.chart.theme("gridTickBorderWidth")})),f&&this.drawValueLine(a,g,d,f,b,e),g},this.createGridY=function(a,b,c,d,e){var f=this.getLineOption(),g=this.chart.svg.group().translate(0,c),h=this.chart.theme("gridTickBorderSize");return g.append(this.line({x2:"left"==a?-h:h,stroke:this.color(d,"gridActiveBorderColor","gridYAxisBorderColor"),"stroke-width":this.chart.theme("gridTickBorderWidth")})),f&&this.drawValueLine(a,g,d,f,b,e),g},this.fillRectObject=function(a,b,c,d,e,f,g){b.type.indexOf("gradient")>-1?a.append(this.chart.svg.rect({x:d,y:e,height:g,width:f,fill:this.chart.color(b.fill?b.fill:"linear("+c+") "+this.chart.theme("gridPatternColor")+",0.5 "+this.chart.theme("backgroundColor")),"fill-opacity":this.chart.theme("gridPatternOpacity")})):b.type.indexOf("rect")>-1&&a.append(this.chart.svg.rect({x:d,y:e,height:g,width:f,fill:this.chart.color(b.fill?b.fill:this.chart.theme("gridPatternColor")),"fill-opacity":this.chart.theme("gridPatternOpacity")}))},this.drawAxisLine=function(b,c,d){var e="top"==b||"bottom"==b;c.append(this.chart.svg.line(a.extend({x1:0,y1:0,x2:0,y2:0,stroke:this.color(e?"gridXAxisBorderColor":"gridYAxisBorderColor"),"stroke-width":this.chart.theme(e?"gridXAxisBorderWidth":"gridYAxisBorderWidth"),"stroke-opacity":1},d)))},this.drawPattern=function(a,b,c,d){if(!this.grid.hide&&a&&b&&c){var e=this.getLineOption(),f="left"==a||"right"==a,g=this.chart.svg.group();if(g.translate(this.axis.area("x")+this.chart.area("x"),this.axis.area("y")+this.chart.area("y")),e&&(e.type.indexOf("gradient")>-1||e.type.indexOf("rect")>-1))for(var h=0;h<c.length-1;h+=2){var i=Math.abs(c[h+1]-c[h]),j=c[h]-(d?i/2:0),k=f?0:j,l=f?j:0,m=f?this.axis.area("width"):i,n=f?i:this.axis.area("height");this.fillRectObject(g,e,a,k,l,m,n)}}},this.drawBaseLine=function(a,b){var c=this.getGridSize(),d={};"bottom"==a||"top"==a?d={x1:c.start,x2:c.end}:"left"!=a&&"right"!=a||(d={y1:c.start,y2:c.end}),this.drawAxisLine(a,b,d)},this.drawValueLine=function(b,c,d,e,f,g){var h={},i=!1;if("top"==b?(i=this.checkDrawLineY(f,g),h={x1:0,x2:0,y1:0,y2:this.axis.area("height")}):"bottom"==b?(i=this.checkDrawLineY(f,g),h={x1:0,x2:0,y1:0,y2:-this.axis.area("height")}):"left"==b?(i=this.checkDrawLineX(f,g),h={x1:0,x2:this.axis.area("width"),y1:0,y2:0}):"right"==b&&(i=this.checkDrawLineX(f,g),h={x1:0,x2:-this.axis.area("width"),y1:0,y2:0}),i){var j=this.line(a.extend({stroke:this.chart.theme(d,"gridActiveBorderColor","gridBorderColor"),"stroke-width":this.chart.theme(d,"gridActiveBorderWidth","gridBorderWidth")},h));if(e.type.indexOf("dashed")>-1){var k=this.chart.theme("gridBorderDashArray");j.attr({"stroke-dasharray":"none"!=k&&k?k:"3,3"})}c.append(j)}},this.drawValueText=function(a,b,c,d,e,f,g){this.grid.hideText||("top"==a?b.append(this.getTextRotate(this.chart.text({x:f,y:-(this.chart.theme("gridTickBorderSize")+2*this.chart.theme("gridTickPadding")),dy:this.chart.theme("gridXFontSize")/3,fill:this.chart.theme(g,"gridActiveFontColor","gridXFontColor"),"text-anchor":"middle","font-size":this.chart.theme("gridXFontSize"),"font-weight":this.chart.theme("gridXFontWeight")},e))):"bottom"==a?b.append(this.getTextRotate(this.chart.text({x:f,y:this.chart.theme("gridTickBorderSize")+2*this.chart.theme("gridTickPadding"),dy:this.chart.theme("gridXFontSize")/3,fill:this.chart.theme(g,"gridActiveFontColor","gridXFontColor"),"text-anchor":"middle","font-size":this.chart.theme("gridXFontSize"),"font-weight":this.chart.theme("gridXFontWeight")},e))):"left"==a?b.append(this.getTextRotate(this.chart.text({x:-this.chart.theme("gridTickBorderSize")-this.chart.theme("gridTickPadding"),y:f,dy:this.chart.theme("gridYFontSize")/3,fill:this.chart.theme(g,"gridActiveFontColor","gridYFontColor"),"text-anchor":"end","font-size":this.chart.theme("gridYFontSize"),"font-weight":this.chart.theme("gridYFontWeight")},e))):"right"==a&&b.append(this.getTextRotate(this.chart.text({x:this.chart.theme("gridTickBorderSize")+this.chart.theme("gridTickPadding"),y:f,dy:this.chart.theme("gridYFontSize")/3,fill:this.chart.theme(g,"gridActiveFontColor","gridYFontColor"),"text-anchor":"start","font-size":this.chart.theme("gridYFontSize"),"font-weight":this.chart.theme("gridYFontWeight")},e))))},this.drawImage=function(b,c,d,e,f,g){if(a.typeCheck("function",this.grid.image)){var h=this.grid.image.apply(this.chart,[d,e]);if(a.typeCheck("object",h)){var i=this.chart.svg.image({"xlink:href":h.uri,width:h.width,height:h.height});"top"==b||"bottom"==b?i.attr({x:"block"==this.grid.type?this.scale.rangeBand()/2-h.width/2:-(h.width/2)}):"left"!=b&&"right"!=b||i.attr({y:"block"==this.grid.type?this.scale.rangeBand()/2-h.height/2:-(h.height/2)}),"bottom"==b?i.attr({y:h.dist}):"top"==b?i.attr({y:-(h.dist+h.height)}):"left"==b?i.attr({x:-(h.dist+h.width)}):"right"==b&&i.attr({x:h.dist}),i.translate(f,g),c.append(i)}}}};return c},"chart.draw"),jui.define("chart.grid.draw3d",["util.base","chart.polygon.grid","chart.polygon.line","chart.polygon.point"],function(a,b,c,d){var e=function(){this.createGridX=function(a,b,c,d,e){var f=this.getLineOption(),g=this.svg.group();return f&&this.drawValueLine(a,g,d,f,b,c,e),g},this.createGridY=function(a,b,c,d,e){var f=this.getLineOption(),g=this.svg.group();return f&&this.drawValueLine(a,g,d,f,b,c,e),g},this.drawCenter=function(a,b,c,d,e){var f=this.svg.group(),g=this.getLineOption();g&&this.drawValueLineCenter(f,b,g),this.drawValueTextCenter(f,b,c,d,e),a.append(f)},this.drawBaseLine=function(a,b){var c=this.svg.group();this.drawAxisLine(a,c),b.append(c)},this.drawAxisLine=function(a,c){var d="top"==a||"bottom"==a,e=d?"gridXAxisBorderColor":"gridYAxisBorderColor",f=d?"gridXAxisBorderWidth":"gridYAxisBorderWidth";"center"==a&&(e="gridZAxisBorderColor",f="gridZAxisBorderWidth");var g=this.svg.polygon({stroke:this.chart.theme(e),"stroke-width":this.chart.theme(f),"stroke-opacity":1,fill:this.chart.theme("gridFaceBackgroundColor"),"fill-opacity":this.chart.theme("gridFaceBackgroundOpacity")}),h=null,i=this.axis.area("width"),j=this.axis.area("height"),k=this.axis.area("x"),l=this.axis.area("y"),m=this.axis.depth;"center"==a?h=new b("center",i,j,m,k,l):d?(j="bottom"==a?j:0,h=new b("horizontal",i,j,m,k,l)):(i="right"==a?i:0,h=new b("vertical",i,j,m,k,l)),this.calculate3d(h);for(var n=0;n<h.vectors.length;n++)g.point(h.vectors[n].x,h.vectors[n].y);"center"==a?this.axis.get("y").hide!==!0&&c.append(g):c.append(g)},this.drawValueLine=function(a,b,d,e,f,g,h){var i=!1,j=this.axis.area("width"),k=this.axis.area("height"),l=this.axis.area("x"),m=this.axis.area("y"),n=this.axis.depth,o=null,p=null;if("top"==a?(i=this.checkDrawLineY(f,h),o=new c(g,m,0,g,m,n),p=new c(g,m,n,g,m+k,n)):"bottom"==a?(i=this.checkDrawLineY(f,h),o=new c(g,m+k,0,g,m+k,n),p=new c(g,m+k,n,g,m,n)):"left"==a?(i=this.checkDrawLineX(f,h),o=new c(l,g,0,l,g,n),p=new c(l,g,n,l+j,g,n)):"right"==a&&(i=this.checkDrawLineX(f,h),o=new c(l+j,g,0,l+j,g,n),p=new c(l+j,g,n,l,g,n)),i){this.calculate3d(o,p);var q=this.line({stroke:this.chart.theme("gridBorderColor"),"stroke-width":this.chart.theme("gridBorderWidth"),x1:o.vectors[0].x,y1:o.vectors[0].y,x2:o.vectors[1].x,y2:o.vectors[1].y}),r=this.line({stroke:this.chart.theme("gridBorderColor"),"stroke-width":this.chart.theme("gridBorderWidth"),x1:p.vectors[0].x,y1:p.vectors[0].y,x2:p.vectors[1].x,y2:p.vectors[1].y});if(e.type.indexOf("dashed")>-1){var s=this.chart.theme("gridBorderDashArray"),t="none"!=s&&s?s:"3,3";q.attr({"stroke-dasharray":t}),r.attr({"stroke-dasharray":t})}b.append(q),this.axis.get("y").hide!==!0&&b.append(r)}},this.drawValueLineCenter=function(a,b,d){for(var e="block"!=this.grid.type?b.length-1:b.length,f=this.axis.area("width"),g=this.axis.area("height"),h=this.axis.area("x"),i=this.axis.area("y"),j=this.axis.depth,k="left"==this.axis.get("y").orient?0:f,l="top"==this.axis.get("x").orient?0:g,m=1;m<e;m++){var n=m*(j/e),o=new c(h,i+l,n,h+f,i+l,n),p=new c(h+k,i,n,h+k,i+g,n);this.calculate3d(o,p);var q=this.line({stroke:this.chart.theme("gridBorderColor"),"stroke-width":this.chart.theme("gridBorderWidth"),x1:o.vectors[0].x,y1:o.vectors[0].y,x2:o.vectors[1].x,y2:o.vectors[1].y}),r=this.line({stroke:this.chart.theme("gridBorderColor"),"stroke-width":this.chart.theme("gridBorderWidth"),x1:p.vectors[0].x,y1:p.vectors[0].y,x2:p.vectors[1].x,y2:p.vectors[1].y});if(d.type.indexOf("dashed")>-1){var s=this.chart.theme("gridBorderDashArray"),t="none"!=s&&s?s:"3,3";q.attr({"stroke-dasharray":t}),r.attr({"stroke-dasharray":t})}a.append(q),this.axis.get("y").hide!==!0&&a.append(r)}},this.drawValueText=function(a,b,c,e,f){if(!this.grid.hideText){var g="left"==a||"right"==a,h=this.chart.theme("gridTickBorderSize"),i=this.chart.theme("gridTickPadding"),j=this.axis.area("width"),k=this.axis.area("height"),l=this.axis.area("x"),m=this.axis.area("y"),n=0,o=0;"top"==a?(n=e,o=m+-(h+2*i)):"bottom"==a?(n=e,o=m+(k+h+2*i)):"left"==a?(n=l+-(h+i),o=e):"right"==a&&(n=l+(j+h+i),o=e);var p=new d(n,o,0);this.calculate3d(p),b.append(this.getTextRotate(this.chart.text({x:p.vectors[0].x,y:p.vectors[0].y,dx:g?0:this.chart.theme("gridXFontSize")/3,dy:g?this.chart.theme("gridYFontSize")/3:0,fill:this.chart.theme(g?"gridYFontColor":"gridXFontColor"),"text-anchor":g?"left"==a?"end":"start":"middle","font-size":this.chart.theme(g?"gridYFontSize":"gridXFontSize"),"font-weight":this.chart.theme(g?"gridYFontWeight":"gridXFontWeight")},f)))}},this.drawValueTextCenter=function(a,b,c,e,f){if(!this.grid.hideText)for(var g=this.chart.theme("gridTickBorderSize")+this.chart.theme("gridTickPadding"),h="left"==this.axis.get("y").orient,i="top"==this.axis.get("x").orient,j="block"!=this.grid.type?b.length-1:b.length,k=this.axis.area("width"),l=this.axis.area("height"),m=this.axis.depth,n=this.axis.area("x")+(h?k+g:-g),o=this.axis.area("y")+(i?-g:l+g),p=0;p<b.length;p++){var q=this.format(b[p],p),r=p*(m/j)+f,s=new d(n,o,r);this.calculate3d(s),a.append(this.getTextRotate(this.chart.text({x:s.vectors[0].x,y:s.vectors[0].y,fill:this.chart.theme("gridZFontColor"),"text-anchor":h?"start":"end","font-size":this.chart.theme("gridZFontSize"),"font-weight":this.chart.theme("gridZFontWeight")},q)))}},this.drawPattern=function(){},this.drawImage=function(){}};return e},"chart.draw"),jui.define("chart.grid.core",["util.base","util.math","chart.grid.draw2d","chart.grid.draw3d"],function(a,b,c,d){var e=function(){this.wrapper=function(a,b){return a},this.line=function(b){return this.chart.svg.line(a.extend({x1:0,y1:0,x2:0,y2:0,stroke:this.color("gridBorderColor"),"stroke-width":this.chart.theme("gridBorderWidth"),"stroke-dasharray":this.chart.theme("gridBorderDashArray"),"stroke-opacity":this.chart.theme("gridBorderOpacity")},b))},this.color=function(a){var b=this.grid.color;return 3==arguments.length?null!=b?this.chart.color(b):this.chart.theme.apply(this.chart,arguments):null!=b?this.chart.color(b):this.chart.theme(a)},this.data=function(a,b){return this.axis.data&&this.axis.data[a]?this.axis.data[a][b]||this.axis.data[a]:this.axis.data||[]},this.getGridSize=function(){var a=this.grid.orient,c=this.axis.depth,d=this.axis.degree,e="left"==a||"right"==a?this.axis.area("y"):this.axis.area("x"),f="left"==a||"right"==a?this.axis.area("height"):this.axis.area("width"),g=e,h=f,i=g+h,j={start:g,size:h,end:i};if(this.axis.isFull3D())"center"==a&&(j.start=0,j.size=c,j.end=c);else if(c>0||d>0){var k=b.radian(360-d),l=Math.cos(k)*c,m=Math.sin(k)*c;"left"==a?(j.start=j.start-m,j.size=j.size-m):"bottom"==a&&(j.end=j.end-l,j.size=j.size-l)}return j},this.getDefaultOffset=function(){var a=this.grid.orient,b=this.axis.area(),c=b.width,d=b.height,e="left"==a||"right"==a?b.y:b.x,f="left"==a||"right"==a?d:c,g=e,h=f,i=g+h;return{start:g,size:h,end:i}},this.getTextRotate=function(b){var c=this.grid.textRotate;if(null==c)return b;a.typeCheck("function",c)&&(c=c.apply(this.chart,[b]));var d=b.attr("x"),e=b.attr("y");return b.rotate(c,d,e),b},this.getLineOption=function(){var a=this.grid.line;return"string"==typeof a?a={type:a||"solid"}:"number"==typeof a?a={type:"solid","stroke-width":a}:"object"!=typeof a&&(a=!!a,a&&(a={type:"solid"})),a&&"string"==!a.type&&(a.type=a.type.split(/ /g)),a},this.checkDrawLineY=function(a,b){var c=this.axis.get("y");if(!c.hide){if("left"==c.orient&&0==a&&!this.grid.realtime)return!1;if("right"==c.orient&&b)return!1}return!0},this.checkDrawLineX=function(a,b){var c=this.axis.get("x");if(!c.hide){if("top"==c.orient&&0==a)return!1;if("bottom"==c.orient&&b&&!this.grid.realtime)return!1}return!0},this.drawTop=function(b,c,d,e,f){for(var g=0,h=c.length;g<h;g++){var i=this.format(c[g],g),j=d[g]-f,k=g==h-1&&"block"!=this.grid.type,l=!1;if(this.drawImage("top",b,c[g],g,j,0),i||0===i){a.typeCheck("function",e)&&(l=e(c[g]));var m=this.createGridX("top",g,j,l,k);this.drawValueText("top",m,g,d[g],i,f,l),b.append(m)}}},this.drawBottom=function(b,c,d,e,f){for(var g=0,h=c.length;g<h;g++){var i=this.format(c[g],g),j=d[g]-f,k=g==h-1&&"block"!=this.grid.type,l=!1;if(this.drawImage("bottom",b,c[g],g,j,0),i||0===i){a.typeCheck("function",e)&&(l=e(c[g]));var m=this.createGridX("bottom",g,j,l,k);this.drawValueText("bottom",m,g,d[g],i,f,l),b.append(m)}}},this.drawLeft=function(b,c,d,e,f){for(var g=0,h=c.length;g<h;g++){var i=this.format(c[g],g),j=d[g]-f,k=g==h-1&&"block"!=this.grid.type,l=!1;if(this.drawImage("left",b,c[g],g,0,j),i||0===i){a.typeCheck("function",e)&&(l=e(c[g]));var m=this.createGridY("left",g,j,l,k);this.drawValueText("left",m,g,d[g],i,f,l),b.append(m)}}},this.drawRight=function(b,c,d,e,f){for(var g=0,h=c.length;g<h;g++){var i=this.format(c[g],g),j=d[g]-f,k=g==h-1&&"block"!=this.grid.type,l=!1;if(this.drawImage("right",b,c[g],g,0,j),i||0===i){a.typeCheck("function",e)&&(l=e(c[g]));var m=this.createGridY("right",g,j,l,k);this.drawValueText("right",m,g,d[g],i,f,l),b.append(m)}}},this.drawGrid=function(){var b=this.chart.svg.group(),e=this[this.grid.orient],f=this.axis.isFull3D()?d:c;return this.scale=this.wrapper(this.scale,this.grid.key),a.typeCheck("function",e)&&(f.call(this),e.call(this,b)),this.grid.hide&&b.attr({display:"none"}),{root:b,scale:this.scale}},this.drawAfter=function(a){a.root.attr({"class":"grid-"+this.grid.type}),a.root.translate(this.chart.area("x"),this.chart.area("y"))}};return e.setup=function(){return{dist:0,orient:null,hide:!1,color:null,title:null,line:!1,format:null,image:null,textRotate:null}},e},"chart.draw"),jui.define("chart.grid.block",["util.scale","util.base"],function(a,b){var c=function(){this.center=function(a){this.drawCenter(a,this.domain,this.points,null,this.half_band),this.drawBaseLine("center",a)},this.top=function(a){this.drawPattern("top",this.domain,this.points,!0),this.drawTop(a,this.domain,this.points,null,this.half_band),this.drawBaseLine("top",a),a.append(this.createGridX("top",this.domain.length,this.end,null,!0))},this.bottom=function(a){this.drawPattern("bottom",this.domain,this.points,!0),this.drawBottom(a,this.domain,this.points,null,this.half_band),this.drawBaseLine("bottom",a),a.append(this.createGridX("bottom",this.domain.length,this.end,null,!0))},this.left=function(a){this.drawPattern("left",this.domain,this.points,!0),this.drawLeft(a,this.domain,this.points,null,this.half_band),this.drawBaseLine("left",a),a.append(this.createGridY("left",this.domain.length,this.end,null,!0))},this.right=function(a){this.drawPattern("right",this.domain,this.points,!0),this.drawRight(a,this.domain,this.points,null,this.half_band),this.drawBaseLine("right",a),a.append(this.createGridY("right",this.domain.length,this.end,null,!0))},this.initDomain=function(){var a=[];if(b.typeCheck("string",this.grid.domain)){var c=this.grid.domain,d=this.data();if(this.grid.reverse)var e=d.length-1,f=0,g=-1;else var e=0,f=d.length-1,g=1;for(var h=e;this.grid.reverse?h>=f:h<=f;h+=g)a.push(d[h][c])}else b.typeCheck("function",this.grid.domain)?a=this.grid.domain.call(this.chart):b.typeCheck("array",this.grid.domain)&&(a=this.grid.domain);return this.grid.reverse&&a.reverse(),a},this.wrapper=function(a,c){function d(a){return e("number"==typeof a&&c?f.axis.data[a][c]:h?g-a-1:a)}var e=a,f=this,g=f.domain.length,h=f.grid.reverse;return c?b.extend(d,e):e},this.drawBefore=function(){var b=this.initDomain(),c=this.getGridSize(),d=[c.start,c.end];this.scale=a.ordinal().domain(b),this.scale.rangePoints(d),this.start=c.start,this.size=c.size,this.end=c.end,this.points=this.scale.range(),this.domain=this.scale.domain(),this.band=this.scale.rangeBand(),this.half_band=this.band/2,this.bar=6,this.reverse=this.grid.reverse},this.draw=function(){return this.drawGrid("block")}};return c.setup=function(){return{domain:null,reverse:!1,max:10,hideText:!1,key:null}},c},"chart.grid.core"),jui.define("chart.grid.date",["util.time","util.scale","util.base"],function(a,b,c){var d=function(){this.center=function(a){this.drawCenter(a,this.ticks,this.values,null,0),this.drawBaseLine("center",a)},this.top=function(a){this.drawPattern("top",this.ticks,this.values),this.drawTop(a,this.ticks,this.values,null,0),this.drawBaseLine("top",a)},this.bottom=function(a){this.drawPattern("bottom",this.ticks,this.values),this.drawBottom(a,this.ticks,this.values,null,0),this.drawBaseLine("bottom",a)},this.left=function(a){this.drawPattern("left",this.ticks,this.values),this.drawLeft(a,this.ticks,this.values,null,0),this.drawBaseLine("left",a)},this.right=function(a){this.drawPattern("right",this.ticks,this.values),this.drawRight(a,this.ticks,this.values,null,0),this.drawBaseLine("right",a)},this.wrapper=function(a,b){function d(a){return e("number"==typeof a?f.axis.data[a][b]:+a)}var e=a,f=this;return b?c.extend(d,e):e},this.initDomain=function(){var a=[],b=[],d=this.grid.min||void 0,e=this.grid.max||void 0,f=this.data(),g=[];if(c.typeCheck("string",this.grid.domain)){if(f.length>0){var h=this.grid.domain;g.push(+f[0][h]),g.push(+f[f.length-1][h])}}else if(c.typeCheck("function",this.grid.domain))for(var i=f.length;i--;){var j=this.grid.domain.call(this.chart,f[i]);c.typeCheck("array",j)?(g[i]=Math.max.apply(Math,j),g.push(Math.min.apply(Math,j))):g[i]=j}else g=this.grid.domain;return c.typeCheck("undefined",d)&&g.length>0&&(d=Math.min.apply(Math,g)),c.typeCheck("undefined",e)&&g.length>0&&(e=Math.max.apply(Math,g)),a=[d,e],b=this.grid.interval,this.grid.reverse&&a.reverse(),c.typeCheck("function",b)?this.interval=b.call(this.chart,a):this.interval=b,a},this.drawBefore=function(){var c=this.initDomain(),d=this.getGridSize(),e=[d.start,d.end];if(this.scale=b.time().domain(c).range(e),this.scale.clamp(this.grid.clamp),this.ticks=[],null!=this.grid.realtime&&a[this.grid.realtime]==this.grid.realtime)var f=this.scale.realTicks(this.grid.realtime,this.interval);else var f=this.scale.ticks("milliseconds",this.interval);"string"==typeof this.grid.format&&!function(b,c){b.format=function(b){return a.format(b,c)}}(this.grid,this.grid.format),this.start=d.start,this.size=d.size,this.end=d.end,this.bar=6,this.values=[];for(var g=0,h=f.length;g<h;g++){var i=this.scale(f[g]);i>=d.start&&i<=d.end&&(this.values.push(i),this.ticks.push(f[g]))}},this.draw=function(){return this.drawGrid("date")}};return d.setup=function(){return{domain:null,interval:1e3,min:null,max:null,reverse:!1,key:null,realtime:null,hideText:!1}},d},"chart.grid.core"),jui.define("chart.grid.dateblock",["util.time","util.scale","util.base"],function(a,b,c){var d=function(){this.wrapper=function(a,b){var c=a,d=this;return c.rangeBand=function(){return d.grid.unit},c},this.initDomain=function(){var a=[],b=[],d=this.grid.min||void 0,e=this.grid.max||void 0,f=this.data(),g=[];if(c.typeCheck("string",this.grid.domain)){var h=this.grid.domain;g.push(+f[0][h]),g.push(+f[f.length-1][h])}else if(c.typeCheck("function",this.grid.domain))for(var i=f.length;i--;){var j=this.grid.domain.call(this.chart,f[i]);c.typeCheck("array",j)?(g[i]=+Math.max.apply(Math,j),g.push(+Math.min.apply(Math,j))):g[i]=+j}else g=this.grid.domain;return c.typeCheck("undefined",d)&&(d=Math.min.apply(Math,g)),c.typeCheck("undefined",e)&&(e=Math.max.apply(Math,g)),a=[d,e],b=this.grid.interval,this.grid.reverse&&a.reverse(),c.typeCheck("function",b)?a.interval=b.call(this.chart,a):a.interval=b,a},this.drawBefore=function(){var d=this.initDomain(),e=this.getGridSize(),f=[e.start,e.end],g=b.time().domain(d).rangeRound(f);null!=this.grid.realtime&&a[this.grid.realtime]==this.grid.realtime?this.ticks=g.realTicks(this.grid.realtime,d.interval):this.ticks=g.ticks("milliseconds",d.interval);var h=this.axis.data.length-1,i=this.grid.unit=Math.abs(f[0]-f[1])/h;"string"==typeof this.grid.format&&!function(b,c){b.format=function(b){return a.format(b,c)}}(this.grid,this.grid.format),this.start=e.start,this.size=e.size,this.end=e.end,this.bar=6,this.values=[];for(var j=0,h=this.ticks.length;j<h;j++)this.values[j]=g(this.ticks[j]);var k=this;this.scale=c.extend(function(a){return k.start+a*i},g)},this.draw=function(){return this.drawGrid("dateblock")}};return d},"chart.grid.date"),jui.define("chart.grid.fullblock",["util.scale","util.base"],function(a,b){var c=function(){this.center=function(a){this.drawCenter(a,this.domain,this.points,null,0),this.drawBaseLine("center",a)},this.top=function(a){this.drawPattern("top",this.domain,this.points),this.drawTop(a,this.domain,this.points,null,0),this.drawBaseLine("top",a)},this.bottom=function(a){this.drawPattern("bottom",this.domain,this.points),this.drawBottom(a,this.domain,this.points,null,0),this.drawBaseLine("bottom",a)},this.left=function(a){this.drawPattern("left",this.domain,this.points),this.drawLeft(a,this.domain,this.points,null,0),this.drawBaseLine("left",a)},this.right=function(a){this.drawPattern("right",this.domain,this.points),this.drawRight(a,this.domain,this.points,null,0),this.drawBaseLine("right",a)},this.initDomain=function(){var a=[];if(b.typeCheck("string",this.grid.domain)){var c=this.grid.domain,d=this.data();if(this.grid.reverse)var e=d.length-1,f=0,g=-1;else var e=0,f=d.length-1,g=1;for(var h=e;this.grid.reverse?h>=f:h<=f;h+=g)a.push(d[h][c])}else b.typeCheck("function",this.grid.domain)?a=this.grid.domain.call(this.chart):b.typeCheck("array",this.grid.domain)&&(a=this.grid.domain);return this.grid.reverse&&a.reverse(),a},this.wrapper=function(a,c){function d(a){return e("number"==typeof a&&c?f.axis.data[a][c]:h?g-a:a)}var e=a,f=this,g=f.domain.length,h=f.grid.reverse;return c?b.extend(d,e):e},this.drawBefore=function(){var b=this.initDomain(),c=this.getGridSize();this.scale=a.ordinal().domain(b);var d=[c.start,c.end];this.scale.rangeBands(d),this.start=c.start,this.size=c.size,this.end=c.end,this.points=this.scale.range(),this.domain=this.scale.domain(),this.band=this.scale.rangeBand(),this.half_band=0,this.bar=6,this.reverse=this.grid.reverse},this.draw=function(){return this.drawGrid("fullblock")}};return c.setup=function(){return{domain:null,reverse:!1,max:10,hideText:!1}},c},"chart.grid.core"),jui.define("chart.grid.radar",["util.math","util.base"],function(a,b){var c=function(){function c(a,b,c,d,e,g){var h=Math.abs(e),i=b,j=c;a.append(f.chart.svg.circle({cx:i,cy:j,r:h,"fill-opacity":0,stroke:f.color("gridBorderColor"),"stroke-width":f.chart.theme("gridBorderWidth")}))}function d(b,c,d,e,g,h,i){var j=f.chart.svg.group(),k=[];k.push([c+e,d+g]);for(var l=e,m=g,n=0;n<h;n++){var o=a.rotate(l,m,i);l=o.x,m=o.y,k.push([c+o.x,d+o.y])}for(var p=f.chart.svg.path({fill:"none",stroke:f.color("gridBorderColor"),"stroke-width":f.chart.theme("gridBorderWidth")}),n=0;n<k.length;n++){var q=k[n];0==n?p.MoveTo(q[0],q[1]):p.LineTo(q[0],q[1])}p.LineTo(k[0][0],k[0][1]),j.append(p),b.append(j)}function e(b){var c=f.grid.max,d=f.chart.padding("left"),e=f.chart.padding("top");return function(g,h){var i=h/c,j=Math.abs(b.y1)-Math.abs(b.y2),k=j*i,l=2*Math.PI/f.domain.length,m=b.x1,n=b.y1,o=-k,p=0,q=a.rotate(p,o,l*g),r={x:d+m+q.x,y:e+n+q.y};return r}}var f=this,g=[];this.initDomain=function(){var a=[];if(b.typeCheck("string",this.grid.domain)){var c=this.grid.domain,d=this.data();if(this.grid.reverse)var e=d.length-1,f=0,g=-1;else var e=0,f=d.length-1,g=1;for(var h=e;this.grid.reverse?h>=f:h<=f;h+=g)a.push(d[h][c])}else a=b.typeCheck("function",this.grid.domain)?this.grid.domain(this.chart,this.grid):this.grid.domain;return this.grid.reverse&&a.reverse(),a},this.drawBefore=function(){this.domain=this.initDomain()},this.draw=function(){var b=this.axis.area("width"),f=this.axis.area("height"),h=b;f<h&&(h=f);var i=h/2,j=this.axis.area("x")+b/2,k=this.axis.area("y")+f/2,l=-i,m=0,n=this.domain.length,o=this.grid.step,p=2*Math.PI/n,q=Math.abs(l)/o,r=this.chart.svg.group(),s=this.chart.svg.group();r.append(s),g=[];for(var t=0;t<n;t++){var u=j+m,v=k+l;s.append(this.chart.svg.line({x1:j,y1:k,x2:u,y2:v,stroke:this.color("gridAxisBorderColor"),"stroke-width":this.chart.theme("gridBorderWidth")})),g[t]={x1:j,y1:k,x2:u,y2:v};var w=v,x=u,y="middle";v>k?w=v+20:v<k&&(w=v-10),u>j?(y="start",x+=10):u<j&&(y="end",x-=10),this.grid.hideText||s.append(this.chart.text({x:x,y:w,"text-anchor":y,"font-size":this.chart.theme("gridCFontSize"),"font-weight":this.chart.theme("gridCFontWeight"),fill:this.chart.theme("gridCFontColor")},this.domain[t]));var z=a.rotate(m,l,p);m=z.x,l=z.y}if(!this.grid.line)return{root:s,scale:e(g[0])};l=-i;for(var A=0,B=this.grid.max/this.grid.step,t=0;t<o;t++)0==t&&this.grid.extra?l+=q:("circle"==this.grid.shape?c(s,j,k,0,l,n):d(s,j,k,0,l,n,p),this.grid.hideText||s.append(this.chart.text({x:j,y:k+(l+q-5),"font-size":this.chart.theme("gridCFontSize"),"font-weight":this.chart.theme("gridCFontWeight"),fill:this.chart.theme("gridCFontColor")},this.grid.max-A+"")),l+=q,A+=B);return this.grid.hide&&s.attr({display:"none"}),{root:s,scale:e(g[0])}}};return c.setup=function(){return{domain:null,reverse:!1,max:100,step:10,line:!0,hideText:!1,extra:!1,shape:"radial"}},c},"chart.grid.core"),jui.define("chart.grid.range",["util.scale","util.base","util.math"],function(a,b,c){var d=function(){this.center=function(a){var b=this.scale.min(),c=this.scale.max();this.drawCenter(a,this.ticks,this.values,function(a){return 0==a&&a!=b&&a!=c},0),this.drawBaseLine("center",a)},this.top=function(a){this.drawPattern("top",this.ticks,this.values);var b=this.scale.min(),c=this.scale.max();this.drawTop(a,this.ticks,this.values,function(a){return 0==a&&a!=b&&a!=c},0),this.drawBaseLine("top",a)},this.bottom=function(a){this.drawPattern("bottom",this.ticks,this.values);var b=this.scale.min(),c=this.scale.max();this.drawBottom(a,this.ticks,this.values,function(a){return 0==a&&a!=b&&a!=c},0),this.drawBaseLine("bottom",a)},this.left=function(a){this.drawPattern("left",this.ticks,this.values);var b=this.scale.min(),c=this.scale.max();this.drawLeft(a,this.ticks,this.values,function(a){return 0==a&&a!=b&&a!=c},0),this.drawBaseLine("left",a);
},this.right=function(a){this.drawPattern("right",this.ticks,this.values);var b=this.scale.min(),c=this.scale.max();this.drawRight(a,this.ticks,this.values,function(a){return 0==a&&a!=b&&a!=c},0),this.drawBaseLine("right",a)},this.wrapper=function(a,c){function d(a){return e(f.axis.data[a][c])}var e=a,f=this;return c?b.extend(d,e):e},this.initDomain=function(){var a=[],d=this.grid.min||void 0,e=this.grid.max||void 0,f=this.data(),g=[],h=!1;if(b.typeCheck("string",this.grid.domain)){var i=this.grid.domain;g=new Array(f.length);for(var j=f.length;j--;){var k=f[j][i];b.typeCheck("array",k)?(g[j]=Math.max(k),g.push(Math.min(k))):(g[j]=k,g.push(0))}}else if(b.typeCheck("function",this.grid.domain)){g=new Array(f.length);for(var l=!1,j=f.length;j--;){var k=this.grid.domain.call(this.chart,f[j]);b.typeCheck("array",k)?(g[j]=Math.max.apply(Math,k),g.push(Math.min.apply(Math,k))):(g[j]=k,l||(g.push(0),l=!0))}}else g=this.grid.domain,h=!0;var m=Math.min.apply(Math,g),n=Math.max.apply(Math,g);h?(d=m,e=n):(("undefined"==typeof d||d>m)&&(d=m),("undefined"==typeof e||e<n)&&(e=n));var o;if(b.typeCheck("function",this.grid.unit)?o=this.grid.unit.call(this.chart,this.grid):b.typeCheck("number",this.grid.unit)?o=this.grid.unit:(d>0&&(d=Math.floor(d)),o=c.div(e-d,this.grid.step),o>1?o=Math.ceil(o):0<o&&o<1&&(o=c.div(Math.ceil(c.multi(o,10)),10))),0==o)a=[0,0];else{for(var p=0,q=c.fixed(o);p<e;)p=q.plus(p,o);for(var r=p;r>d;)r=q.minus(r,o);a=[r,p],a.step=Math.abs(r-p)/o}return this.grid.reverse&&a.reverse(),a},this.drawBefore=function(){var b=this.initDomain(),c=this.getGridSize();if(this.scale=a.linear().domain(b),"left"==this.grid.orient||"right"==this.grid.orient)var d=[c.end,c.start];else var d=[c.start,c.end];this.scale.range(d),this.scale.clamp(this.grid.clamp),this.start=c.start,this.size=c.size,this.end=c.end,this.step=b.step,this.nice=this.grid.nice,this.ticks=this.scale.ticks(this.step,this.nice),"left"!=this.grid.orient&&"right"!=this.grid.orient||this.ticks.reverse(),this.bar=6,this.values=[];for(var e=0,f=this.ticks.length;e<f;e++)this.values[e]=this.scale(this.ticks[e])},this.draw=function(){return this.drawGrid("range")}};return d.setup=function(){return{domain:null,step:10,min:0,max:0,unit:null,clamp:!0,reverse:!1,key:null,hideText:!1,nice:!1}},d},"chart.grid.core"),jui.define("chart.grid.log",["util.scale","util.base"],function(a,b){var c=function(){this.drawBefore=function(){this.grid.unit=!1;var b=this.initDomain(),c=this.getGridSize();if(this.scale=a.log(this.grid.base).domain(b),"left"==this.grid.orient||"right"==this.grid.orient)var d=[c.end,c.start];else var d=[c.start,c.end];this.scale.range(d),this.start=c.start,this.size=c.size,this.end=c.end,this.step=this.grid.step,this.nice=this.grid.nice,this.ticks=this.scale.ticks(this.step,this.nice),"left"!=this.grid.orient&&"right"!=this.grid.orient||this.ticks.reverse(),this.bar=6,this.values=[];for(var e=0,f=this.ticks.length;e<f;e++)this.values[e]=this.scale(this.ticks[e])},this.draw=function(){return this.drawGrid("log")}};return c.setup=function(){return{base:10,step:4,nice:!1,hideText:!1}},c},"chart.grid.range"),jui.define("chart.grid.rule",["util.scale","util.base"],function(a,b){var c=function(){this.top=function(a){var b=this.axis.area("height"),c=b/2;a.append(this.axisLine({y1:this.center?c:0,y2:this.center?c:0,x1:this.start,x2:this.end}));for(var d=this.ticks,e=this.values,f=this.bar,g=0;g<d.length;g++){var h=this.format(d[g],g);if(h||0===h){var i=0==d[g],j=this.chart.svg.group().translate(e[g],this.center?c:0);j.append(this.line({y1:this.center?-f:0,y2:f,stroke:this.color("gridAxisBorderColor"),"stroke-width":this.chart.theme("gridBorderWidth")})),(!i||i&&!this.hideZero)&&j.append(this.getTextRotate(this.chart.text({x:0,y:f+f+4,"text-anchor":"middle",fill:this.chart.theme("gridFontColor")},h))),a.append(j)}}},this.bottom=function(a){var b=this.axis.area("height"),c=b/2;a.append(this.axisLine({y1:this.center?-c:0,y2:this.center?-c:0,x1:this.start,x2:this.end}));for(var d=this.ticks,e=this.values,f=this.bar,g=0;g<d.length;g++){var h=this.format(d[g],g);if(h||0===h){var i=0==d[g],j=this.chart.svg.group().translate(e[g],this.center?-c:0);j.append(this.line({y1:this.center?-f:0,y2:this.center?f:-f,stroke:this.color("gridAxisBorderColor"),"stroke-width":this.chart.theme("gridBorderWidth")})),(!i||i&&!this.hideZero)&&j.append(this.getTextRotate(this.chart.text({x:0,y:2*-f,"text-anchor":"middle",fill:this.chart.theme(i,"gridActiveFontColor","gridFontColor")},h))),a.append(j)}}},this.left=function(a){var b=this.axis.area("width"),c=(this.axis.area("height"),b/2);a.append(this.axisLine({x1:this.center?c:0,x2:this.center?c:0,y1:this.start,y2:this.end}));for(var d=this.ticks,e=this.values,f=this.bar,g=0;g<d.length;g++){var h=this.format(d[g],g);if(h||0===h){var i=0==d[g],j=this.chart.svg.group().translate(this.center?c:0,e[g]);j.append(this.line({x1:this.center?-f:0,x2:f,stroke:this.color("gridAxisBorderColor"),"stroke-width":this.chart.theme("gridBorderWidth")})),(!i||i&&!this.hideZero)&&j.append(this.getTextRotate(this.chart.text({x:f/2+4,y:f-2,fill:this.chart.theme("gridFontColor")},h))),a.append(j)}}},this.right=function(a){var b=this.axis.area("width"),c=b/2;a.append(this.axisLine({x1:this.center?-c:0,x2:this.center?-c:0,y1:this.start,y2:this.end}));for(var d=this.ticks,e=this.values,f=this.bar,g=0;g<d.length;g++){var h=this.format(d[g],g);if(h||0===h){var i=0==d[g],j=this.chart.svg.group().translate(this.center?-c:0,e[g]);j.append(this.line({x1:this.center?-f:0,x2:this.center?f:-f,stroke:this.color("gridAxisBorderColor"),"stroke-width":this.chart.theme("gridBorderWidth")})),(!i||i&&!this.hideZero)&&j.append(this.getTextRotate(this.chart.text({x:-f-4,y:f-2,"text-anchor":"end",fill:this.chart.theme("gridFontColor")},h))),a.append(j)}}},this.wrapper=function(a,c){function d(a){return e(f.axis.data[a][c])}var e=a,f=this;return c?b.extend(d,e):e},this.initDomain=function(){var a=[],c=this.grid.min||void 0,d=this.grid.max||void 0,e=this.data(),f=[];if(b.typeCheck("string",this.grid.domain)){var g=this.grid.domain;f=new Array(e.length);for(var h=0,i=e.length;h<i;h++){var j=e[h][g];b.typeCheck("array",j)?(f[h]=Math.max(j),f.push(Math.min(j))):f[h]=j}}else if(b.typeCheck("function",this.grid.domain)){f=new Array(e.length);for(var h=0,i=e.length;h<i;h++){var j=this.grid.domain.call(this.chart,e[h]);b.typeCheck("array",j)?(f[h]=Math.max.apply(Math,j),f.push(Math.min.apply(Math,j))):f[h]=j}}else f=grid.domain;var k=Math.min.apply(Math,f),l=Math.max.apply(Math,f);"undefined"==typeof c&&(c=k),"undefined"==typeof d&&(d=l),this.grid.max=d,this.grid.min=c;var m;if(m=b.typeCheck("function",this.grid.unit)?this.grid.unit.call(this.chart,this.grid):b.typeCheck("number",this.grid.unit)?this.grid.unit:Math.ceil((d-c)/this.grid.step),0==m)a=[0,0];else{for(var n=0;n<d;)n+=m;for(var o=n;o>c;)o-=m;a=[o,n]}return this.grid.reverse&&a.reverse(),a},this.drawBefore=function(){var b=this.initDomain(),c=this.getGridSize();if(this.scale=a.linear().domain(b),"left"==this.grid.orient||"right"==this.grid.orient)var d=[c.end,c.start];else var d=[c.start,c.end];this.scale.range(d),this.start=c.start,this.size=c.size,this.end=c.end,this.step=this.grid.step,this.nice=this.grid.nice,this.ticks=this.scale.ticks(this.step,this.nice),this.bar=6,this.hideZero=this.grid.hideZero,this.center=this.grid.center,this.values=[];for(var e=0,f=this.ticks.length;e<f;e++)this.values[e]=this.scale(this.ticks[e])},this.draw=function(){return this.drawGrid(chart,orient,"rule",grid)}};return c.setup=function(){return{domain:null,step:10,min:0,max:0,unit:null,clamp:!0,reverse:!1,key:null,hideText:!1,hideZero:!1,nice:!1,center:!1}},c},"chart.grid.core"),jui.define("chart.grid.panel",["util.base"],function(a){var b=function(){this.custom=function(b){var c=this.scale(0);c.x-=this.axis.area("x"),c.y-=this.axis.area("y"),b.append(this.chart.svg.rect(a.extend(c,{fill:"transparent",stroke:"transparent"})))},this.drawBefore=function(){this.scale=function(a){return function(b){return{x:a.area("x"),y:a.area("y"),width:a.area("width"),height:a.area("height")}}}(this.axis)},this.draw=function(){return this.grid.hide=!0,this.drawGrid("panel")}};return b},"chart.grid.core"),jui.define("chart.grid.table",[],function(){var a=function(a,b,c){var d,e;this.custom=function(a){for(var b=0;b<d;b++)for(var c=0;c<e;c++){var f=b*e+c,g=this.scale(f);g.x-=this.axis.area("x"),g.y-=this.axis.area("y");this.chart.svg.rect(_.extend(g,{fill:"tranparent",stroke:"black"}))}},this.drawBefore=function(){var a=this.grid.rows,b=this.grid.columns;padding=this.grid.padding;var c=(this.axis.area("width")-(b-1)*padding)/b,d=(this.axis.area("height")-(a-1)*padding)/a;this.scale=function(a,b,c,d,e){return function(b){var f=Math.floor(b/c),g=b%c,h=g*e,i=f*d,j=padding*g,k=padding*f;return{x:a.area("x")+h+j,y:a.area("y")+i+k,width:e,height:d}}}(this.axis,a,b,d,c)},this.draw=function(){return this.grid.hide=!0,this.drawGrid("table")}};return a.setup=function(){return{rows:1,columns:1,padding:10}},a},"chart.grid.core"),jui.define("chart.grid.overlap",["util.base"],function(a){var b=function(){var b,c,d,e,f;this.custom=function(){for(var b=0,c=this.axis.data.length;b<c;b++){var d=this.scale(b);d.x-=this.axis.area("x"),d.y-=this.axis.area("y"),this.chart.svg.rect(a.extend(d,{fill:"transparent",stroke:"transparent"}))}},this.drawBefore=function(){b=this.grid.count||this.axis.data.length||1,c=this.axis.area("width")/2/b,d=this.axis.area("height")/2/b,e=this.axis.area("width"),f=this.axis.area("height"),this.scale=function(a){return function(b){var g=b*c,h=b*d;return{x:a.area("x")+g,y:a.area("y")+h,width:2*Math.abs(e/2-g),height:2*Math.abs(f/2-h)}}}(this.axis)},this.draw=function(){return this.grid.hide=!0,this.drawGrid("overlap")}};return b.setup=function(){return{count:null}},b},"chart.grid.core"),jui.define("chart.topology.sort.random",[],function(){return function(a,b,c){for(var d=[],e=0;e<a.length;e++){var f=Math.floor(Math.random()*(b.width-c)),g=Math.floor(Math.random()*(b.height-c));d[e]={x:b.x+f,y:b.y+g}}return d}}),jui.define("chart.topology.sort.linear",[],function(){function a(c){var d=Math.floor(Math.random()*c);if(b[d]){var e=0;for(var f in b)e++;if(e<c)return a(c);b={}}else b[d]=!0;return d}var b={};return function(b,c,d){for(var e=[],f=Math.floor(c.height/d),g=Math.floor(c.width/d),h=Math.floor(g/b.length),i=0,j=-1,k=b.length,l=0;l<b.length;l++){var m=0,n=0,o=0;l%2==0?(m=i*d,n=a(f)*d,i+=h,j+=1,o=j):(m=(g-i)*d+d,n=a(f)*d,k-=1,o=k),e[o]={x:c.x+m+d,y:c.y+n+d/2}}return e}}),jui.define("chart.grid.topologytable",["util.base"],function(a){var b=function(){function b(a){for(var b=null,d=c.axis.data,e=0,f=d.length;e<f;e++)if(c.axis.getValue(d[e],"key")==a){b=e;break}return b}var c=this;this.drawBefore=function(){if(!this.axis.cacheXY){var d=jui.include("chart.topology.sort."+this.grid.sort),e=[this.axis.data,this.axis.area(),this.grid.space];a.typeCheck("function",d)?this.axis.cacheXY=d.apply(this,e):(d=jui.include(this.grid.sort),a.typeCheck("function",d)&&(this.axis.cacheXY=d.apply(this,e)))}this.axis.cache||(this.axis.cache={scale:1,viewX:0,viewY:0,nodeKey:null}),this.scale=function(){return function(d){var d=a.typeCheck("string",d)?b(d):d,e={setX:function(a){c.axis.cacheXY[d].x=a-c.axis.cache.viewX},setY:function(a){c.axis.cacheXY[d].y=a-c.axis.cache.viewY},setScale:function(a){c.axis.cache.scale=a},setView:function(a,b){c.axis.cache.viewX=a,c.axis.cache.viewY=b},moveLast:function(){var a=c.axis.cacheXY.splice(d,1);c.axis.cacheXY.push(a[0]);var b=c.axis.data.splice(d,1);c.axis.data.push(b[0])}};if(a.typeCheck("integer",d)){var f=c.axis.cacheXY[d].x+c.axis.cache.viewX,g=c.axis.cacheXY[d].y+c.axis.cache.viewY,h=c.axis.cache.scale;return a.extend(e,{x:f*h,y:g*h,scale:h})}return e}}(this.axis)},this.draw=function(){return this.grid.hide=!0,this.drawGrid()}};return b.setup=function(){return{sort:"linear",space:50}},b},"chart.grid.core"),jui.define("chart.grid.grid3d",["util.base","util.math"],function(a,b){var c=function(){function c(a){var b=null;return a.each(function(a,c){"line"==c.element.nodeName&&(b=c.attributes)}),b}var d=this,e=0,f=0,g=0;this.drawBefore=function(){e=this.axis.get("depth"),f=this.axis.get("degree"),g=b.radian(360-f),this.scale=function(){return function(b,c,f,h){var i=a.typeCheck("integer",h)?h:1,j=e/i;if(void 0==f||1==i)return{x:d.axis.x(b),y:d.axis.y(c),depth:j};var f=void 0==f?0:f,k=j*f,l=Math.sin(g)*j;return{x:d.axis.x(b)+Math.cos(g)*k,y:d.axis.y(c)+Math.sin(g)*k+l,depth:j}}}(this.axis),this.scale.depth=e,this.scale.degree=f,this.scale.radian=g},this.draw=function(){var a=this.axis.x.root,b=this.axis.y.root,f=Math.sin(g)*e,h=Math.cos(g)*e;return b.each(function(e,g){if("line"==g.element.nodeName)b.append(d.line({x1:h,y1:0,x2:h,y2:f+g.attributes.y2}));else{var i=c(a);g.append(d.line({x1:0,y1:0,x2:h,y2:f})),g.append(d.line({x1:h,y1:f,x2:h+i.x2,y2:f}))}}),a.each(function(a,f){var h="line"==f.element.nodeName?f.attributes:f.get(0).attributes,i=h.y1+Math.sin(g)*e,j=h.x1+Math.cos(g)*e;if(a>0){var k=c(b);f.append(d.line({x1:h.x1,y1:h.y1,x2:j,y2:i})),f.append(d.line({x1:j,y1:i,x2:j,y2:-(k.y2-i)}))}}),this.drawGrid()}};return c.setup=function(){return{domain:null}},c},"chart.grid.core"),jui.define("chart.brush.core",["util.base","util.dom"],function(a,b){var c=function(){function c(a,b){for(var c={},d={},e=0;e<b.length;e++)c[b[e]]||(d[b[e]]=[]);for(var e=0,f=a.length;e<f;e++){var g=a[e];for(var h in d)d[h].push(g[h])}for(var i in d)c[i]={min:Math.min.apply(Math,d[i]),max:Math.max.apply(Math,d[i])};return c}this.drawAfter=function(a){this.brush.clip!==!1&&a.attr({"clip-path":"url(#"+this.axis.get("clipId")+")"}),a.attr({"class":"brush-"+this.brush.type}),a.translate(this.chart.area("x"),this.chart.area("y"))},this.drawTooltip=function(a,b,c){function d(){return f.chart.svg.group({visibility:"hidden"},function(){f.chart.text({fill:f.chart.theme("tooltipPointFontColor"),"font-size":f.chart.theme("tooltipPointFontSize"),"font-weight":f.chart.theme("tooltipPointFontWeight"),"text-anchor":"middle",opacity:c}),f.chart.svg.circle({r:f.chart.theme("tooltipPointRadius"),fill:a,stroke:b,opacity:c,"stroke-width":f.chart.theme("tooltipPointBorderWidth")})})}function e(a,b,c,d){var e=g.get(0);e.element.textContent=d,"left"==a?e.attr({x:-7,y:4,"text-anchor":"end"}):"right"==a?e.attr({x:7,y:4,"text-anchor":"start"}):"bottom"==a?e.attr({y:16}):e.attr({y:-7}),g.attr({visibility:0!=d?"visible":"hidden"}),g.translate(b,c)}var f=this,g=null;return g=d(),{tooltip:g,control:e,style:function(a,b,c){g.get(0).attr({opacity:c}),g.get(1).attr({fill:a,stroke:b,opacity:c})}}},this.curvePoints=function(a){var b=[],c=[],d=a.length-1,e=[],f=[],g=[],h=[];for(e[0]=0,f[0]=2,g[0]=1,h[0]=a[0]+2*a[1],i=1;i<d-1;i++)e[i]=1,f[i]=4,g[i]=1,h[i]=4*a[i]+2*a[i+1];e[d-1]=2,f[d-1]=7,g[d-1]=0,h[d-1]=8*a[d-1]+a[d];for(var i=1;i<d;i++){var j=e[i]/f[i-1];f[i]=f[i]-j*g[i-1],h[i]=h[i]-j*h[i-1]}b[d-1]=h[d-1]/f[d-1];for(var i=d-2;i>=0;--i)b[i]=(h[i]-g[i]*b[i+1])/f[i];for(var i=0;i<d-1;i++)c[i]=2*a[i+1]-b[i+1];return c[d-1]=.5*(a[d]+b[d-1]),{p1:b,p2:c}},this.eachData=function(b,c){if(a.typeCheck("function",b)){var d=this.listData();if(c===!0)for(var e=d.length-1;e>=0;e--)b.call(this,e,d[e]);else for(var f=0,e=d.length;f<e;f++)b.call(this,d[f],f)}},this.listData=function(){return this.axis&&this.axis.data?this.axis.data:[]},this.getData=function(a){return this.listData()[a]},this.getValue=function(a,b,c){return this.axis.getValue(a,b,c)},this.getXY=function(b){var d=[],e={},f=this.listData().length,g=f,h=this.brush.target,i=h.length;b!==!1&&(e=c(this.axis.data,h));for(var j=0;j<i;j++)d[j]={x:new Array(f),y:new Array(f),value:new Array(f),min:[],max:[],length:f};var k=this.axis.data,l="range"==this.axis.y.type,m=this.axis.x,n=this.axis.y,o=a.loop(g);return o(function(a,c){var f=k[a],g=0,j=0;l?g=m(a):j=n(a);for(var o=0;o<i;o++){var p=h[o],q=f[p];l?j=n(q):g=m(q),d[o].x[a]=g,d[o].y[a]=j,d[o].value[a]=q,b!==!1&&(d[o].min[a]=q==e[p].min,d[o].max[a]=q==e[p].max)}}),d},this.getStackXY=function(a){var b=this.getXY(a),c="range"==this.axis.y.type;return this.eachData(function(a,d){for(var e=0,f=0;f<this.brush.target.length;f++){var g=this.brush.target[f],h=a[g];f>0&&(e+=a[this.brush.target[f-1]]),c?b[f].y[d]=this.axis.y(h+e):b[f].x[d]=this.axis.x(h+e)}}),b},this.addEvent=function(c,d,e){function f(a){var c=b.offset(g.root),d=a.pageX-c.left,e=a.pageY-c.top;a.bgX=d,a.bgY=e,a.chartX=d-g.padding("left"),a.chartY=e-g.padding("top")}if(this.brush.useEvent===!0){var g=this.chart,h={};a.typeCheck("object",d)&&!e?(h.brush=this.brush,h.data=d):(h.brush=this.brush,h.dataIndex=d,h.dataKey=null!=e?this.brush.target[e]:null,h.data=null!=d?this.getData(d):null),c.on("click",function(a){f(a),g.emit("click",[h,a])}),c.on("dblclick",function(a){f(a),g.emit("dblclick",[h,a])}),c.on("contextmenu",function(a){f(a),g.emit("rclick",[h,a]),a.preventDefault()}),c.on("mouseover",function(a){f(a),g.emit("mouseover",[h,a])}),c.on("mouseout",function(a){f(a),g.emit("mouseout",[h,a])}),c.on("mousemove",function(a){f(a),g.emit("mousemove",[h,a])}),c.on("mousedown",function(a){f(a),g.emit("mousedown",[h,a])}),c.on("mouseup",function(a){f(a),g.emit("mouseup",[h,a])})}},this.color=function(b,c){var d=this.brush.colors,e=null,f=0,g=0;if(a.typeCheck("undefined",c)?f=b:(f=c,g=b),a.typeCheck("function",d)){var h=d.call(this.chart,this.getData(g),g);e=a.typeCheck(["string","integer"],h)?this.chart.color(h):a.typeCheck("array",h)?this.chart.color(f,h):this.chart.color(0)}else e=this.chart.color(f,d);return e},this.offset=function(a,b){var c=this.axis[a](b);return"block"!=this.axis[a].type&&(c+=this.axis[a].rangeBand()/2),c}};return c.setup=function(){return{target:null,colors:null,axis:0,index:null,clip:!0,useEvent:!0}},c},"chart.draw"),jui.define("chart.brush.map.core",[],function(){var a=function(){};return a},"chart.brush.core"),jui.define("chart.brush.polygon.core",[],function(){var a=function(){this.createPolygon=function(a,b){this.calculate3d(a);var c=b.call(this,a);if(c)return c.order=this.axis.depth-a.max().z,c}};return a.setup=function(){return{id:null,clip:!1}},a},"chart.brush.core"),jui.define("chart.brush.canvas.core",["util.base"],function(a){var b=function(){this.addPolygon=function(b,c){a.typeCheck("array",this.polygons)||(this.polygons=[]),this.calculate3d(b),this.polygons.push({polygon:b,order:this.axis.depth-b.max().z,handler:c})},this.drawAfter=function(){if(a.typeCheck("array",this.polygons)){var b=this.polygons;b.sort(function(a,b){return a.order-b.order});for(var c=0,d=b.length;c<d;c++){var e=b.shift();e.handler.call(this,e.polygon)}}}};return b},"chart.brush.core"),jui.define("chart.widget.core",["util.base"],function(a){var b=function(){this.getIndexArray=function(b){var c=[0];return a.typeCheck("array",b)?c=b:a.typeCheck("integer",b)&&(c=[b]),c},this.getScaleToValue=function(a,b,c,d,e){var f=10*(c-b),g=(e-d)/f,h=e-g*((a-b)/.1);return h<d?d:h>e?e:h},this.getValueToScale=function(a,b,c,d,e){var f=10*(e-d),g=(c-b)/f;return parseFloat((d+(c-a)/g*.1).toFixed(1))},this.isRender=function(){return this.widget.render===!0},this.on=function(b,c,d){var e=this;return this.chart.on(b,function(){if(a.startsWith(b,"axis.")&&a.typeCheck("integer",d)){var f=e.chart.axis(d),g=arguments[0];a.typeCheck("object",f)&&arguments[1]==d&&c.apply(e,[g])}else c.apply(e,arguments)},this.isRender()?"render":"renderAll")},this.drawAfter=function(a){a.attr({"class":"widget-"+this.widget.type})}};return b.setup=function(){return{render:!1,index:0}},b},"chart.draw"),jui.define("chart.widget.map.core",[],function(){var a=function(a,b,c){};return a.setup=function(){return{axis:0}},a},"chart.widget.core"),jui.define("chart.widget.polygon.core",[],function(){var a=function(){this.drawAfter=function(a){}};return a},"chart.widget.core"),jui.define("chart.widget.canvas.core",[],function(){var a=function(){this.drawAfter=function(a){}};return a},"chart.widget.core");