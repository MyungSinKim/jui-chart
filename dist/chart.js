(function(t){function e(e){var i=e[0];var s=e[1];var o=e[2];var h,l,c=0,d=[];for(;c<i.length;c++){l=i[c];if(a[l]){d.push(a[l][0])}a[l]=0}for(h in s){if(Object.prototype.hasOwnProperty.call(s,h)){t[h]=s[h]}}if(u)u(e);while(d.length){d.shift()()}n.push.apply(n,o||[]);return r()}function r(){var t;for(var e=0;e<n.length;e++){var r=n[e];var i=true;for(var o=1;o<r.length;o++){var h=r[o];if(a[h]!==0)i=false}if(i){n.splice(e--,1);t=s(s.s=r[0])}}return t}var i={};var a={0:0};var n=[];function s(e){if(i[e]){return i[e].exports}var r=i[e]={i:e,l:false,exports:{}};t[e].call(r.exports,r,r.exports,s);r.l=true;return r.exports}s.m=t;s.c=i;s.d=function(t,e,r){if(!s.o(t,e)){Object.defineProperty(t,e,{enumerable:true,get:r})}};s.r=function(t){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(t,"__esModule",{value:true})};s.t=function(t,e){if(e&1)t=s(t);if(e&8)return t;if(e&4&&typeof t==="object"&&t&&t.__esModule)return t;var r=Object.create(null);s.r(r);Object.defineProperty(r,"default",{enumerable:true,value:t});if(e&2&&typeof t!="string")for(var i in t)s.d(r,i,function(e){return t[e]}.bind(null,i));return r};s.n=function(t){var e=t&&t.__esModule?function e(){return t["default"]}:function e(){return t};s.d(e,"a",e);return e};s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)};s.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[];var h=o.push.bind(o);o.push=e;o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=h;n.push([57,1]);return r()})({57:function(t,e,r){"use strict";r.r(e);var i=r(0);var a=r.n(i);a.a.use=function(){let t=[];if(arguments.length==1&&typeof arguments[0]=="object"){t=arguments[0]}else{t=arguments}for(let e=0;e<t.length;e++){let r=t[e];if(typeof r=="object"){if(typeof r.name!="string")return;if(typeof r.component!="function")return;if(r.extend!=null){if(a.a.include(r.extend)==null){console.warn("JUI_WARNING_MSG: '"+r.extend+"' module should be imported in first")}}a.a.redefine(r.name,[],r.component,r.extend)}}};var n=a.a;var s={name:"chart.brush.bar",extend:"chart.brush.core",component:function(){var t=a.a.include("util.base");var e=function(){var e;var r,i,a,n;this.getBarStyle=function(){return{borderColor:this.chart.theme("barBorderColor"),borderWidth:this.chart.theme("barBorderWidth"),borderOpacity:this.chart.theme("barBorderOpacity"),borderRadius:this.chart.theme("barBorderRadius"),disableOpacity:this.chart.theme("barDisableBackgroundOpacity"),circleColor:this.chart.theme("barPointBorderColor")}};this.getBarElement=function(e,r,i){var a=this.getBarStyle(),n=this.color(e,r),s=this.getData(e)[this.brush.target[r]];var o=this.chart.svg.pathRect({width:i.width,height:i.height,fill:n,stroke:a.borderColor,"stroke-width":a.borderWidth,"stroke-opacity":a.borderOpacity});if(s!=0){this.addEvent(o,e,r)}if(this.barList==null){this.barList=[]}this.barList.push(t.extend({element:o,color:n},i));return o};this.setActiveEffect=function(t){var e=this.getBarStyle(),r=this.barList;for(var i=0;i<r.length;i++){var a=r[i]==t?1:e.disableOpacity;r[i].element.attr({opacity:a});if(r[i].minmax){r[i].minmax.style(r[i].color,e.circleColor,a)}}};this.drawBefore=function(){var t=this.brush.outerPadding,s=this.brush.innerPadding,o=this.brush.target.length;e=this.chart.svg.group();r=this.axis.x(0);i=this.axis.y.rangeBand();if(this.brush.size>0){n=this.brush.size;a=n*o+(o-1)*s}else{a=i-t*2;n=(a-(o-1)*s)/o;n=n<0?0:n}};this.drawETC=function(e){if(!t.typeCheck("array",this.barList))return;var r=this,i=this.getBarStyle();this.active=this.drawTooltip();e.append(this.active.tooltip);for(var a=0;a<this.barList.length;a++){var n=this.barList[a],s=this.brush.display;if(s=="max"&&n.max||s=="min"&&n.min||s=="all"){n.minmax=this.drawTooltip(n.color,i.circleColor,1);n.minmax.control(n.position,n.tooltipX,n.tooltipY,this.format(n.value));e.append(n.minmax.tooltip)}if(n.value!=0&&this.brush.activeEvent!=null){(function(t){r.active.style(t.color,i.circleColor,1);t.element.on(r.brush.activeEvent,function(e){r.active.style(t.color,i.circleColor,1);r.active.control(t.position,t.tooltipX,t.tooltipY,r.format(t.value));r.setActiveEffect(t)});t.element.attr({cursor:"pointer"})})(n)}}var n=this.barList[this.brush.active];if(n!=null){this.active.style(n.color,i.circleColor,1);this.active.control(n.position,n.tooltipX,n.tooltipY,this.format(n.value));this.setActiveEffect(n)}};this.draw=function(){var t=this.getXY(),i=this.getBarStyle();this.eachData(function(s,o){var h=this.offset("y",o)-a/2;for(var l=0;l<this.brush.target.length;l++){var u=s[this.brush.target[l]],c=this.axis.x(u),d=h+n/2,f=c>=r?"right":"left";if(Math.abs(r-c)<this.brush.minSize){c=f=="right"?c+this.brush.minSize:c-this.brush.minSize}var v=Math.abs(r-c),p=v<i.borderRadius||n<i.borderRadius?0:i.borderRadius,g=this.getBarElement(o,l,{width:v,height:n,value:u,tooltipX:c,tooltipY:d,position:f,max:t[l].max[o],min:t[l].min[o]});if(c>=r){g.round(v,n,0,p,p,0);g.translate(r,h)}else{g.round(v,n,p,0,0,p);g.translate(r-v,h)}e.append(g);h+=n+this.brush.innerPadding}});this.drawETC(e);return e};this.drawAnimate=function(t){var e=this.chart.svg,r=this.brush.animate;t.append(e.animate({attributeName:"opacity",from:"0",to:"1",begin:"0s",dur:"1.4s",repeatCount:"1",fill:"freeze"}));t.each(function(t,i){if(i.is("util.svg.element.path")){var a=i.data("translate").split(","),n=parseInt(a[0]),s=parseInt(a[1]),o=parseInt(i.attr("width")),h=r=="right"?n+o:n-o;i.append(e.animateTransform({attributeName:"transform",type:"translate",from:h+" "+s,to:n+" "+s,begin:"0s",dur:"0.7s",repeatCount:"1",fill:"freeze"}))}})}};e.setup=function(){return{size:0,minSize:0,outerPadding:2,innerPadding:1,active:null,activeEvent:null,display:null,format:null}};return e}};var o={name:"chart.brush.stackbar",extend:"chart.brush.bar",component:function(){var t=a.a.include("util.base");var e=function(e,r,i){var a,n,s;this.addBarElement=function(t){if(this.barList==null){this.barList=[]}this.barList.push(t)};this.getBarElement=function(t,e){var r=this.getBarStyle(),i=this.color(e),a=this.getData(t)[this.brush.target[e]];var n=this.chart.svg.rect({fill:i,stroke:r.borderColor,"stroke-width":r.borderWidth,"stroke-opacity":r.borderOpacity});if(a==0){n.attr({display:"none"})}if(a!=0){this.addEvent(n,t,e)}return n};this.setActiveEffect=function(e){var r=this.getBarStyle(),i=this.barList,a=this.stackTooltips;for(var n=0;n<i.length;n++){var s=e==i[n]?1:r.disableOpacity;if(a){if(s==1||t.inArray(n,this.tooltipIndexes)!=-1){a[n].attr({opacity:1})}else{a[n].attr({opacity:0})}}i[n].attr({opacity:s})}};this.setActiveEffectOption=function(){var t=this.brush.active;if(this.barList&&this.barList[t]){this.setActiveEffect(this.barList[t])}};this.setActiveEvent=function(t){var e=this;t.on(e.brush.activeEvent,function(r){e.setActiveEffect(t)})};this.setActiveEventOption=function(t){if(this.brush.activeEvent!=null){this.setActiveEvent(t);t.attr({cursor:"pointer"})}};this.getTargetSize=function(){var t=this.axis.y.rangeBand();if(this.brush.size>0){return this.brush.size}else{var e=t-this.brush.outerPadding*2;return e<this.brush.minSize?this.brush.minSize:e}};this.setActiveTooltips=function(t,e){var r=this.brush.display,i=r=="min"?t:e;for(var a=0;a<this.stackTooltips.length;a++){if(a==i||r=="all"){this.stackTooltips[a].css({opacity:1});this.tooltipIndexes.push(a)}}};this.drawStackTooltip=function(t,e,r,i,a,n){var s=this.chart.theme("tooltipPointFontSize"),o="middle",h=0,l=0;if(n=="left"){o="start";h=3;l=s/3}else if(n=="right"){o="end";h=-3;l=s/3}else if(n=="top"){l=-(s/3)}else{l=s}var u=this.chart.text({fill:this.chart.theme("tooltipPointFontColor"),"font-size":s,"font-weight":this.chart.theme("tooltipPointFontWeight"),"text-anchor":o,dx:h,dy:l,opacity:0}).text(this.format(r)).translate(i,a);this.stackTooltips[e]=u;t.append(u)};this.drawStackEdge=function(t){var e=this.chart.theme("barStackEdgeBorderWidth");for(var r=1;r<this.edgeData.length;r++){var i=this.edgeData[r-1],a=this.edgeData[r];for(var n=0;n<this.brush.target.length;n++){if(a[n].width>0&&a[n].height>0){t.append(this.svg.line({x1:i[n].x+i[n].width-i[n].ex,x2:a[n].x+a[n].dx-a[n].ex,y1:i[n].y+i[n].height-i[n].ey,y2:a[n].y+a[n].dy,stroke:a[n].color,"stroke-width":e}))}}}};this.drawBefore=function(){a=e.svg.group();n=r.y.rangeBand();s=this.getTargetSize();this.stackTooltips=[];this.tooltipIndexes=[];this.edgeData=[]};this.draw=function(){var n=null,o=0,h=null,l=this.axis.x.max(),u=this.axis.get("x").reverse;this.eachData(function(c,d){var f=e.svg.group();var v=this.offset("y",d),p=v-s/2,g=r.x(0),b=0,m=0;for(var y=0;y<i.target.length;y++){var x=c[i.target[y]]+b,w=r.x(x),k={x:g<w?g:w,y:p,width:Math.abs(g-w),height:s},B=this.getBarElement(d,y).attr(k);if(!this.edgeData[d]){this.edgeData[d]={}}this.edgeData[d][y]=t.extend({color:this.color(y),dx:k.width,dy:0,ex:u?k.width:0,ey:0},k);g=w;b=x;m+=c[i.target[y]];f.append(B)}if(m>o){o=m;n=d}if(m<l){l=m;h=d}this.drawStackTooltip(f,d,m,g,v,u?"right":"left");this.setActiveEventOption(f);this.addBarElement(f);a.append(f)});if(this.brush.edge){this.drawStackEdge(a)}if(this.brush.display!=null){this.setActiveTooltips(h,n)}this.setActiveEffectOption();return a}};e.setup=function(){return{outerPadding:15,edge:false}};return e}};var l={name:"chart.brush.rangebar",extend:"chart.brush.core",component:function(){var t=function(t,e,r){var i,a,n,s;var o,h;var l,u,c;this.drawBefore=function(){i=t.svg.group();o=r.outerPadding;h=r.innerPadding;a=e.y.rangeBand();n=a-o*2;s=(n-(r.target.length-1)*h)/r.target.length;l=t.theme("barBorderColor");u=t.theme("barBorderWidth");c=t.theme("barBorderOpacity")};this.draw=function(){this.eachData(function(a,o){var d=t.svg.group(),f=this.offset("y",o)-n/2;for(var v=0;v<r.target.length;v++){var p=a[r.target[v]],g=e.x(p[1]),b=e.x(p[0]);var m=t.svg.rect({x:b,y:f,height:s,width:Math.abs(b-g),fill:this.color(v),stroke:l,"stroke-width":u,"stroke-opacity":c});this.addEvent(m,o,v);d.append(m);f+=s+h}i.append(d)});return i}};t.setup=function(){return{outerPadding:2,innerPadding:1}};return t}};var u={name:"chart.brush.column",extend:"chart.brush.bar",component:function(){var t=function(){var t;var e,r,i,a;this.drawBefore=function(){var n=this.brush.outerPadding,s=this.brush.innerPadding,o=this.brush.target.length;t=this.chart.svg.group();e=this.axis.y(0);r=this.axis.x.rangeBand();if(this.brush.size>0){i=this.brush.size;a=i*o+(o-1)*s}else{a=r-n*2;i=(r-n*2-(o-1)*s)/o;i=i<0?0:i}};this.draw=function(){var r=this.getXY(),n=this.getBarStyle();this.eachData(function(s,o){var h=this.offset("x",o)-a/2;for(var l=0;l<this.brush.target.length;l++){var u=s[this.brush.target[l]],c=h+i/2,d=this.axis.y(u),f=d<=e?"top":"bottom";if(Math.abs(e-d)<this.brush.minSize){d=f=="top"?d-this.brush.minSize:d+this.brush.minSize}var v=Math.abs(e-d),p=i<n.borderRadius||v<n.borderRadius?0:n.borderRadius,g=this.getBarElement(o,l,{width:i,height:v,value:u,tooltipX:c,tooltipY:d,position:f,max:r[l].max[o],min:r[l].min[o]});if(d<=e){g.round(i,v,p,p,0,0);g.translate(h,d)}else{g.round(i,v,0,0,p,p);g.translate(h,e)}t.append(g);h+=i+this.brush.innerPadding}});this.drawETC(t);return t};this.drawAnimate=function(t){var e=this.chart.svg,r=this.brush.animate;t.append(e.animate({attributeName:"opacity",from:"0",to:"1",begin:"0s",dur:"1.4s",repeatCount:"1",fill:"freeze"}));t.each(function(t,i){if(i.is("util.svg.element.path")){var a=i.data("translate").split(","),n=parseInt(a[0]),s=parseInt(a[1]),o=parseInt(i.attr("height")),h=r=="top"?s-o:s+o;i.append(e.animateTransform({attributeName:"transform",type:"translate",from:n+" "+h,to:n+" "+s,begin:"0s",dur:"0.7s",repeatCount:"1",fill:"freeze"}))}})}};return t}};var c={name:"chart.brush.stackcolumn",extend:"chart.brush.stackbar",component:function(){var t=a.a.include("util.base");var e=function(e,r,i){var a,n,s;this.getTargetSize=function(){var t=this.axis.x.rangeBand();if(this.brush.size>0){return this.brush.size}else{var e=t-this.brush.outerPadding*2;return e<this.brush.minSize?this.brush.minSize:e}};this.drawBefore=function(){a=e.svg.group();n=r.y(0);s=this.getTargetSize();this.stackTooltips=[];this.tooltipIndexes=[];this.edgeData=[]};this.draw=function(){var n=null,o=0,h=null,l=this.axis.y.max(),u=this.axis.get("y").reverse;this.eachData(function(c,d){var f=e.svg.group();var v=this.offset("x",d),p=v-s/2,g=r.y(0),b=0,m=0;for(var y=0;y<i.target.length;y++){var x=c[i.target[y]]+b,w=r.y(x),k={x:p,y:g>w?w:g,width:s,height:Math.abs(g-w)},B=this.getBarElement(d,y).attr(k);if(!this.edgeData[d]){this.edgeData[d]={}}this.edgeData[d][y]=t.extend({color:this.color(y),dx:0,dy:u?k.height:0,ex:0,ey:u?0:k.height},k);g=w;b=x;m+=c[i.target[y]];f.append(B)}if(m>o){o=m;n=d}if(m<l){l=m;h=d}this.drawStackTooltip(f,d,m,v,g,u?"bottom":"top");this.setActiveEventOption(f);this.addBarElement(f);a.append(f)});if(this.brush.edge){this.drawStackEdge(a)}if(this.brush.display!=null){this.setActiveTooltips(h,n)}this.setActiveEffectOption();return a}};return e}};var d={name:"chart.brush.rangecolumn",extend:"chart.brush.core",component:function(){var t=function(t,e,r){var i,a,n,s;var o,h;var l,u,c;this.drawBefore=function(){i=t.svg.group();o=r.outerPadding;h=r.innerPadding;a=e.x.rangeBand();s=a-o*2;n=(a-o*2-(r.target.length-1)*h)/r.target.length;l=t.theme("columnBorderColor");u=t.theme("columnBorderWidth");c=t.theme("columnBorderOpacity")};this.draw=function(){this.eachData(function(a,o){var d=this.offset("x",o)-s/2;for(var f=0;f<r.target.length;f++){var v=a[r.target[f]],p=e.y(v[1]),g=e.y(v[0]);var b=t.svg.rect({x:d,y:p,width:n,height:Math.abs(g-p),fill:this.color(f),stroke:l,"stroke-width":u,"stroke-opacity":c});this.addEvent(b,o,f);i.append(b);d+=n+h}});return i}};t.setup=function(){return{outerPadding:2,innerPadding:1}};return t}};var f={name:"chart.brush.line",extend:"chart.brush.core",component:function(){var t=a.a.include("util.base");var e=function(){var e;var r,i,a,n,s;this.setActiveEffect=function(t){var e=this.lineList;for(var a=0;a<e.length;a++){var n=t==e[a].element?s:i,o=e[a].element.get(0).attr("stroke");if(e[a].tooltip!=null){e[a].tooltip.style(o,r,n)}e[a].element.attr({opacity:n})}};this.addLineElement=function(t){if(!this.lineList){this.lineList=[]}this.lineList.push(t)};this.createLine=function(e,r){var i=e.x,s=e.y,o=e.value,h=this.brush.symbol=="curve"?this.curvePoints(i):null,l=this.brush.symbol=="curve"?this.curvePoints(s):null,u=null,c=null,d={"stroke-width":a,"stroke-dasharray":n,fill:"transparent",cursor:this.brush.activeEvent!=null?"pointer":"normal"};var f=this.svg.group(),v=null;if(e.length>0){var p=null,g=null;for(var b=0;b<i.length-1;b++){if(!t.typeCheck(["undefined","null"],o[b]))p=b;if(!t.typeCheck(["undefined","null"],o[b+1]))g=b+1;if(p==null||g==null||p==g)continue;var m=this.color(b,r),y=this.getOpacity(b);if(u!=m||c!=y){v=this.svg.path(t.extend({"stroke-opacity":y,stroke:m,x1:i[p]},d));v.css({"pointer-events":"stroke"});v.MoveTo(i[p],s[p]);f.append(v);u=m;c=y}else{v.attr({x2:i[g]})}if(this.brush.symbol=="curve"){v.CurveTo(h.p1[p],l.p1[p],h.p2[p],l.p2[p],i[g],s[g])}else{if(this.brush.symbol=="step"){var x=i[p]+(i[g]-i[p])/2;v.LineTo(x,s[p]);v.LineTo(x,s[g])}v.LineTo(i[g],s[g])}}}return f};this.createTooltip=function(t,e,i){var a=this.brush.display;for(var n=0;n<e.x.length;n++){if(a=="max"&&e.max[n]||a=="min"&&e.min[n]||a=="all"){var o=a=="max"&&e.max[n]?"top":"bottom",h=this.lineList[i].tooltip;if(a=="all"||h==null){var l=this.drawTooltip(this.color(i),r,s);l.control(o,+e.x[n],+e.y[n],this.format(e.value[n]));t.append(l.tooltip);this.lineList[i].tooltip=l}}}};this.getOpacity=function(e){var r=this.brush.opacity,i=this.chart.theme("lineBorderOpacity");if(t.typeCheck("function",r)&&t.typeCheck("number",e)){return r.call(this.chart,this.getData(e),e)}else if(t.typeCheck("number",r)){return r}return i};this.drawLine=function(t){var r=this;for(var i=0;i<t.length;i++){var a=this.createLine(t[i],i);this.addEvent(a,null,i);e.append(a);this.addLineElement({element:a,tooltip:null});if(this.brush.display!=null){this.createTooltip(e,t[i],i)}if(this.brush.activeEvent!=null){(function(t){t.on(r.brush.activeEvent,function(e){r.setActiveEffect(t)})})(a)}}for(var i=0;i<t.length;i++){if(this.brush.active==this.brush.target[i]){this.setActiveEffect(this.lineList[i].element)}}return e};this.drawBefore=function(){e=this.chart.svg.group();r=this.chart.theme("linePointBorderColor");i=this.chart.theme("lineDisableBorderOpacity");a=this.chart.theme("lineBorderWidth");n=this.chart.theme("lineBorderDashArray");s=this.getOpacity(null)};this.draw=function(){return this.drawLine(this.getXY())};this.drawAnimate=function(t){var e=this.chart.svg;t.each(function(t,r){if(r.is("util.svg.element.path")){var i=r.attributes["stroke-dasharray"],a=r.length();if(i=="none"){r.attr({"stroke-dasharray":a});r.append(e.animate({attributeName:"stroke-dashoffset",from:a,to:"0",begin:"0s",dur:"1s",repeatCount:"1"}))}else{r.append(e.animate({attributeName:"opacity",from:"0",to:"1",begin:"0s",dur:"1.5s",repeatCount:"1",fill:"freeze"}))}}})}};e.setup=function(){return{symbol:"normal",active:null,activeEvent:null,display:null,opacity:null}};return e}};var v={name:"chart.brush.area",extend:"chart.brush.line",component:function(){var t=a.a.include("util.base");var e=function(){this.drawArea=function(e){var r=this.chart.svg.group(),i=this.axis.y(this.brush.startZero?0:this.axis.y.min()),a=t.typeCheck("number",this.brush.opacity)?this.brush.opacity:this.chart.theme("areaBackgroundOpacity");for(var n=0;n<e.length;n++){var s=this.createLine(e[n],n).children;for(var o=0;o<s.length;o++){var h=s[o];if(t.typeCheck("function",this.brush.opacity)){a=h.attr("stroke-opacity")}if(e[n].length>0){h.LineTo(h.attr("x2"),i);h.LineTo(h.attr("x1"),i);h.ClosePath()}h.attr({fill:h.attr("stroke"),"fill-opacity":a,"stroke-width":0});r.prepend(h)}if(this.brush.line){r.prepend(this.createLine(e[n],n))}this.addEvent(r,null,n)}return r};this.draw=function(){return this.drawArea(this.getXY())};this.drawAnimate=function(t){t.append(this.chart.svg.animate({attributeName:"opacity",from:"0",to:"1",begin:"0s",dur:"1.5s",repeatCount:"1",fill:"freeze"}))}};e.setup=function(){return{symbol:"normal",active:null,activeEvent:null,display:null,startZero:true,line:true}};return e}};var p={name:"chart.brush.stackarea",extend:"chart.brush.area",component:function(){var t=function(){this.draw=function(){return this.drawArea(this.getStackXY())}};return t}};var g={name:"chart.brush.rangearea",extend:"chart.brush.core",component:function(){var t=function(){this.draw=function(){var t=this.svg.group(),e=this.brush.target,r=this.axis.data,i=this.axis.y.type=="range";for(var a=0;a<e.length;a++){var n=this.svg.polygon({fill:this.color(a),"fill-opacity":this.chart.theme("areaBackgroundOpacity"),"stroke-width":0});for(var s=0;s<r.length;s++){var o=r[s][e[a]];if(i){n.point(this.axis.x(s),this.axis.y(o[0]))}else{n.point(this.axis.x(o[0]),this.axis.y(s))}}for(var s=r.length-1;s>=0;s--){var o=r[s][e[a]];if(i){n.point(this.axis.x(s),this.axis.y(o[1]))}else{n.point(this.axis.x(o[1]),this.axis.y(s))}}t.append(n)}return t}};return t}};var b={name:"chart.brush.scatter",extend:"chart.brush.core",component:function(){var t=a.a.include("util.base");var e=function(){this.getSymbolType=function(e,r){var i=this.brush.symbol,a=this.brush.target[e];if(t.typeCheck("function",i)){var n=i.apply(this.chart,[a,r]);if(n=="triangle"||n=="cross"||n=="rectangle"||n=="rect"||n=="circle"){return{type:"default",uri:n}}else{return{type:"image",uri:n}}}return{type:"default",uri:i}};this.createScatter=function(t,e,r,i){var a=this,n=null,s=h=this.brush.size;var o=this.color(e,r),l=this.chart.theme("scatterBorderColor"),u=this.chart.theme("scatterBorderWidth"),c=this.brush.opacity;if(i.type=="image"){n=this.chart.svg.image({"xlink:href":i.uri,width:s+u,height:h+u,x:t.x-s/2-u,y:t.y-h/2})}else{if(i.uri=="triangle"||i.uri=="cross"){n=this.chart.svg.group({width:s,height:h,opacity:c},function(){if(i.uri=="triangle"){var t=a.chart.svg.polygon();t.point(0,h).point(s,h).point(s/2,0)}else{a.chart.svg.line({stroke:o,"stroke-width":u*2,x1:0,y1:0,x2:s,y2:h});a.chart.svg.line({stroke:o,"stroke-width":u*2,x1:0,y1:s,x2:h,y2:0})}}).translate(t.x-s/2,t.y-h/2)}else{if(i.uri=="rectangle"||i.uri=="rect"){n=this.chart.svg.rect({width:s,height:h,x:t.x-s/2,y:t.y-h/2,opacity:c})}else{n=this.chart.svg.ellipse({rx:s/2,ry:h/2,cx:t.x,cy:t.y,opacity:c})}}if(i.uri!="cross"){n.attr({fill:o,stroke:l,"stroke-width":u}).hover(function(){if(n==a.activeScatter)return;var t={fill:a.chart.theme("scatterHoverColor"),stroke:o,"stroke-width":u*2,opacity:c};if(a.brush.hoverSync){for(var r=0;r<a.cachedSymbol[e].length;r++){t.stroke=a.color(e,r);a.cachedSymbol[e][r].attr(t)}}else{n.attr(t)}},function(){if(n==a.activeScatter)return;var t={fill:o,stroke:l,"stroke-width":u,opacity:a.brush.hide?0:c};if(a.brush.hoverSync){for(var r=0;r<a.cachedSymbol[e].length;r++){t.fill=a.color(e,r);a.cachedSymbol[e][r].attr(t)}}else{n.attr(t)}})}}return n};this.drawScatter=function(e){this.cachedSymbol={};var r=this,i=this.chart.svg.group(),a=this.chart.theme("scatterBorderColor"),n=this.chart.theme("scatterBorderWidth"),s=this.brush.opacity,o=false;for(var h=0;h<e.length;h++){for(var l=0;l<e[h].length;l++){if(!this.cachedSymbol[l]){this.cachedSymbol[l]=[]}if(this.brush.hideZero&&e[h].value[l]===0){continue}var u={x:e[h].x[l],y:e[h].y[l],max:e[h].max[l],min:e[h].min[l],value:e[h].value[l]};if(t.typeCheck(["undefined","null"],u.value))continue;var c=this.getSymbolType(h,u.value),d=this.createScatter(u,l,h,c),f=this.brush.display;if(c.type=="default"&&c.uri!="cross"){this.cachedSymbol[l].push(d)}if(f=="max"&&u.max||f=="min"&&u.min||f=="all"){if(f=="all"||!o){i.append(this.drawTooltip(u.x,u.y,this.format(u.value)));o=true}}if(this.brush.activeEvent!=null){(function(t,e,i,o){var h=e.x,l=e.y,u=r.format(e.value);t.on(r.brush.activeEvent,function(e){if(o.type=="default"&&o.uri!="cross"){if(r.activeScatter!=null){r.activeScatter.attr({fill:r.activeScatter.attributes["stroke"],stroke:a,"stroke-width":n,opacity:r.brush.hide?0:s})}r.activeScatter=t;r.activeScatter.attr({fill:r.chart.theme("scatterHoverColor"),stroke:i,"stroke-width":n*2,opacity:s})}r.activeTooltip.html(u);r.activeTooltip.translate(h,l)});t.attr({cursor:"pointer"})})(d,u,this.color(l,h),this.getSymbolType(h,u.value))}if(this.brush.hide){d.attr({opacity:0})}this.addEvent(d,l,h);i.append(d)}}this.activeTooltip=this.drawTooltip(0,0,"");i.append(this.activeTooltip);return i};this.drawTooltip=function(t,e,r){return this.chart.text({y:-this.brush.size,"text-anchor":"middle",fill:this.chart.theme("tooltipPointFontColor"),"font-size":this.chart.theme("tooltipPointFontSize"),"font-weight":this.chart.theme("tooltipPointFontWeight"),opacity:this.brush.opacity},r).translate(t,e)};this.draw=function(){return this.drawScatter(this.getXY())};this.drawAnimate=function(){var t=this.chart.area();return this.chart.svg.animateTransform({attributeName:"transform",type:"translate",from:t.x+" "+t.height,to:t.x+" "+t.y,begin:"0s",dur:"0.4s",repeatCount:"1"})}};e.setup=function(){return{symbol:"circle",size:7,hide:false,hideZero:false,hoverSync:false,activeEvent:null,display:null,opacity:1,clip:false}};return e}};var m={name:"chart.brush.bubble",extend:"chart.brush.core",component:function(){var t=a.a.include("util.base");var e=a.a.include("util.math");var r=function(){var r=this,i=null,a=null;this.getFormatText=function(e,r){if(t.typeCheck("function",this.brush.format)){return this.format(this.axis.data[r])}return e};this.getBubbleRadius=function(r,n){var s=this.brush.scaleKey;if(s!=null){var o=this.axis.data[n][s];r=t.typeCheck("number",o)?o:r}return e.scaleValue(r,i,a,this.brush.min,this.brush.max)};this.createBubble=function(t,e,r){var i=this.getBubbleRadius(t.value,r),a=this.svg.group().translate(t.x,t.y);a.append(this.svg.circle({r:i,fill:e,"fill-opacity":this.chart.theme("bubbleBackgroundOpacity"),stroke:e,"stroke-width":this.chart.theme("bubbleBorderWidth")}));if(this.brush.showText){var n=this.getFormatText(t.value,r);a.append(this.chart.text({"font-size":this.chart.theme("bubbleFontSize"),fill:this.chart.theme("bubbleFontColor"),"text-anchor":"middle",dy:3}).text(n))}this.bubbleList.push(a);return a};this.setActiveEffect=function(t){var e=this.bubbleList;for(var r=0;r<e.length;r++){var i=e[r]==t?1:this.chart.theme("bubbleBackgroundOpacity");e[r].get(0).attr({opacity:i});e[r].get(1).attr({opacity:i})}};this.drawBubble=function(t){var e=this.svg.group();for(var i=0;i<t.length;i++){for(var a=0;a<t[i].x.length;a++){var n=this.createBubble({x:t[i].x[a],y:t[i].y[a],value:t[i].value[a]},this.color(a,i),a);if(this.brush.activeEvent!=null){(function(t){t.on(r.brush.activeEvent,function(e){r.setActiveEffect(t)});t.attr({cursor:"pointer"})})(n)}this.addEvent(n,a,i);e.append(n)}}var s=this.bubbleList[this.brush.active];if(s!=null){this.setActiveEffect(s)}return e};this.drawBefore=function(){var t=this.brush.scaleKey;if(t!=null){var e=[];for(var r=0;r<this.axis.data.length;r++){e.push(this.axis.data[r][t])}i=Math.min.apply(this,e);a=Math.max.apply(this,e)}else{i=this.axis.y.min();a=this.axis.y.max()}this.bubbleList=[]};this.draw=function(){return this.drawBubble(this.getXY())};this.drawAnimate=function(t){t.each(function(t,e){var i=e.children[0];i.append(r.svg.animateTransform({attributeType:"xml",attributeName:"transform",type:"scale",from:"0",to:"1",dur:"0.7s",fill:"freeze",repeatCount:"1"}));i.append(r.svg.animate({attributeType:"xml",attributeName:"fill-opacity",from:"0",to:r.chart.theme("bubbleBackgroundOpacity"),dur:"1.4s",repeatCount:"1",fill:"freeze"}))})}};r.setup=function(){return{min:5,max:30,scaleKey:null,showText:false,format:null,active:null,activeEvent:null}};return r}};var y={name:"chart.brush.pie",extend:"chart.brush.core",component:function(){var t=a.a.include("util.base");var e=a.a.include("util.math");var r=a.a.include("util.color");var i=function(){var i=this,a=3;var n=0,s=0,o=1;var h,l={};this.setActiveEvent=function(t,r,i,a){var n=this.chart.theme("pieActiveDistance"),s=Math.cos(e.radian(a))*n,o=Math.sin(e.radian(a))*n;t.translate(r+s,i+o)};this.setActiveTextEvent=function(t,r,i,a,n,s){var o=s?this.chart.theme("pieActiveDistance"):0,h=r+Math.cos(e.radian(a))*((n+o)/2),l=i+Math.sin(e.radian(a))*((n+o)/2);t.translate(h,l)};this.getFormatText=function(t,e,r){var i=t;if(typeof this.brush.format=="function"){return this.format(i,e,r)}else{if(!e){return i}return i+": "+this.format(e)}};this.drawPie=function(t,r,i,a,n,s){var o=this.chart.svg.group();if(n==360){var h=this.chart.svg.circle({cx:t,cy:r,r:i,fill:s,stroke:this.chart.theme("pieBorderColor")||s,"stroke-width":this.chart.theme("pieBorderWidth")});o.append(h);return o}var l=this.chart.svg.path({fill:s,stroke:this.chart.theme("pieBorderColor")||s,"stroke-width":this.chart.theme("pieBorderWidth")});var u=e.rotate(0,-i,e.radian(a)),c=u.x,d=u.y;l.MoveTo(c,d);u=e.rotate(c,d,e.radian(n));o.translate(t,r);l.Arc(i,i,0,n>180?1:0,1,u.x,u.y).LineTo(0,0).ClosePath();o.append(l);o.order=1;return o};this.drawPie3d=function(t,r,i,a,n,s){var o=this.chart.svg.group(),h=this.chart.svg.path({fill:s,stroke:this.chart.theme("pieBorderColor")||s,"stroke-width":this.chart.theme("pieBorderWidth")});var l=e.rotate(0,-i,e.radian(a)),u=l.x,c=l.y;h.MoveTo(u,c);l=e.rotate(u,c,e.radian(n));o.translate(t,r);h.Arc(i,i,0,n>180?1:0,1,l.x,l.y);var d=l.y+10,f=l.x+5,v=u+5,p=c+10;h.LineTo(f,d);h.Arc(i,i,0,n>180?1:0,0,v,p);h.ClosePath();o.append(h);o.order=1;return o};this.drawText=function(t,r,i,h,l){var u=this.svg.group({visibility:!this.brush.showText?"hidden":"visible"}),c=i+90>180?true:false;if(l===""||!l){return u}if(this.brush.showText=="inside"){var d=t+Math.cos(e.radian(i))*(h/2),f=r+Math.sin(e.radian(i))*(h/2);var l=this.chart.text({"font-size":this.chart.theme("pieInnerFontSize"),fill:this.chart.theme("pieInnerFontColor"),"text-anchor":"middle",y:a},l);l.translate(d,f);u.append(l);u.order=2}else{var v=this.chart.theme("pieOuterLineRate"),p=Math.abs(i-n);if(p<2){if(s==0){s=v}var g=v*.05;s-=g;o-=.25}else{s=v;o=1}if(s>1.2){var b=this.chart.theme("pieOuterLineSize"),m=h*s,d=t+Math.cos(e.radian(i))*h,f=r+Math.sin(e.radian(i))*h,y=t+Math.cos(e.radian(i))*m,x=r+Math.sin(e.radian(i))*m,w=c?y-b:y+b;var k=this.svg.path({fill:"transparent",stroke:this.chart.theme("pieOuterLineColor"),"stroke-width":this.chart.theme("pieOuterLineWidth"),"stroke-opacity":o});k.MoveTo(d,f).LineTo(y,x).LineTo(w,x);var l=this.chart.text({"font-size":this.chart.theme("pieOuterFontSize"),fill:this.chart.theme("pieOuterFontColor"),"fill-opacity":o,"text-anchor":c?"end":"start",y:a},l);l.translate(w+(c?-3:3),x);u.append(l);u.append(k);u.order=0;n=i}}return u};this.drawUnit=function(e,a,n){var s=this.getProperty(e),o=s.centerX,h=s.centerY,u=s.outerRadius;var c=this.brush.target,d=this.brush.active,f=360,v=0,p=0;for(var g=0;g<c.length;g++){p+=a[c[g]]}for(var g=0;g<c.length;g++){if(a[c[g]]==0)continue;var b=a[c[g]],m=f*(b/p);if(this.brush["3d"]){var y=this.drawPie3d(o,h,u,v,m,r.darken(this.color(g),.5));n.append(y)}v+=m}v=0;for(var g=0;g<c.length;g++){var b=a[c[g]],m=f*(b/p),x=v+m/2-90,w=Math.abs(v-m)==360,k=this.drawPie(o,h,u,v,m,this.color(g)),B=this.drawText(o,h,x,u,this.getFormatText(c[g],b,p));if(!w){if(d==c[g]||t.inArray(c[g],d)!=-1){if(this.brush.showText=="inside"){this.setActiveTextEvent(B.get(0),o,h,x,u,true)}this.setActiveEvent(k,o,h,x);l[x]=true}if(this.brush.activeEvent!=null){(function(t,e,r,a,n,s){t.on(i.brush.activeEvent,function(o){if(!l[n]){if(i.brush.showText=="inside"){i.setActiveTextEvent(e,r,a,n,s,true)}i.setActiveEvent(t,r,a,n);l[n]=true}else{if(i.brush.showText=="inside"){i.setActiveTextEvent(e,r,a,n,s,false)}t.translate(r,a);l[n]=false}});t.attr({cursor:"pointer"})})(k,B.get(0),o,h,x,u)}}i.addEvent(k,e,g);n.append(k);n.append(B);v+=m}};this.drawNoData=function(t){var e=this.getProperty(0);t.append(this.drawPie(e.centerX,e.centerY,e.outerRadius,0,360,this.chart.theme("pieNoDataBackgroundColor")))};this.drawBefore=function(){h=this.chart.svg.group()};this.draw=function(){if(this.listData().length==0){this.drawNoData(h)}else{this.eachData(function(t,e){this.drawUnit(e,t,h)})}return h};this.getProperty=function(t){var e=this.axis.c(t);var r=e.width,i=e.height,a=e.x,n=e.y,s=r;if(i<s){s=i}return{centerX:r/2+a,centerY:i/2+n,outerRadius:s/2}}};i.setup=function(){return{clip:false,showText:null,format:null,"3d":false,active:null,activeEvent:null}};return i}};var x={name:"chart.brush.donut",extend:"chart.brush.pie",component:function(){var t=a.a.include("util.base");var e=a.a.include("util.math");var r=a.a.include("util.color");var i=function(){var i=this,a={};this.drawDonut=function(t,r,i,a,n,s,o){o["stroke-width"]=a-i;if(s>=360){s=359.9999}var h=this.chart.svg.group(),l=this.chart.svg.path(o),u=Math.abs(a-i);var c=e.rotate(0,-a,e.radian(n)),d=c.x,f=c.y;l.MoveTo(d,f);c=e.rotate(d,f,e.radian(s));h.translate(t,r);l.Arc(a,a,0,s>180?1:0,1,c.x,c.y);l.css({"pointer-events":"stroke"});h.append(l);h.order=1;return h};this.drawDonut3d=function(t,r,i,a,n,s,o){var h=this.chart.svg.group(),l=this.chart.svg.path(o),u=Math.abs(a-i);a+=u/2;i=a-u;var c=e.rotate(0,-a,e.radian(n)),d=c.x,f=c.y;var v=e.rotate(0,-i,e.radian(n)),p=v.x,g=v.y;l.MoveTo(d,f);c=e.rotate(d,f,e.radian(s));v=e.rotate(p,g,e.radian(s));h.translate(t,r);l.Arc(a,a,0,s>180?1:0,1,c.x,c.y);var b=c.y+10,m=c.x+5,y=v.y+10,x=v.x+5,w=d+5,k=f+10,B=p+5,T=g+10;l.LineTo(m,b);l.Arc(a,a,0,s>180?1:0,0,w,k);l.ClosePath();h.append(l);var C=this.chart.svg.path(o);C.MoveTo(p,g);C.Arc(i,i,0,s>180?1:0,1,v.x,v.y);C.LineTo(x,y);C.Arc(i,i,0,s>180?1:0,0,B,T);C.ClosePath();h.append(C);h.order=1;return h};this.drawDonut3dBlock=function(t,r,i,a,n,s,o){var h=this.chart.svg.group(),l=this.chart.svg.path(o),u=Math.abs(a-i);a+=u/2;i=a-u;var c=e.rotate(0,-a,e.radian(n)),d=c.x,f=c.y;var v=e.rotate(0,-i,e.radian(n)),p=v.x,g=v.y;l.MoveTo(d,f);c=e.rotate(d,f,e.radian(s));v=e.rotate(p,g,e.radian(s));h.translate(t,r);var b=c.y+10,m=c.x+5,y=v.y+10,x=v.x+5;var w=this.chart.svg.path(o);w.MoveTo(c.x,c.y).LineTo(m,b).LineTo(x,y).LineTo(v.x,v.y).ClosePath();h.append(w);h.order=1;return h};this.drawUnit=function(e,n,s){var o=this.getProperty(e),h=o.centerX,l=o.centerY,u=o.innerRadius,c=o.outerRadius;var d=this.brush.target,f=this.brush.active,v=360,p=0,g=0,b=0;for(var m=0;m<d.length;m++){g+=n[d[m]]}if(this.brush["3d"]){for(var m=0;m<d.length;m++){var y=n[d[m]],x=v*(y/g),w=this.drawDonut3dBlock(h,l,u,c,p,x,{fill:r.darken(this.color(m),.5)},m==d.length-1);s.append(w);p+=x}p=0;for(var m=0;m<d.length;m++){var y=n[d[m]],x=v*(y/g),w=this.drawDonut3d(h,l,u,c,p,x,{fill:r.darken(this.color(m),.5)},m==d.length-1);s.append(w);p+=x}}p=0;for(var m=0;m<d.length;m++){if(n[d[m]]==0)continue;var y=n[d[m]],x=v*(y/g),k=p+x/2-90,B=Math.abs(p-x)==360,T=this.brush.showText=="inside"?this.brush.size+u+c:c,C=this.drawDonut(h,l,u,c,p,x,{stroke:this.color(m),fill:"transparent"}),S=this.drawText(h,l,k,T,this.getFormatText(d[m],y));if(!B){if(f==d[m]||t.inArray(d[m],f)!=-1){if(this.brush.showText=="inside"){this.setActiveTextEvent(S.get(0),h,l,k,T,true)}this.setActiveEvent(C,h,l,k);a[k]=true}if(this.brush.activeEvent!=null){(function(t,e,r,n,s,o){t.on(i.brush.activeEvent,function(h){if(!a[s]){if(i.brush.showText=="inside"){i.setActiveTextEvent(e,r,n,s,o,true)}i.setActiveEvent(t,r,n,s);a[s]=true}else{if(i.brush.showText=="inside"){i.setActiveTextEvent(e,r,n,s,o,false)}t.translate(r,n);a[s]=false}});t.attr({cursor:"pointer"})})(C,S.get(0),h,l,k,T)}}this.addEvent(C,e,m);s.append(C);s.append(S);p+=x;b+=y}if(this.brush.showValue){this.drawTotalValue(s,h,l,b)}};this.drawNoData=function(t){var e=this.getProperty(0);t.append(this.drawDonut(e.centerX,e.centerY,e.innerRadius,e.outerRadius,0,360,{stroke:this.chart.theme("pieNoDataBackgroundColor"),fill:"transparent"}));if(this.brush.showValue){this.drawTotalValue(t,e.centerX,e.centerY,0)}};this.drawTotalValue=function(t,e,r,i){var a=this.chart.theme("pieTotalValueFontSize");var n=this.chart.text({"font-size":a,"font-weight":this.chart.theme("pieTotalValueFontWeight"),fill:this.chart.theme("pieTotalValueFontColor"),"text-anchor":"middle",dy:a/3},this.format(i));n.translate(e,r);t.append(n)};this.getProperty=function(t){var e=this.axis.c(t);var r=e.width,i=e.height,a=e.x,n=e.y,s=r;if(i<s){s=i}if(this.brush.size>=s/2){this.brush.size=s/4}var o=s/2-this.brush.size/2;return{centerX:r/2+a,centerY:i/2+n,outerRadius:o,innerRadius:o-this.brush.size}}};i.setup=function(){return{size:50,showValue:false}};return i}};var w={name:"chart.brush.polygon.column3d",extend:"chart.brush.polygon.core",component:function(){var t=a.a.include("util.color");var e=a.a.include("chart.polygon.cube");var r=function(){var r,i;this.createColumn=function(a,n,s,o){var h=r,l=i,u=this.axis.x(s)-h/2,c=this.axis.y(a[n]),d=this.axis.y(0),f=this.axis.z(o)-l/2,v=this.color(o);return this.createPolygon(new e(u,d,f,h,c-d,l),function(e){var r=this.svg.group();for(var i=0;i<e.faces.length;i++){var h=e.faces[i];var l=this.svg.polygon({fill:v,"fill-opacity":this.chart.theme("polygonColumnBackgroundOpacity"),stroke:t.darken(v,this.chart.theme("polygonColumnBorderOpacity")),"stroke-opacity":this.chart.theme("polygonColumnBorderOpacity")});for(var u=0;u<h.length;u++){var c=e.vectors[h[u]];l.point(c.x,c.y)}r.append(l)}if(a[n]!=0){this.addEvent(r,s,o)}return r})};this.drawBefore=function(){var t=this.brush.padding,e=this.axis.x.rangeBand(),a=this.axis.z.rangeBand();r=this.brush.width>0?this.brush.width:e-t*2;i=this.brush.height>0?this.brush.height:a-t*2};this.draw=function(){var t=this.chart.svg.group(),e=this.listData(),r=this.brush.target;for(var i=0;i<e.length;i++){for(var a=0;a<r.length;a++){t.append(this.createColumn(e[i],r[a],i,a))}}return t}};r.setup=function(){return{width:0,height:0,padding:20,clip:false}};return r}};var k={name:"chart.brush.polygon.line3d",extend:"chart.brush.polygon.core",component:function(){var t=a.a.include("util.color");var e=a.a.include("chart.polygon.point");var r=function(){this.createLine=function(r,i,a,n){var s=this.color(a,n),o=this.axis.z.rangeBand()-this.brush.padding*2,h=this.axis.x(a),l=this.axis.y(r[a][i]),u=this.axis.z(n)-o/2,c=this.axis.x(a+1),d=this.axis.y(r[a+1][i]),f=this.axis.z(n)+o/2,v=null;var p=this.chart.svg.polygon({fill:s,"fill-opacity":this.chart.theme("polygonLineBackgroundOpacity"),stroke:t.darken(s,this.chart.theme("polygonLineBorderOpacity")),"stroke-opacity":this.chart.theme("polygonLineBorderOpacity")});var g=[new e(h,l,u),new e(h,l,f),new e(c,d,f),new e(c,d,u)];for(var b=0;b<g.length;b++){this.createPolygon(g[b],function(t){var e=t.vectors[0];p.point(e.x,e.y);if(v==null){v=t}else{if(e.z>v.vectors[0].z){v=t}}})}p.order=this.axis.depth-v.max().z;return p};this.draw=function(){var t=this.chart.svg.group(),e=this.listData(),r=this.brush.target;for(var i=0;i<e.length-1;i++){for(var a=0;a<r.length;a++){t.append(this.createLine(e,r[a],i,a))}}return t}};r.setup=function(){return{padding:10,clip:false}};return r}};var B={name:"chart.widget.cross",extend:"chart.widget.core",component:function(){var t=a.a.include("util.base");var e=function(e,r,i){var a=this;var n=50,s=18,o=n/10;var h=0,l=0;var u,c,d,f,v;var p=[];function g(t,e,r){if(!p[t]){var i=document.createElementNS("http://www.w3.org/2000/svg","tspan");e.element.appendChild(i);p[t]=i}p[t].textContent=r}this.drawBefore=function(){r=this.chart.axis(i.axis);h=e.padding("left")+r.area("x");l=e.padding("top")+r.area("y");u=e.svg.group({visibility:"hidden"},function(){if(t.typeCheck("function",i.yFormat)){c=e.svg.line({x1:0,y1:0,x2:r.area("width"),y2:0,stroke:e.theme("crossBorderColor"),"stroke-width":e.theme("crossBorderWidth"),opacity:e.theme("crossBorderOpacity")});v=e.svg.group({},function(){e.svg.polygon({fill:e.theme("crossBalloonBackgroundColor"),"fill-opacity":e.theme("crossBalloonBackgroundOpacity"),points:a.balloonPoints("left",n,s,o)});e.text({"font-size":e.theme("crossBalloonFontSize"),fill:e.theme("crossBalloonFontColor"),"text-anchor":"middle",x:n/2,y:12})}).translate(-(n+o),0)}if(t.typeCheck("function",i.xFormat)){d=e.svg.line({x1:0,y1:0,x2:0,y2:r.area("height"),stroke:e.theme("crossBorderColor"),"stroke-width":e.theme("crossBorderWidth"),opacity:e.theme("crossBorderOpacity")});f=e.svg.group({},function(){e.svg.polygon({fill:e.theme("crossBalloonBackgroundColor"),"fill-opacity":e.theme("crossBalloonBackgroundOpacity"),points:a.balloonPoints("bottom",n,s,o)});e.text({"font-size":e.theme("crossBalloonFontSize"),fill:e.theme("crossBalloonFontColor"),"text-anchor":"middle",x:n/2,y:17})}).translate(0,r.area("height")+o)}}).translate(h,l)};this.draw=function(){this.on("axis.mouseover",function(t){u.attr({visibility:"visible"})},i.axis);this.on("axis.mouseout",function(t){u.attr({visibility:"hidden"})},i.axis);this.on("axis.mousemove",function(t){u.attr({visibility:"visible"});var e=3;var p=t.bgX-h+e,b=t.bgY-l+e;if(c){c.attr({y1:b,y2:b})}if(d){d.attr({x1:p,x2:p})}if(v){v.translate(-(n+o),b-s/2);var m=r.y.invert(t.chartY+e),y=i.yFormat.call(a.chart,m);g(0,v.get(1),y)}if(f){f.translate(p-n/2,r.area("height")+o);var m=r.x.invert(t.chartX+e),y=i.xFormat.call(a.chart,m);g(1,f.get(1),y)}},i.axis);return u}};e.setup=function(){return{axis:0,xFormat:null,yFormat:null}};return e}};var T={name:"chart.widget.legend",extend:"chart.widget.core",component:function(){var t=a.a.include("util.base");var e=17,r=13,i=5,n=5.5,s=1.2,o=2;var h=function(a,h,l){var u=[];var c={};function d(e){var r=[0];if(t.typeCheck("array",e)){r=e}else if(t.typeCheck("integer",e)){r=[e]}return r}function f(){var t=d(l.brush),e=[];for(var r=0;r<t.length;r++){e[r]=a.get("brush",t[r])}return e}function v(t){if(!l.filter)return;if(!u[t.index]){u[t.index]={}}for(var e=0;e<t.target.length;e++){u[t.index][t.target[e]]=true}}function p(t){var e=[],r=[],i=t[0].index;for(var n in u[i]){if(u[i][n]){e.push(n);r.push(c[n])}}for(var s=0;s<t.length;s++){a.updateBrush(t[s].index,{target:e,colors:r})}if(!a.isRender()){a.render()}a.emit("legend.filter",[e])}this.getLegendIcon=function(h){var d=[],v=h.target,g=v.length;for(var b=0;b<g;b++){var m=a.svg.group(),y=h.target[b],x=y,w=a.color(b,l.colors||h.colors);c[y]=w;if(t.typeCheck("function",l.format)){x=this.format(y)}var k=a.svg.getTextSize(x,{fontSize:a.theme("legendFontSize")});if(l.filter){m.append(a.svg.line({x1:0,x2:e,y1:-(n/2),y2:-(n/2),stroke:w,"stroke-width":r,"stroke-linecap":"round"}));m.append(a.svg.circle({cx:e,cy:-(n/2),r:n,fill:a.theme("legendSwitchCircleColor")}));m.append(a.text({x:e+i*2,y:0,"font-size":a.theme("legendFontSize"),fill:a.theme("legendFontColor"),"text-anchor":"start"},x));d.push({icon:m,width:e+k.width+i*2.5,height:r+i/2});(function(t,r){r.attr({cursor:"pointer"});r.on("click",function(i){if(u[h.index][t]){r.get(0).attr({stroke:a.theme("legendSwitchDisableColor")});r.get(2).attr({fill:a.theme("legendSwitchDisableColor")});r.get(1).attr({cx:0});u[h.index][t]=false}else{r.get(0).attr({stroke:c[t]});r.get(2).attr({fill:a.theme("legendFontColor")});r.get(1).attr({cx:e});u[h.index][t]=true}p(l.brushSync?f():[h])})})(y,m)}else{var B=a.theme("legendFontSize");if(l.icon!=null){var T=t.typeCheck("function",l.icon)?l.icon.apply(a,[y]):l.icon;m.append(a.text({x:0,y:o,"font-size":B,fill:w},T))}else{m.append(a.svg.circle({cx:B/2,cy:-o,r:B/2,fill:w}))}m.append(a.text({x:B*s,y:0,"font-size":B,fill:a.theme("legendFontColor"),"text-anchor":"start"},x));d.push({icon:m,width:B+k.width+i*2,height:r+i/2})}}return d};this.draw=function(){var t=a.svg.group();var e=0,r=0,n=0,s=0,o=0,h=0,u=d(l.brush);var c=[];for(var f=0;f<u.length;f++){var p=u[f];if(l.brushSync&&f>0)continue;var g=a.get("brush",u[p]),b=this.getLegendIcon(g);for(var m=0;m<b.length;m++){t.append(b[m].icon);b[m].icon.translate(e,r);if(l.orient=="bottom"||l.orient=="top"){if(e+b[m].width>a.area("x2")){e=0;r+=b[m].height;h+=b[m].height;b[m].icon.translate(e,r);c.push(n);n=0}e+=b[m].width+i*2.5;n+=b[m].width+i*2.5;if(h<b[m].height){h=b[m].height}}else{r+=b[m].height;s+=b[m].height;if(o<b[m].width){o=b[m].width}}}if(n>0){c.push(n)}if(c.length>0){n=Math.max.apply(Math,c)}v(g)}if(l.orient=="bottom"||l.orient=="top"){var r=(l.orient=="bottom"?a.area("y2")+a.padding("bottom")-h:a.area("y")-a.padding("top"))+i;if(l.align=="start"){e=a.area("x")}else if(l.align=="center"){e=a.area("x")+(a.area("width")/2-n/2)}else if(l.align=="end"){e=a.area("x2")-n}}else{var e=(l.orient=="left"?a.area("x")-a.padding("left"):a.area("x2")+a.padding("right")-o)+i;if(l.align=="start"){r=a.area("y")}else if(l.align=="center"){r=a.area("y")+(a.area("height")/2-s/2)}else if(l.align=="end"){r=a.area("y2")-s}}t.translate(Math.floor(e)+l.dx,Math.floor(r)+l.dy);return t}};h.setup=function(){return{orient:"bottom",align:"center",filter:false,icon:null,dx:0,dy:0,colors:null,brushSync:false,brush:0,format:null}};return h}};var C={name:"chart.widget.title",extend:"chart.widget.core",component:function(){var t=25,e=20;var r=function(r,i,a){var n=0,s=0,o="middle";this.drawBefore=function(){var i=r.axis(a.axis);if(i){if(a.orient=="bottom"){s=i.area("y2")+i.padding("bottom")-e}else if(a.orient=="top"){s=i.area("y")-i.padding("top")+t}else{s=i.area("y")+i.area("height")/2}if(a.align=="middle"){n=i.area("x")+i.area("width")/2;o="middle"}else if(a.align=="start"){n=i.area("x")-i.padding("left")+e;o="start"}else{n=i.area("x2")+i.padding("right")-e;o="end"}n+=r.area("x");s+=r.area("y")}else{if(a.orient=="bottom"){s=r.area("y2")+r.padding("bottom")-e}else if(a.orient=="top"){s=e}else{s=r.area("y")+r.area("height")/2}if(a.align=="middle"){n=r.area("x")+r.area("width")/2;o="middle"}else if(a.align=="start"){n=r.area("x");o="start"}else{n=r.area("x2");o="end"}}};this.draw=function(){var t=r.svg.getTextSize(a.text);var e=t.width/2,i=t.height/2;var h=r.text({x:n+a.dx,y:s+a.dy,"text-anchor":o,fill:a.color||r.theme("titleFontColor"),"font-size":a.size||r.theme("titleFontSize"),"font-weight":r.theme("titleFontWeight")},a.text);if(a.orient=="center"){if(a.align=="start"){h.rotate(-90,n+a.dx+e,s+a.dy+i)}else if(a.align=="end"){h.rotate(90,n+a.dx-e,s+a.dy+i)}}return h}};r.setup=function(){return{axis:null,orient:"top",align:"middle",text:"",dx:0,dy:0,size:null,color:null}};return r}};var S={name:"chart.widget.tooltip",extend:"chart.widget.core",component:function(){var t=a.a.include("util.base");var e=a.a.include("util.color");var r=7,i=7,n=1.2;var s=function(a,s,o){var h=this,l={},u=0;function c(e,r){var i=null,a=null;if(t.typeCheck("function",o.format)){var n=h.format(r,e);if(t.typeCheck("object",n)){i=n.key;a=n.value}else{a=n}}else{if(e&&!r){a=e}if(e&&r){i=e;a=h.format(r[e])}}return{key:i,value:a}}function d(e){var i=l[e.brush.index],a=i.get(1).get(1),n=0,s=0,h=false;if(e.dataKey&&o.all===false){d([e.dataKey])}else{d(e.brush.target)}function d(i){for(var o=0;o<i.length;o++){var l=i[o],d=c(l,e.data);a.get(o).attr({x:r});if(d.key){a.get(o).get(0).text(d.key)}else{a.get(o).get(1).attr({"text-anchor":"middle"});h=true}if(!t.typeCheck(["null","undefined"],d.value)){a.get(o).get(1).attr({x:0}).text(d.value)}n=Math.max(n,a.get(o).size().width)}s=i.length*u}return{width:n+r*3,height:s+r,onlyValue:h}}function f(e){var r=h.getIndexArray(h.widget.brush);return t.inArray(e,r)==-1?false:true}function v(t){var r=t.brush.target;for(var i=0;i<r.length;i++){if(r[i]==t.dataKey){return e.lighten(h.chart.color(i,t.brush.colors))}}return null}function p(t,e,a){var n=t.bgX-e.width/2,s=t.bgY-e.height-i-r/2,o=2;if(a=="left"||a=="right"){s=t.bgY-e.height/2-r/2}if(a=="left"){n=t.bgX-e.width-i}else if(a=="right"){n=t.bgX+i;o=-2}else if(a=="bottom"){s=t.bgY+i*2}return{x:n,y:s,c:o}}function g(){var t=false,e=null,n=null,s=null;h.on("mouseover",function(c,g){if(t||!f(c.brush.index))return;if(!c.dataKey&&!c.data)return;e=d(c);n=o.orient;s=a.axis(c.brush.axis);var b=p(g,e,n),m=b.x-a.padding("left"),y=b.y-a.padding("top");if(o.flip){if(n=="left"&&m<0){n="right"}else if(n=="right"&&m+e.width>s.area("width")){n="left"}else if(n=="top"&&y<0){n="bottom"}else if(n=="bottom"&&y+e.height>s.area("height")){n="top"}}var x=l[c.brush.index],w=x.get(0),k=x.get(1).get(0),B=x.get(1).get(1).translate(0,n!="bottom"?u:u+i),T=a.theme("tooltipBorderColor")||v(c),C=a.theme("tooltipLineColor")||v(c);k.attr({points:h.balloonPoints(n,e.width,e.height,o.anchor?i:null),stroke:T});w.attr({stroke:C});B.each(function(t,i){i.get(1).attr({x:e.onlyValue?e.width/2:e.width-r})});x.attr({visibility:"visible"});t=true});h.on("mousemove",function(r,i){if(!t)return;var o=l[r.brush.index],h=o.get(0),u=o.get(1),c=p(i,e,n);h.attr({x1:i.bgX+c.c,y1:a.padding("top")+s.area("y"),x2:i.bgX+c.c,y2:a.padding("top")+s.area("y2")});u.translate(c.x,c.y)});h.on("mouseout",function(e,r){if(!t)return;var i=l[e.brush.index];i.attr({visibility:"hidden"});t=false})}this.drawBefore=function(){u=a.theme("tooltipFontSize")*n};this.draw=function(){var t=a.svg.group(),e=this.getIndexArray(this.widget.brush);for(var i=0;i<e.length;i++){var s=a.get("brush",e[i]),h=[""];if(o.all&&s.target.length>1){for(var u=1;u<s.target.length;u++){h.push("")}}l[s.index]=a.svg.group({visibility:"hidden"},function(){a.svg.line({"stroke-width":a.theme("tooltipLineWidth"),visibility:o.line?"visible":"hidden"});a.svg.group({},function(){a.svg.polygon({fill:a.theme("tooltipBackgroundColor"),"fill-opacity":a.theme("tooltipBackgroundOpacity"),"stroke-width":a.theme("tooltipBorderWidth")});var t=a.texts({"font-size":a.theme("tooltipFontSize"),fill:a.theme("tooltipFontColor")},h,n);for(var e=0;e<h.length;e++){t.get(e).append(a.svg.tspan({"text-anchor":"start","font-weight":"bold",x:r}));t.get(e).append(a.svg.tspan({"text-anchor":"end"}))}})});t.append(l[s.index])}g();return t}};s.setup=function(){return{orient:"top",anchor:true,all:false,line:false,flip:false,format:null,brush:0}};return s}};var z={name:"chart.widget.polygon.rotate3d",extend:"chart.widget.polygon.core",component:function(){var t=a.a.include("util.base");var e=180;var r=function(){var r=this;function i(t){var i=r.chart.axis(t),a=false,n=0,s=0,o=0,h=0,l=null,u=r.widget.unit,c=i.area("width"),d=i.area("height");r.on("axis.mousedown",f,t);r.on("axis.mousemove",v,t);r.on("axis.mouseup",p,t);r.on("bg.mouseup",p);r.on("chart.mouseup",p);function f(t){if(a)return;a=true;n=t.chartX;s=t.chartY;o=i.degree.x;h=i.degree.y}function v(t){if(!a)return;var f=t.chartX-n,v=t.chartY-s,p=o+Math.floor(v/d*e),g=h-Math.floor(f/c*e);if(p%u!=0&&g%u!=0)return;var b=p+":"+g;if(l==b)return;i.set("degree",{x:p,y:g});r.chart.render();l=b}function p(t){if(!a)return;a=false;n=0;s=0}}this.draw=function(){var e=t.typeCheck("array",this.widget.axis)?this.widget.axis:[this.widget.axis];for(var r=0;r<e.length;r++){i(e[r])}}};r.setup=function(){return{unit:5,axis:[0]}};return r}};n.use([s,o,l,u,c,d,f,v,p,g,b,m,y,x,w,k,B,T,C,S,z])}});