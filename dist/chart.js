(function(t){function e(e){var r=e[0];var h=e[1];var s=e[2];var o,l,c=0,d=[];for(;c<r.length;c++){l=r[c];if(a[l]){d.push(a[l][0])}a[l]=0}for(o in h){if(Object.prototype.hasOwnProperty.call(h,o)){t[o]=h[o]}}if(u)u(e);while(d.length){d.shift()()}n.push.apply(n,s||[]);return i()}function i(){var t;for(var e=0;e<n.length;e++){var i=n[e];var r=true;for(var s=1;s<i.length;s++){var o=i[s];if(a[o]!==0)r=false}if(r){n.splice(e--,1);t=h(h.s=i[0])}}return t}var r={};var a={0:0};var n=[];function h(e){if(r[e]){return r[e].exports}var i=r[e]={i:e,l:false,exports:{}};t[e].call(i.exports,i,i.exports,h);i.l=true;return i.exports}h.m=t;h.c=r;h.d=function(t,e,i){if(!h.o(t,e)){Object.defineProperty(t,e,{enumerable:true,get:i})}};h.r=function(t){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(t,"__esModule",{value:true})};h.t=function(t,e){if(e&1)t=h(t);if(e&8)return t;if(e&4&&typeof t==="object"&&t&&t.__esModule)return t;var i=Object.create(null);h.r(i);Object.defineProperty(i,"default",{enumerable:true,value:t});if(e&2&&typeof t!="string")for(var r in t)h.d(i,r,function(e){return t[e]}.bind(null,r));return i};h.n=function(t){var e=t&&t.__esModule?function e(){return t["default"]}:function e(){return t};h.d(e,"a",e);return e};h.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)};h.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[];var o=s.push.bind(s);s.push=e;s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=o;n.push([57,1]);return i()})({57:function(t,e,i){"use strict";i.r(e);var r=i(0);var a=i.n(r);a.a.use=function(){let t=[];if(arguments.length==1&&typeof arguments[0]=="object"){t=[arguments[0]]}else{t=arguments}for(let e=0;e<t.length;e++){let i=t[e];if(typeof i=="object"){if(typeof i.name!="string")return;if(typeof i.component!="function")return;if(i.extend!=null){if(a.a.include(i.extend)==null){console.warn("JUI_WARNING_MSG: '"+i.extend+"' module should be imported in first")}}a.a.redefine(i.name,[],i.component,i.extend)}}};var n=a.a;var h={name:"chart.brush.bar",extend:"chart.brush.core",component:function(){var t=a.a.include("util.base");var e=function(){var e;var i,r,a,n;this.getBarStyle=function(){return{borderColor:this.chart.theme("barBorderColor"),borderWidth:this.chart.theme("barBorderWidth"),borderOpacity:this.chart.theme("barBorderOpacity"),borderRadius:this.chart.theme("barBorderRadius"),disableOpacity:this.chart.theme("barDisableBackgroundOpacity"),circleColor:this.chart.theme("barPointBorderColor")}};this.getBarElement=function(e,i,r){var a=this.getBarStyle(),n=this.color(e,i),h=this.getData(e)[this.brush.target[i]];var s=this.chart.svg.pathRect({width:r.width,height:r.height,fill:n,stroke:a.borderColor,"stroke-width":a.borderWidth,"stroke-opacity":a.borderOpacity});if(h!=0){this.addEvent(s,e,i)}if(this.barList==null){this.barList=[]}this.barList.push(t.extend({element:s,color:n},r));return s};this.setActiveEffect=function(t){var e=this.getBarStyle(),i=this.barList;for(var r=0;r<i.length;r++){var a=i[r]==t?1:e.disableOpacity;i[r].element.attr({opacity:a});if(i[r].minmax){i[r].minmax.style(i[r].color,e.circleColor,a)}}};this.drawBefore=function(){var t=this.brush.outerPadding,h=this.brush.innerPadding,s=this.brush.target.length;e=this.chart.svg.group();i=this.axis.x(0);r=this.axis.y.rangeBand();if(this.brush.size>0){n=this.brush.size;a=n*s+(s-1)*h}else{a=r-t*2;n=(a-(s-1)*h)/s;n=n<0?0:n}};this.drawETC=function(e){if(!t.typeCheck("array",this.barList))return;var i=this,r=this.getBarStyle();this.active=this.drawTooltip();e.append(this.active.tooltip);for(var a=0;a<this.barList.length;a++){var n=this.barList[a],h=this.brush.display;if(h=="max"&&n.max||h=="min"&&n.min||h=="all"){n.minmax=this.drawTooltip(n.color,r.circleColor,1);n.minmax.control(n.position,n.tooltipX,n.tooltipY,this.format(n.value));e.append(n.minmax.tooltip)}if(n.value!=0&&this.brush.activeEvent!=null){(function(t){i.active.style(t.color,r.circleColor,1);t.element.on(i.brush.activeEvent,function(e){i.active.style(t.color,r.circleColor,1);i.active.control(t.position,t.tooltipX,t.tooltipY,i.format(t.value));i.setActiveEffect(t)});t.element.attr({cursor:"pointer"})})(n)}}var n=this.barList[this.brush.active];if(n!=null){this.active.style(n.color,r.circleColor,1);this.active.control(n.position,n.tooltipX,n.tooltipY,this.format(n.value));this.setActiveEffect(n)}};this.draw=function(){var t=this.getXY(),r=this.getBarStyle();this.eachData(function(h,s){var o=this.offset("y",s)-a/2;for(var l=0;l<this.brush.target.length;l++){var u=h[this.brush.target[l]],c=this.axis.x(u),d=o+n/2,f=c>=i?"right":"left";if(Math.abs(i-c)<this.brush.minSize){c=f=="right"?c+this.brush.minSize:c-this.brush.minSize}var v=Math.abs(i-c),p=v<r.borderRadius||n<r.borderRadius?0:r.borderRadius,g=this.getBarElement(s,l,{width:v,height:n,value:u,tooltipX:c,tooltipY:d,position:f,max:t[l].max[s],min:t[l].min[s]});if(c>=i){g.round(v,n,0,p,p,0);g.translate(i,o)}else{g.round(v,n,p,0,0,p);g.translate(i-v,o)}e.append(g);o+=n+this.brush.innerPadding}});this.drawETC(e);return e};this.drawAnimate=function(t){var e=this.chart.svg,i=this.brush.animate;t.append(e.animate({attributeName:"opacity",from:"0",to:"1",begin:"0s",dur:"1.4s",repeatCount:"1",fill:"freeze"}));t.each(function(t,r){if(r.is("util.svg.element.path")){var a=r.data("translate").split(","),n=parseInt(a[0]),h=parseInt(a[1]),s=parseInt(r.attr("width")),o=i=="right"?n+s:n-s;r.append(e.animateTransform({attributeName:"transform",type:"translate",from:o+" "+h,to:n+" "+h,begin:"0s",dur:"0.7s",repeatCount:"1",fill:"freeze"}))}})}};e.setup=function(){return{size:0,minSize:0,outerPadding:2,innerPadding:1,active:null,activeEvent:null,display:null,format:null}};return e}};var s={name:"chart.brush.stackbar",extend:"chart.brush.bar",component:function(){var t=a.a.include("util.base");var e=function(e,i,r){var a,n,h;this.addBarElement=function(t){if(this.barList==null){this.barList=[]}this.barList.push(t)};this.getBarElement=function(t,e){var i=this.getBarStyle(),r=this.color(e),a=this.getData(t)[this.brush.target[e]];var n=this.chart.svg.rect({fill:r,stroke:i.borderColor,"stroke-width":i.borderWidth,"stroke-opacity":i.borderOpacity});if(a==0){n.attr({display:"none"})}if(a!=0){this.addEvent(n,t,e)}return n};this.setActiveEffect=function(e){var i=this.getBarStyle(),r=this.barList,a=this.stackTooltips;for(var n=0;n<r.length;n++){var h=e==r[n]?1:i.disableOpacity;if(a){if(h==1||t.inArray(n,this.tooltipIndexes)!=-1){a[n].attr({opacity:1})}else{a[n].attr({opacity:0})}}r[n].attr({opacity:h})}};this.setActiveEffectOption=function(){var t=this.brush.active;if(this.barList&&this.barList[t]){this.setActiveEffect(this.barList[t])}};this.setActiveEvent=function(t){var e=this;t.on(e.brush.activeEvent,function(i){e.setActiveEffect(t)})};this.setActiveEventOption=function(t){if(this.brush.activeEvent!=null){this.setActiveEvent(t);t.attr({cursor:"pointer"})}};this.getTargetSize=function(){var t=this.axis.y.rangeBand();if(this.brush.size>0){return this.brush.size}else{var e=t-this.brush.outerPadding*2;return e<this.brush.minSize?this.brush.minSize:e}};this.setActiveTooltips=function(t,e){var i=this.brush.display,r=i=="min"?t:e;for(var a=0;a<this.stackTooltips.length;a++){if(a==r||i=="all"){this.stackTooltips[a].css({opacity:1});this.tooltipIndexes.push(a)}}};this.drawStackTooltip=function(t,e,i,r,a,n){var h=this.chart.theme("tooltipPointFontSize"),s="middle",o=0,l=0;if(n=="left"){s="start";o=3;l=h/3}else if(n=="right"){s="end";o=-3;l=h/3}else if(n=="top"){l=-(h/3)}else{l=h}var u=this.chart.text({fill:this.chart.theme("tooltipPointFontColor"),"font-size":h,"font-weight":this.chart.theme("tooltipPointFontWeight"),"text-anchor":s,dx:o,dy:l,opacity:0}).text(this.format(i)).translate(r,a);this.stackTooltips[e]=u;t.append(u)};this.drawStackEdge=function(t){var e=this.chart.theme("barStackEdgeBorderWidth");for(var i=1;i<this.edgeData.length;i++){var r=this.edgeData[i-1],a=this.edgeData[i];for(var n=0;n<this.brush.target.length;n++){if(a[n].width>0&&a[n].height>0){t.append(this.svg.line({x1:r[n].x+r[n].width-r[n].ex,x2:a[n].x+a[n].dx-a[n].ex,y1:r[n].y+r[n].height-r[n].ey,y2:a[n].y+a[n].dy,stroke:a[n].color,"stroke-width":e}))}}}};this.drawBefore=function(){a=e.svg.group();n=i.y.rangeBand();h=this.getTargetSize();this.stackTooltips=[];this.tooltipIndexes=[];this.edgeData=[]};this.draw=function(){var n=null,s=0,o=null,l=this.axis.x.max(),u=this.axis.get("x").reverse;this.eachData(function(c,d){var f=e.svg.group();var v=this.offset("y",d),p=v-h/2,g=i.x(0),m=0,x=0;for(var y=0;y<r.target.length;y++){var b=c[r.target[y]]+m,w=i.x(b),k={x:g<w?g:w,y:p,width:Math.abs(g-w),height:h},B=this.getBarElement(d,y).attr(k);if(!this.edgeData[d]){this.edgeData[d]={}}this.edgeData[d][y]=t.extend({color:this.color(y),dx:k.width,dy:0,ex:u?k.width:0,ey:0},k);g=w;m=b;x+=c[r.target[y]];f.append(B)}if(x>s){s=x;n=d}if(x<l){l=x;o=d}this.drawStackTooltip(f,d,x,g,v,u?"right":"left");this.setActiveEventOption(f);this.addBarElement(f);a.append(f)});if(this.brush.edge){this.drawStackEdge(a)}if(this.brush.display!=null){this.setActiveTooltips(o,n)}this.setActiveEffectOption();return a}};e.setup=function(){return{outerPadding:15,edge:false}};return e}};var o={name:"chart.brush.fullstackbar",extend:"chart.brush.stackbar",component:function(){var t=a.a.include("util.base");var e=function(t,e,i){var r,a,n,h;this.drawBefore=function(){r=t.svg.group();a=e.x(0);n=e.y.rangeBand();h=this.getTargetSize()};this.drawText=function(t,e,i){var r=this.chart.text({"font-size":this.chart.theme("barFontSize"),fill:this.chart.theme("barFontColor"),x:e,y:i,"text-anchor":"middle"},t+"%");return r};this.draw=function(){this.eachData(function(a,n){var s=t.svg.group();var o=this.offset("y",n)-h/2,l=0,u=[];for(var c=0;c<i.target.length;c++){var d=a[i.target[c]];l+=d;u.push(d)}var f=0,v=e.x.max();for(var c=u.length-1;c>=0;c--){var d=e.x.rate(u[c],l),p=this.getBarElement(n,c);p.attr({x:f,y:o,width:d,height:h});s.append(p);if(i.showText){var g=Math.round(u[c]/l*v),m=f+d/2,x=o+h/2+5;s.append(this.drawText(g,m,x))}this.setActiveEventOption(s);f+=d}this.addBarElement(s);r.append(s)});this.setActiveEffectOption();return r}};e.setup=function(){return{outerPadding:15,showText:false}};return e}};var l={name:"chart.brush.rangebar",extend:"chart.brush.core",component:function(){var t=function(t,e,i){var r,a,n,h;var s,o;var l,u,c;this.drawBefore=function(){r=t.svg.group();s=i.outerPadding;o=i.innerPadding;a=e.y.rangeBand();n=a-s*2;h=(n-(i.target.length-1)*o)/i.target.length;l=t.theme("barBorderColor");u=t.theme("barBorderWidth");c=t.theme("barBorderOpacity")};this.draw=function(){this.eachData(function(a,s){var d=t.svg.group(),f=this.offset("y",s)-n/2;for(var v=0;v<i.target.length;v++){var p=a[i.target[v]],g=e.x(p[1]),m=e.x(p[0]);var x=t.svg.rect({x:m,y:f,height:h,width:Math.abs(m-g),fill:this.color(v),stroke:l,"stroke-width":u,"stroke-opacity":c});this.addEvent(x,s,v);d.append(x);f+=h+o}r.append(d)});return r}};t.setup=function(){return{outerPadding:2,innerPadding:1}};return t}};var u={name:"chart.brush.column",extend:"chart.brush.bar",component:function(){var t=function(){var t;var e,i,r,a;this.drawBefore=function(){var n=this.brush.outerPadding,h=this.brush.innerPadding,s=this.brush.target.length;t=this.chart.svg.group();e=this.axis.y(0);i=this.axis.x.rangeBand();if(this.brush.size>0){r=this.brush.size;a=r*s+(s-1)*h}else{a=i-n*2;r=(i-n*2-(s-1)*h)/s;r=r<0?0:r}};this.draw=function(){var i=this.getXY(),n=this.getBarStyle();this.eachData(function(h,s){var o=this.offset("x",s)-a/2;for(var l=0;l<this.brush.target.length;l++){var u=h[this.brush.target[l]],c=o+r/2,d=this.axis.y(u),f=d<=e?"top":"bottom";if(Math.abs(e-d)<this.brush.minSize){d=f=="top"?d-this.brush.minSize:d+this.brush.minSize}var v=Math.abs(e-d),p=r<n.borderRadius||v<n.borderRadius?0:n.borderRadius,g=this.getBarElement(s,l,{width:r,height:v,value:u,tooltipX:c,tooltipY:d,position:f,max:i[l].max[s],min:i[l].min[s]});if(d<=e){g.round(r,v,p,p,0,0);g.translate(o,d)}else{g.round(r,v,0,0,p,p);g.translate(o,e)}t.append(g);o+=r+this.brush.innerPadding}});this.drawETC(t);return t};this.drawAnimate=function(t){var e=this.chart.svg,i=this.brush.animate;t.append(e.animate({attributeName:"opacity",from:"0",to:"1",begin:"0s",dur:"1.4s",repeatCount:"1",fill:"freeze"}));t.each(function(t,r){if(r.is("util.svg.element.path")){var a=r.data("translate").split(","),n=parseInt(a[0]),h=parseInt(a[1]),s=parseInt(r.attr("height")),o=i=="top"?h-s:h+s;r.append(e.animateTransform({attributeName:"transform",type:"translate",from:n+" "+o,to:n+" "+h,begin:"0s",dur:"0.7s",repeatCount:"1",fill:"freeze"}))}})}};return t}};var c={name:"chart.brush.stackcolumn",extend:"chart.brush.stackbar",component:function(){var t=a.a.include("util.base");var e=function(e,i,r){var a,n,h;this.getTargetSize=function(){var t=this.axis.x.rangeBand();if(this.brush.size>0){return this.brush.size}else{var e=t-this.brush.outerPadding*2;return e<this.brush.minSize?this.brush.minSize:e}};this.drawBefore=function(){a=e.svg.group();n=i.y(0);h=this.getTargetSize();this.stackTooltips=[];this.tooltipIndexes=[];this.edgeData=[]};this.draw=function(){var n=null,s=0,o=null,l=this.axis.y.max(),u=this.axis.get("y").reverse;this.eachData(function(c,d){var f=e.svg.group();var v=this.offset("x",d),p=v-h/2,g=i.y(0),m=0,x=0;for(var y=0;y<r.target.length;y++){var b=c[r.target[y]]+m,w=i.y(b),k={x:p,y:g>w?w:g,width:h,height:Math.abs(g-w)},B=this.getBarElement(d,y).attr(k);if(!this.edgeData[d]){this.edgeData[d]={}}this.edgeData[d][y]=t.extend({color:this.color(y),dx:0,dy:u?k.height:0,ex:0,ey:u?0:k.height},k);g=w;m=b;x+=c[r.target[y]];f.append(B)}if(x>s){s=x;n=d}if(x<l){l=x;o=d}this.drawStackTooltip(f,d,x,v,g,u?"bottom":"top");this.setActiveEventOption(f);this.addBarElement(f);a.append(f)});if(this.brush.edge){this.drawStackEdge(a)}if(this.brush.display!=null){this.setActiveTooltips(o,n)}this.setActiveEffectOption();return a}};return e}};var d={name:"chart.brush.fullstackcolumn",extend:"chart.brush.fullstackbar",component:function(){var t=function(t,e,i){var r,a,n;this.getTargetSize=function(){var t=this.axis.x.rangeBand(),e=0;if(this.brush.size>0){e=this.brush.size}else{e=t-this.brush.outerPadding*2}return e<0?0:e};this.drawBefore=function(){r=t.svg.group();a=e.y(0);n=this.getTargetSize()};this.draw=function(){var a=e.area("height");this.eachData(function(h,s){var o=t.svg.group();var l=this.offset("x",s)-n/2,u=0,c=[];for(var d=0;d<i.target.length;d++){var f=h[i.target[d]];u+=f;c.push(f)}var v=0,p=e.y.max();for(var d=c.length-1;d>=0;d--){var f=a-e.y.rate(c[d],u),g=this.getBarElement(s,d);if(isNaN(l)||isNaN(v)||isNaN(f)){}else{g.attr({x:l,y:v,width:n,height:f})}o.append(g);if(i.showText){var m=Math.round(c[d]/u*p),x=l+n/2,y=v+f/2+8;if(isNaN(x)||isNaN(y)){}else{o.append(this.drawText(m,x,y))}}this.setActiveEventOption(o);v+=f}this.addBarElement(o);r.append(o)});this.setActiveEffectOption();return r}};return t}};var f={name:"chart.brush.rangecolumn",extend:"chart.brush.core",component:function(){var t=function(t,e,i){var r,a,n,h;var s,o;var l,u,c;this.drawBefore=function(){r=t.svg.group();s=i.outerPadding;o=i.innerPadding;a=e.x.rangeBand();h=a-s*2;n=(a-s*2-(i.target.length-1)*o)/i.target.length;l=t.theme("columnBorderColor");u=t.theme("columnBorderWidth");c=t.theme("columnBorderOpacity")};this.draw=function(){this.eachData(function(a,s){var d=this.offset("x",s)-h/2;for(var f=0;f<i.target.length;f++){var v=a[i.target[f]],p=e.y(v[1]),g=e.y(v[0]);var m=t.svg.rect({x:d,y:p,width:n,height:Math.abs(g-p),fill:this.color(f),stroke:l,"stroke-width":u,"stroke-opacity":c});this.addEvent(m,s,f);r.append(m);d+=n+o}});return r}};t.setup=function(){return{outerPadding:2,innerPadding:1}};return t}};var v={name:"chart.brush.line",extend:"chart.brush.core",component:function(){var t=a.a.include("util.base");var e=function(){var e;var i,r,a,n,h;this.setActiveEffect=function(t){var e=this.lineList;for(var a=0;a<e.length;a++){var n=t==e[a].element?h:r,s=e[a].element.get(0).attr("stroke");if(e[a].tooltip!=null){e[a].tooltip.style(s,i,n)}e[a].element.attr({opacity:n})}};this.addLineElement=function(t){if(!this.lineList){this.lineList=[]}this.lineList.push(t)};this.createLine=function(e,i){var r=e.x,h=e.y,s=e.value,o=this.brush.symbol=="curve"?this.curvePoints(r):null,l=this.brush.symbol=="curve"?this.curvePoints(h):null,u=null,c=null,d={"stroke-width":a,"stroke-dasharray":n,fill:"transparent",cursor:this.brush.activeEvent!=null?"pointer":"normal"};var f=this.svg.group(),v=null;if(e.length>0){var p=null,g=null;for(var m=0;m<r.length-1;m++){if(!t.typeCheck(["undefined","null"],s[m]))p=m;if(!t.typeCheck(["undefined","null"],s[m+1]))g=m+1;if(p==null||g==null||p==g)continue;var x=this.color(m,i),y=this.getOpacity(m);if(u!=x||c!=y){v=this.svg.path(t.extend({"stroke-opacity":y,stroke:x,x1:r[p]},d));v.css({"pointer-events":"stroke"});v.MoveTo(r[p],h[p]);f.append(v);u=x;c=y}else{v.attr({x2:r[g]})}if(this.brush.symbol=="curve"){v.CurveTo(o.p1[p],l.p1[p],o.p2[p],l.p2[p],r[g],h[g])}else{if(this.brush.symbol=="step"){var b=r[p]+(r[g]-r[p])/2;v.LineTo(b,h[p]);v.LineTo(b,h[g])}v.LineTo(r[g],h[g])}}}return f};this.createTooltip=function(t,e,r){var a=this.brush.display;for(var n=0;n<e.x.length;n++){if(a=="max"&&e.max[n]||a=="min"&&e.min[n]||a=="all"){var s=a=="max"&&e.max[n]?"top":"bottom",o=this.lineList[r].tooltip;if(a=="all"||o==null){var l=this.drawTooltip(this.color(r),i,h);l.control(s,+e.x[n],+e.y[n],this.format(e.value[n]));t.append(l.tooltip);this.lineList[r].tooltip=l}}}};this.getOpacity=function(e){var i=this.brush.opacity,r=this.chart.theme("lineBorderOpacity");if(t.typeCheck("function",i)&&t.typeCheck("number",e)){return i.call(this.chart,this.getData(e),e)}else if(t.typeCheck("number",i)){return i}return r};this.drawLine=function(t){var i=this;for(var r=0;r<t.length;r++){var a=this.createLine(t[r],r);this.addEvent(a,null,r);e.append(a);this.addLineElement({element:a,tooltip:null});if(this.brush.display!=null){this.createTooltip(e,t[r],r)}if(this.brush.activeEvent!=null){(function(t){t.on(i.brush.activeEvent,function(e){i.setActiveEffect(t)})})(a)}}for(var r=0;r<t.length;r++){if(this.brush.active==this.brush.target[r]){this.setActiveEffect(this.lineList[r].element)}}return e};this.drawBefore=function(){e=this.chart.svg.group();i=this.chart.theme("linePointBorderColor");r=this.chart.theme("lineDisableBorderOpacity");a=this.chart.theme("lineBorderWidth");n=this.chart.theme("lineBorderDashArray");h=this.getOpacity(null)};this.draw=function(){return this.drawLine(this.getXY())};this.drawAnimate=function(t){var e=this.chart.svg;t.each(function(t,i){if(i.is("util.svg.element.path")){var r=i.attributes["stroke-dasharray"],a=i.length();if(r=="none"){i.attr({"stroke-dasharray":a});i.append(e.animate({attributeName:"stroke-dashoffset",from:a,to:"0",begin:"0s",dur:"1s",repeatCount:"1"}))}else{i.append(e.animate({attributeName:"opacity",from:"0",to:"1",begin:"0s",dur:"1.5s",repeatCount:"1",fill:"freeze"}))}}})}};e.setup=function(){return{symbol:"normal",active:null,activeEvent:null,display:null,opacity:null}};return e}};var p={name:"chart.brush.area",extend:"chart.brush.line",component:function(){var t=a.a.include("util.base");var e=function(){this.drawArea=function(e){var i=this.chart.svg.group(),r=this.axis.y(this.brush.startZero?0:this.axis.y.min()),a=t.typeCheck("number",this.brush.opacity)?this.brush.opacity:this.chart.theme("areaBackgroundOpacity");for(var n=0;n<e.length;n++){var h=this.createLine(e[n],n).children;for(var s=0;s<h.length;s++){var o=h[s];if(t.typeCheck("function",this.brush.opacity)){a=o.attr("stroke-opacity")}if(e[n].length>0){o.LineTo(o.attr("x2"),r);o.LineTo(o.attr("x1"),r);o.ClosePath()}o.attr({fill:o.attr("stroke"),"fill-opacity":a,"stroke-width":0});i.prepend(o)}if(this.brush.line){i.prepend(this.createLine(e[n],n))}this.addEvent(i,null,n)}return i};this.draw=function(){return this.drawArea(this.getXY())};this.drawAnimate=function(t){t.append(this.chart.svg.animate({attributeName:"opacity",from:"0",to:"1",begin:"0s",dur:"1.5s",repeatCount:"1",fill:"freeze"}))}};e.setup=function(){return{symbol:"normal",active:null,activeEvent:null,display:null,startZero:true,line:true}};return e}};var g={name:"chart.brush.stackarea",extend:"chart.brush.area",component:function(){var t=function(){this.draw=function(){return this.drawArea(this.getStackXY())}};return t}};var m={name:"chart.brush.rangearea",extend:"chart.brush.core",component:function(){var t=function(){this.draw=function(){var t=this.svg.group(),e=this.brush.target,i=this.axis.data,r=this.axis.y.type=="range";for(var a=0;a<e.length;a++){var n=this.svg.polygon({fill:this.color(a),"fill-opacity":this.chart.theme("areaBackgroundOpacity"),"stroke-width":0});for(var h=0;h<i.length;h++){var s=i[h][e[a]];if(r){n.point(this.axis.x(h),this.axis.y(s[0]))}else{n.point(this.axis.x(s[0]),this.axis.y(h))}}for(var h=i.length-1;h>=0;h--){var s=i[h][e[a]];if(r){n.point(this.axis.x(h),this.axis.y(s[1]))}else{n.point(this.axis.x(s[1]),this.axis.y(h))}}t.append(n)}return t}};return t}};var x={name:"chart.brush.scatter",extend:"chart.brush.core",component:function(){var t=a.a.include("util.base");var e=function(){this.getSymbolType=function(e,i){var r=this.brush.symbol,a=this.brush.target[e];if(t.typeCheck("function",r)){var n=r.apply(this.chart,[a,i]);if(n=="triangle"||n=="cross"||n=="rectangle"||n=="rect"||n=="circle"){return{type:"default",uri:n}}else{return{type:"image",uri:n}}}return{type:"default",uri:r}};this.createScatter=function(t,e,i,r){var a=this,n=null,h=this.brush.size,s=this.brush.size;var o=this.color(e,i),l=this.chart.theme("scatterBorderColor"),u=this.chart.theme("scatterBorderWidth"),c=this.brush.opacity;if(r.type=="image"){n=this.chart.svg.image({"xlink:href":r.uri,width:h+u,height:s+u,x:t.x-h/2-u,y:t.y-s/2})}else{if(r.uri=="triangle"||r.uri=="cross"){n=this.chart.svg.group({width:h,height:s,opacity:c},function(){if(r.uri=="triangle"){var t=a.chart.svg.polygon();t.point(0,s).point(h,s).point(h/2,0)}else{a.chart.svg.line({stroke:o,"stroke-width":u*2,x1:0,y1:0,x2:h,y2:s});a.chart.svg.line({stroke:o,"stroke-width":u*2,x1:0,y1:h,x2:s,y2:0})}}).translate(t.x-h/2,t.y-s/2)}else{if(r.uri=="rectangle"||r.uri=="rect"){n=this.chart.svg.rect({width:h,height:s,x:t.x-h/2,y:t.y-s/2,opacity:c})}else{n=this.chart.svg.ellipse({rx:h/2,ry:s/2,cx:t.x,cy:t.y,opacity:c})}}if(r.uri!="cross"){n.attr({fill:o,stroke:l,"stroke-width":u}).hover(function(){if(n==a.activeScatter)return;var t={fill:a.chart.theme("scatterHoverColor"),stroke:o,"stroke-width":u*2,opacity:c};if(a.brush.hoverSync){for(var i=0;i<a.cachedSymbol[e].length;i++){t.stroke=a.color(e,i);a.cachedSymbol[e][i].attr(t)}}else{n.attr(t)}},function(){if(n==a.activeScatter)return;var t={fill:o,stroke:l,"stroke-width":u,opacity:a.brush.hide?0:c};if(a.brush.hoverSync){for(var i=0;i<a.cachedSymbol[e].length;i++){t.fill=a.color(e,i);a.cachedSymbol[e][i].attr(t)}}else{n.attr(t)}})}}return n};this.drawScatter=function(e){this.cachedSymbol={};var i=this,r=this.chart.svg.group(),a=this.chart.theme("scatterBorderColor"),n=this.chart.theme("scatterBorderWidth"),h=this.brush.opacity,s=false;for(var o=0;o<e.length;o++){for(var l=0;l<e[o].length;l++){if(!this.cachedSymbol[l]){this.cachedSymbol[l]=[]}if(this.brush.hideZero&&e[o].value[l]===0){continue}var u={x:e[o].x[l],y:e[o].y[l],max:e[o].max[l],min:e[o].min[l],value:e[o].value[l]};if(t.typeCheck(["undefined","null"],u.value))continue;var c=this.getSymbolType(o,u.value),d=this.createScatter(u,l,o,c),f=this.brush.display;if(c.type=="default"&&c.uri!="cross"){this.cachedSymbol[l].push(d)}if(f=="max"&&u.max||f=="min"&&u.min||f=="all"){if(f=="all"||!s){r.append(this.drawTooltip(u.x,u.y,this.format(u.value)));s=true}}if(this.brush.activeEvent!=null){(function(t,e,r,s){var o=e.x,l=e.y,u=i.format(e.value);t.on(i.brush.activeEvent,function(e){if(s.type=="default"&&s.uri!="cross"){if(i.activeScatter!=null){i.activeScatter.attr({fill:i.activeScatter.attributes["stroke"],stroke:a,"stroke-width":n,opacity:i.brush.hide?0:h})}i.activeScatter=t;i.activeScatter.attr({fill:i.chart.theme("scatterHoverColor"),stroke:r,"stroke-width":n*2,opacity:h})}i.activeTooltip.html(u);i.activeTooltip.translate(o,l)});t.attr({cursor:"pointer"})})(d,u,this.color(l,o),this.getSymbolType(o,u.value))}if(this.brush.hide){d.attr({opacity:0})}this.addEvent(d,l,o);r.append(d)}}this.activeTooltip=this.drawTooltip(0,0,"");r.append(this.activeTooltip);return r};this.drawTooltip=function(t,e,i){return this.chart.text({y:-this.brush.size,"text-anchor":"middle",fill:this.chart.theme("tooltipPointFontColor"),"font-size":this.chart.theme("tooltipPointFontSize"),"font-weight":this.chart.theme("tooltipPointFontWeight"),opacity:this.brush.opacity},i).translate(t,e)};this.draw=function(){return this.drawScatter(this.getXY())};this.drawAnimate=function(){var t=this.chart.area();return this.chart.svg.animateTransform({attributeName:"transform",type:"translate",from:t.x+" "+t.height,to:t.x+" "+t.y,begin:"0s",dur:"0.4s",repeatCount:"1"})}};e.setup=function(){return{symbol:"circle",size:7,hide:false,hideZero:false,hoverSync:false,activeEvent:null,display:null,opacity:1,clip:false}};return e}};var y={name:"chart.brush.bubble",extend:"chart.brush.core",component:function(){var t=a.a.include("util.base");var e=a.a.include("util.math");var i=function(){var i=this,r=null,a=null;this.getFormatText=function(e,i){if(t.typeCheck("function",this.brush.format)){return this.format(this.axis.data[i])}return e};this.getBubbleRadius=function(i,n){var h=this.brush.scaleKey;if(h!=null){var s=this.axis.data[n][h];i=t.typeCheck("number",s)?s:i}return e.scaleValue(i,r,a,this.brush.min,this.brush.max)};this.createBubble=function(t,e,i){var r=this.getBubbleRadius(t.value,i),a=this.svg.group().translate(t.x,t.y);a.append(this.svg.circle({r,fill:e,"fill-opacity":this.chart.theme("bubbleBackgroundOpacity"),stroke:e,"stroke-width":this.chart.theme("bubbleBorderWidth")}));if(this.brush.showText){var n=this.getFormatText(t.value,i);a.append(this.chart.text({"font-size":this.chart.theme("bubbleFontSize"),fill:this.chart.theme("bubbleFontColor"),"text-anchor":"middle",dy:3}).text(n))}this.bubbleList.push(a);return a};this.setActiveEffect=function(t){var e=this.bubbleList;for(var i=0;i<e.length;i++){var r=e[i]==t?1:this.chart.theme("bubbleBackgroundOpacity");e[i].get(0).attr({opacity:r});e[i].get(1).attr({opacity:r})}};this.drawBubble=function(t){var e=this.svg.group();for(var r=0;r<t.length;r++){for(var a=0;a<t[r].x.length;a++){var n=this.createBubble({x:t[r].x[a],y:t[r].y[a],value:t[r].value[a]},this.color(a,r),a);if(this.brush.activeEvent!=null){(function(t){t.on(i.brush.activeEvent,function(e){i.setActiveEffect(t)});t.attr({cursor:"pointer"})})(n)}this.addEvent(n,a,r);e.append(n)}}var h=this.bubbleList[this.brush.active];if(h!=null){this.setActiveEffect(h)}return e};this.drawBefore=function(){var t=this.brush.scaleKey;if(t!=null){var e=[];for(var i=0;i<this.axis.data.length;i++){e.push(this.axis.data[i][t])}r=Math.min.apply(this,e);a=Math.max.apply(this,e)}else{r=this.axis.y.min();a=this.axis.y.max()}this.bubbleList=[]};this.draw=function(){return this.drawBubble(this.getXY())};this.drawAnimate=function(t){t.each(function(t,e){var r=e.children[0];r.append(i.svg.animateTransform({attributeType:"xml",attributeName:"transform",type:"scale",from:"0",to:"1",dur:"0.7s",fill:"freeze",repeatCount:"1"}));r.append(i.svg.animate({attributeType:"xml",attributeName:"fill-opacity",from:"0",to:i.chart.theme("bubbleBackgroundOpacity"),dur:"1.4s",repeatCount:"1",fill:"freeze"}))})}};i.setup=function(){return{min:5,max:30,scaleKey:null,showText:false,format:null,active:null,activeEvent:null}};return i}};var b={name:"chart.brush.pie",extend:"chart.brush.core",component:function(){var t=a.a.include("util.base");var e=a.a.include("util.math");var i=a.a.include("util.color");var r=function(){var r=this,a=3;var n=0,h=0,s=1;var o,l={};this.setActiveEvent=function(t,i,r,a){var n=this.chart.theme("pieActiveDistance"),h=Math.cos(e.radian(a))*n,s=Math.sin(e.radian(a))*n;t.translate(i+h,r+s)};this.setActiveTextEvent=function(t,i,r,a,n,h){var s=h?this.chart.theme("pieActiveDistance"):0,o=i+Math.cos(e.radian(a))*((n+s)/2),l=r+Math.sin(e.radian(a))*((n+s)/2);t.translate(o,l)};this.getFormatText=function(t,e,i){var r=t;if(typeof this.brush.format=="function"){return this.format(r,e,i)}else{if(!e){return r}return r+": "+this.format(e)}};this.drawPie=function(t,i,r,a,n,h){var s=this.chart.svg.group();if(n==360){var o=this.chart.svg.circle({cx:t,cy:i,r,fill:h,stroke:this.chart.theme("pieBorderColor")||h,"stroke-width":this.chart.theme("pieBorderWidth")});s.append(o);return s}var l=this.chart.svg.path({fill:h,stroke:this.chart.theme("pieBorderColor")||h,"stroke-width":this.chart.theme("pieBorderWidth")});var u=e.rotate(0,-r,e.radian(a)),c=u.x,d=u.y;l.MoveTo(c,d);u=e.rotate(c,d,e.radian(n));s.translate(t,i);l.Arc(r,r,0,n>180?1:0,1,u.x,u.y).LineTo(0,0).ClosePath();s.append(l);s.order=1;return s};this.drawPie3d=function(t,i,r,a,n,h){var s=this.chart.svg.group(),o=this.chart.svg.path({fill:h,stroke:this.chart.theme("pieBorderColor")||h,"stroke-width":this.chart.theme("pieBorderWidth")});var l=e.rotate(0,-r,e.radian(a)),u=l.x,c=l.y;o.MoveTo(u,c);l=e.rotate(u,c,e.radian(n));s.translate(t,i);o.Arc(r,r,0,n>180?1:0,1,l.x,l.y);var d=l.y+10,f=l.x+5,v=u+5,p=c+10;o.LineTo(f,d);o.Arc(r,r,0,n>180?1:0,0,v,p);o.ClosePath();s.append(o);s.order=1;return s};this.drawText=function(t,i,r,o,l){var u=this.svg.group({visibility:!this.brush.showText?"hidden":"visible"}),c=r+90>180?true:false;if(l===""||!l){return u}if(this.brush.showText=="inside"){var d=t+Math.cos(e.radian(r))*(o/2),f=i+Math.sin(e.radian(r))*(o/2);var l=this.chart.text({"font-size":this.chart.theme("pieInnerFontSize"),fill:this.chart.theme("pieInnerFontColor"),"text-anchor":"middle",y:a},l);l.translate(d,f);u.append(l);u.order=2}else{var v=this.chart.theme("pieOuterLineRate"),p=Math.abs(r-n);if(p<2){if(h==0){h=v}var g=v*.05;h-=g;s-=.25}else{h=v;s=1}if(h>1.2){var m=this.chart.theme("pieOuterLineSize"),x=o*h,d=t+Math.cos(e.radian(r))*o,f=i+Math.sin(e.radian(r))*o,y=t+Math.cos(e.radian(r))*x,b=i+Math.sin(e.radian(r))*x,w=c?y-m:y+m;var k=this.svg.path({fill:"transparent",stroke:this.chart.theme("pieOuterLineColor"),"stroke-width":this.chart.theme("pieOuterLineWidth"),"stroke-opacity":s});k.MoveTo(d,f).LineTo(y,b).LineTo(w,b);var l=this.chart.text({"font-size":this.chart.theme("pieOuterFontSize"),fill:this.chart.theme("pieOuterFontColor"),"fill-opacity":s,"text-anchor":c?"end":"start",y:a},l);l.translate(w+(c?-3:3),b);u.append(l);u.append(k);u.order=0;n=r}}return u};this.drawUnit=function(e,a,n){var h=this.getProperty(e),s=h.centerX,o=h.centerY,u=h.outerRadius;var c=this.brush.target,d=this.brush.active,f=360,v=0,p=0;for(var g=0;g<c.length;g++){p+=a[c[g]]}for(var g=0;g<c.length;g++){if(a[c[g]]==0)continue;var m=a[c[g]],x=f*(m/p);if(this.brush["3d"]){var y=this.drawPie3d(s,o,u,v,x,i.darken(this.color(g),.5));n.append(y)}v+=x}v=0;for(var g=0;g<c.length;g++){var m=a[c[g]],x=f*(m/p),b=v+x/2-90,w=Math.abs(v-x)==360,k=this.drawPie(s,o,u,v,x,this.color(g)),B=this.drawText(s,o,b,u,this.getFormatText(c[g],m,p));if(!w){if(d==c[g]||t.inArray(c[g],d)!=-1){if(this.brush.showText=="inside"){this.setActiveTextEvent(B.get(0),s,o,b,u,true)}this.setActiveEvent(k,s,o,b);l[b]=true}if(this.brush.activeEvent!=null){(function(t,e,i,a,n,h){t.on(r.brush.activeEvent,function(s){if(!l[n]){if(r.brush.showText=="inside"){r.setActiveTextEvent(e,i,a,n,h,true)}r.setActiveEvent(t,i,a,n);l[n]=true}else{if(r.brush.showText=="inside"){r.setActiveTextEvent(e,i,a,n,h,false)}t.translate(i,a);l[n]=false}});t.attr({cursor:"pointer"})})(k,B.get(0),s,o,b,u)}}r.addEvent(k,e,g);n.append(k);n.append(B);v+=x}};this.drawNoData=function(t){var e=this.getProperty(0);t.append(this.drawPie(e.centerX,e.centerY,e.outerRadius,0,360,this.chart.theme("pieNoDataBackgroundColor")))};this.drawBefore=function(){o=this.chart.svg.group()};this.draw=function(){if(this.listData().length==0){this.drawNoData(o)}else{this.eachData(function(t,e){this.drawUnit(e,t,o)})}return o};this.getProperty=function(t){var e=this.axis.c(t);var i=e.width,r=e.height,a=e.x,n=e.y,h=i;if(r<h){h=r}return{centerX:i/2+a,centerY:r/2+n,outerRadius:h/2}}};r.setup=function(){return{clip:false,showText:null,format:null,"3d":false,active:null,activeEvent:null}};return r}};var w={name:"chart.brush.donut",extend:"chart.brush.pie",component:function(){var t=a.a.include("util.base");var e=a.a.include("util.math");var i=a.a.include("util.color");var r=function(){var r=this,a={};this.drawDonut=function(t,i,r,a,n,h,s){s["stroke-width"]=a-r;if(h>=360){h=359.9999}var o=this.chart.svg.group(),l=this.chart.svg.path(s),u=Math.abs(a-r);var c=e.rotate(0,-a,e.radian(n)),d=c.x,f=c.y;l.MoveTo(d,f);c=e.rotate(d,f,e.radian(h));o.translate(t,i);l.Arc(a,a,0,h>180?1:0,1,c.x,c.y);l.css({"pointer-events":"stroke"});o.append(l);o.order=1;return o};this.drawDonut3d=function(t,i,r,a,n,h,s){var o=this.chart.svg.group(),l=this.chart.svg.path(s),u=Math.abs(a-r);a+=u/2;r=a-u;var c=e.rotate(0,-a,e.radian(n)),d=c.x,f=c.y;var v=e.rotate(0,-r,e.radian(n)),p=v.x,g=v.y;l.MoveTo(d,f);c=e.rotate(d,f,e.radian(h));v=e.rotate(p,g,e.radian(h));o.translate(t,i);l.Arc(a,a,0,h>180?1:0,1,c.x,c.y);var m=c.y+10,x=c.x+5,y=v.y+10,b=v.x+5,w=d+5,k=f+10,B=p+5,C=g+10;l.LineTo(x,m);l.Arc(a,a,0,h>180?1:0,0,w,k);l.ClosePath();o.append(l);var T=this.chart.svg.path(s);T.MoveTo(p,g);T.Arc(r,r,0,h>180?1:0,1,v.x,v.y);T.LineTo(b,y);T.Arc(r,r,0,h>180?1:0,0,B,C);T.ClosePath();o.append(T);o.order=1;return o};this.drawDonut3dBlock=function(t,i,r,a,n,h,s){var o=this.chart.svg.group(),l=this.chart.svg.path(s),u=Math.abs(a-r);a+=u/2;r=a-u;var c=e.rotate(0,-a,e.radian(n)),d=c.x,f=c.y;var v=e.rotate(0,-r,e.radian(n)),p=v.x,g=v.y;l.MoveTo(d,f);c=e.rotate(d,f,e.radian(h));v=e.rotate(p,g,e.radian(h));o.translate(t,i);var m=c.y+10,x=c.x+5,y=v.y+10,b=v.x+5;var w=this.chart.svg.path(s);w.MoveTo(c.x,c.y).LineTo(x,m).LineTo(b,y).LineTo(v.x,v.y).ClosePath();o.append(w);o.order=1;return o};this.drawUnit=function(e,n,h){var s=this.getProperty(e),o=s.centerX,l=s.centerY,u=s.innerRadius,c=s.outerRadius;var d=this.brush.target,f=this.brush.active,v=360,p=0,g=0,m=0;for(var x=0;x<d.length;x++){g+=n[d[x]]}if(this.brush["3d"]){for(var x=0;x<d.length;x++){var y=n[d[x]],b=v*(y/g),w=this.drawDonut3dBlock(o,l,u,c,p,b,{fill:i.darken(this.color(x),.5)},x==d.length-1);h.append(w);p+=b}p=0;for(var x=0;x<d.length;x++){var y=n[d[x]],b=v*(y/g),w=this.drawDonut3d(o,l,u,c,p,b,{fill:i.darken(this.color(x),.5)},x==d.length-1);h.append(w);p+=b}}p=0;for(var x=0;x<d.length;x++){if(n[d[x]]==0)continue;var y=n[d[x]],b=v*(y/g),k=p+b/2-90,B=Math.abs(p-b)==360,C=this.brush.showText=="inside"?this.brush.size+u+c:c,T=this.drawDonut(o,l,u,c,p,b,{stroke:this.color(x),fill:"transparent"}),z=this.drawText(o,l,k,C,this.getFormatText(d[x],y));if(!B){if(f==d[x]||t.inArray(d[x],f)!=-1){if(this.brush.showText=="inside"){this.setActiveTextEvent(z.get(0),o,l,k,C,true)}this.setActiveEvent(T,o,l,k);a[k]=true}if(this.brush.activeEvent!=null){(function(t,e,i,n,h,s){t.on(r.brush.activeEvent,function(o){if(!a[h]){if(r.brush.showText=="inside"){r.setActiveTextEvent(e,i,n,h,s,true)}r.setActiveEvent(t,i,n,h);a[h]=true}else{if(r.brush.showText=="inside"){r.setActiveTextEvent(e,i,n,h,s,false)}t.translate(i,n);a[h]=false}});t.attr({cursor:"pointer"})})(T,z.get(0),o,l,k,C)}}this.addEvent(T,e,x);h.append(T);h.append(z);p+=b;m+=y}if(this.brush.showValue){this.drawTotalValue(h,o,l,m)}};this.drawNoData=function(t){var e=this.getProperty(0);t.append(this.drawDonut(e.centerX,e.centerY,e.innerRadius,e.outerRadius,0,360,{stroke:this.chart.theme("pieNoDataBackgroundColor"),fill:"transparent"}));if(this.brush.showValue){this.drawTotalValue(t,e.centerX,e.centerY,0)}};this.drawTotalValue=function(t,e,i,r){var a=this.chart.theme("pieTotalValueFontSize");var n=this.chart.text({"font-size":a,"font-weight":this.chart.theme("pieTotalValueFontWeight"),fill:this.chart.theme("pieTotalValueFontColor"),"text-anchor":"middle",dy:a/3},this.format(r));n.translate(e,i);t.append(n)};this.getProperty=function(t){var e=this.axis.c(t);var i=e.width,r=e.height,a=e.x,n=e.y,h=i;if(r<h){h=r}if(this.brush.size>=h/2){this.brush.size=h/4}var s=h/2-this.brush.size/2;return{centerX:i/2+a,centerY:r/2+n,outerRadius:s,innerRadius:s-this.brush.size}}};r.setup=function(){return{size:50,showValue:false}};return r}};a.a.define("util.treemap",[],function(){return{sumArray:function(t){var e=0;for(var i=0;i<t.length;i++){e+=t[i]}return e}}});a.a.define("chart.brush.treemap.node",[],function(){var t=function(t){var e=this;this.text=t.text;this.value=t.value;this.x=t.x;this.y=t.y;this.width=t.width;this.height=t.height;this.index=null;this.nodenum=null;this.parent=null;this.children=[];this.depth=0;function i(t){var e=t.children;for(var r=0;r<e.length;r++){if(e[r].children.length>0){i(e[r])}}}this.reload=function(t){this.nodenum=!isNaN(t)?t:this.nodenum;if(e.parent){if(this.parent.index==null)this.index=""+this.nodenum;else this.index=e.parent.index+"."+this.nodenum}if(this.parent&&typeof e.index=="string"){this.depth=this.index.split(".").length}if(this.children.length>0){i(this)}};this.isLeaf=function(){return this.children.length==0?true:false};this.appendChild=function(t){this.children.push(t)};this.insertChild=function(t,e){var i=this.children.splice(0,t);i.push(e);this.children=i.concat(this.children)};this.removeChild=function(t){for(var e=0;e<this.children.length;e++){var i=this.children[e];if(i.index==t){this.children.splice(e,1)}}};this.lastChild=function(){if(this.children.length>0)return this.children[this.children.length-1];return null};this.lastChildLeaf=function(t){var e=!t?this.lastChild():t;if(e.isLeaf())return e;else{return this.lastChildLeaf(e.lastChild())}}};return t});a.a.define("chart.brush.treemap.nodemanager",["util.base","chart.brush.treemap.node"],function(t,e){var i=function(){var i=this,r=new e({text:null,value:-1,x:-1,y:-1,width:-1,height:-1}),a=t.index();function n(t,i,r){var a=new e(t);a.parent=r?r:null;a.reload(i);return a}function h(t,e){var i=e.children;if(i.length>0){for(var r=0;r<i.length;r++){t.push(i[r]);if(i[r].children.length>0){h(t,i[r])}}}}function s(t,e){if(!e)return null;var i=t.shift();if(i==undefined){return e}else{return s(t,e.children[i])}}function o(t,e){var r=a.getIndexList(t);var h=i.getNodeParent(t),s=r[r.length-1],o=n(e,s,h);h.insertChild(s,o);return o}function l(t){var e=n(t,r.children.length,r);r.appendChild(e);return e}function u(t,e){var r=i.getNode(t),a=n(e,r.children.length,r);r.appendChild(a);return a}this.appendNode=function(){var t=arguments[0],e=arguments[1];if(!e){return l(t)}else{return u(t,e)}};this.insertNode=function(t,e){if(r.children.length==0&&parseInt(t)==0){return this.appendNode(e)}else{return o(t,e)}};this.updateNode=function(t,e){var i=this.getNode(t);for(var r in e){i.data[r]=e[r]}i.reload(i.nodenum,true);return i};this.getNode=function(t){if(t==null)return r.children;else{var e=r.children;if(a.isIndexDepth(t)){var i=a.getIndexList(t);return s(i,e[i.shift()])}else{return e[t]?e[t]:null}}};this.getNodeAll=function(t){var e=[],i=t==null?r.children:[this.getNode(t)];for(var a=0;a<i.length;a++){if(i[a]){e.push(i[a]);if(i[a].children.length>0){h(e,i[a])}}}return e};this.getNodeParent=function(t){var e=a.getIndexList(t);if(e.length==1){return r}else if(e.length==2){return this.getNode(e[0])}else if(e.length>2){e.pop();return this.getNode(e.join("."))}};this.getRoot=function(){return r}};return i});a.a.define("chart.brush.treemap.container",["util.treemap"],function(t){var e=function(i,r,a,n){this.xoffset=i;this.yoffset=r;this.height=n;this.width=a;this.shortestEdge=function(){return Math.min(this.height,this.width)};this.getCoordinates=function(e){var i=[],r=this.xoffset,a=this.yoffset,n=t.sumArray(e)/this.height,h=t.sumArray(e)/this.width;if(this.width>=this.height){for(var s=0;s<e.length;s++){i.push([r,a,r+n,a+e[s]/n]);a=a+e[s]/n}}else{for(var s=0;s<e.length;s++){i.push([r,a,r+e[s]/h,a+h]);r=r+e[s]/h}}return i};this.cutArea=function(t){if(this.width>=this.height){var i=t/this.height,r=this.width-i;return new e(this.xoffset+i,this.yoffset,r,this.height)}else{var a=t/this.width,n=this.height-a;return new e(this.xoffset,this.yoffset+a,this.width,n)}}};return e});a.a.define("chart.brush.treemap.calculator",["util.base","util.treemap","chart.brush.treemap.container"],function(t,e,i){function r(t,i){var r=[],a=e.sumArray(t),n=i/a;for(var h=0;h<t.length;h++){r[h]=t[h]*n}return r}function a(e,i,r,h,s){h=typeof h==="undefined"?0:h;s=typeof s==="undefined"?0:s;var o=[],l,c=[];if(t.typeCheck("array",e[0])){for(var d=0;d<e.length;d++){o[d]=u(e[d])}l=n(o,i,r,h,s);for(var d=0;d<e.length;d++){c.push(a(e[d],l[d][2]-l[d][0],l[d][3]-l[d][1],l[d][0],l[d][1]))}}else{c=n(e,i,r,h,s)}return c}function n(t,e,a,n,o){n=typeof n==="undefined"?0:n;o=typeof o==="undefined"?0:o;var l=s(r(t,e*a),[],new i(n,o,e,a),[]);return h(l)}function h(t){var e=[];if(t){for(var i=0;i<t.length;i++){for(var r=0;r<t[i].length;r++){e.push(t[i][r])}}}return e}function s(t,i,r,a){var n;var h;var l;if(t.length===0){a.push(r.getCoordinates(i));return}n=r.shortestEdge();h=t[0];if(o(i,h,n)){i.push(h);s(t.slice(1),i,r,a)}else{l=r.cutArea(e.sumArray(i),a);a.push(r.getCoordinates(i));s(t,[],l,a)}return a}function o(t,e,i){var r;if(t.length===0){return true}r=t.slice();r.push(e);var a=l(t,i),n=l(r,i);return a>=n}function l(t,i){var r=Math.min.apply(Math,t),a=Math.max.apply(Math,t),n=e.sumArray(t);return Math.max(Math.pow(i,2)*a/Math.pow(n,2),Math.pow(n,2)/(Math.pow(i,2)*r))}function u(i){var r=0;if(t.typeCheck("array",i[0])){for(var a=0;a<i.length;a++){r+=u(i[a])}}else{r=e.sumArray(i)}return r}return a});var k={name:"chart.brush.treemap",extend:"chart.brush.core",component:function(){var t=a.a.include("util.base");var e=a.a.include("chart.brush.treemap.calculator");var i=a.a.include("chart.brush.treemap.nodemanager");var r=3;var n=function(){var a=new i,n={};function h(t,e,i,r){if(!r)r=[];for(var a=0;a<e.length;a++){if(e[a].children.length==0){r.push(e[a][t])}else{h(t,e[a].children,i,[])}}i.push(r);return i}function s(e,i){for(var r=0;r<e.length;r++){if(t.typeCheck("array",e[r])){s(e[r],i[r])}else{var n=a.getNode(e[r]);n.x=i[r][0];n.y=i[r][1];n.width=i[r][2]-i[r][0];n.height=i[r][3]-i[r][1]}}}function o(t){if(t.width==0&&t.height==0&&t.x==0&&t.y==0){return false}return true}function l(t,e,i){if(t.children.length==0){return{x:Math.min(e,t.x),y:Math.min(i,t.y)}}else{for(var r=0;r<t.children.length;r++){return l(t.children[r],e,i)}}}function u(e,i,a,h,s){var o=e.chart.theme("treemapTitleFontSize"),u=e.axis.area("width"),c=e.axis.area("height"),d=l(a,u,c);var f=e.chart.text({"font-size":o,"font-weight":"bold",fill:e.chart.theme("treemapTitleFontColor"),x:h+d.x+r,y:s+d.y+o,"text-anchor":"start"},t.typeCheck("function",e.brush.format)?e.format(a):a.text);i.append(f);n[a.index]=true}function c(t){if(t.parent.depth>0){return c(t.parent)}return t.nodenum}this.drawBefore=function(){for(var t=0;t<this.axis.data.length;t++){var i=this.axis.data[t],r=this.getValue(i,"index");a.insertNode(r,{text:this.getValue(i,"text",""),value:this.getValue(i,"value",0),x:this.getValue(i,"x",0),y:this.getValue(i,"y",0),width:this.getValue(i,"width",0),height:this.getValue(i,"height",0)})}var n=a.getNode(),o=h("value",n,[]),l=h("index",n,[]),u=e(o,this.axis.area("width"),this.axis.area("height"));s(l,u)};this.draw=function(){var e=this.svg.group(),i=this.axis.area("x"),h=this.axis.area("y"),s=a.getNodeAll();for(var l=0;l<s.length;l++){if(this.brush.titleDepth==s[l].depth){u(this,e,s[l],i,h)}if(!o(s[l]))continue;var d=i+s[l].x,f=h+s[l].y,v=s[l].width,p=s[l].height;if(this.brush.showText&&!n[s[l].index]){var g=d+v/2,m=f+p/2,x=this.chart.theme("treemapTextFontSize");if(this.brush.textOrient=="top"){m=f+x}else if(this.brush.textOrient=="bottom"){m=f+p-x/2}if(this.brush.textAlign=="start"){g=d+r}else if(this.brush.textAlign=="end"){g=d+v-r}var y=this.chart.text({"font-size":x,fill:this.chart.theme("treemapTextFontColor"),x:g,y:m,"text-anchor":this.brush.textAlign},t.typeCheck("function",this.brush.format)?this.format(s[l]):s[l].text);e.append(y)}var b=this.svg.rect({stroke:this.chart.theme("treemapNodeBorderColor"),"stroke-width":this.chart.theme("treemapNodeBorderWidth"),x:d,y:f,width:v,height:p,fill:this.color(c(s[l]))});if(t.typeCheck("function",this.brush.nodeColor)){var w=this.brush.nodeColor.call(this.chart,s[l]);b.attr({fill:this.color(w)})}this.addEvent(b,s[l]);e.prepend(b)}return e}};n.setup=function(){return{textOrient:"top",textAlign:"middle",showText:true,titleDepth:1,nodeColor:null,clip:false,format:null}};return n}};var B={name:"chart.brush.heatmap",extend:"chart.brush.core",component:function(){var t=a.a.include("util.base");var e=function(){var e=this;this.draw=function(){var i=this.chart.theme("heatmapBorderWidth"),r=this.chart.theme("heatmapFontSize"),a=this.svg.group(),n=this.axis.x.rangeBand()-i,h=this.axis.y.rangeBand()-i;for(var s=0;s<this.axis.data.length;s++){var o=this.svg.group(),l=this.color(s,null),u=this.axis.data[s],c=this.getValue(u,"text"),d=this.axis.x(s),f=this.axis.y(s);if(l=="none"){l=this.chart.theme("heatmapBackgroundColor")}var v=this.svg.rect({x:d-n/2,y:f-h/2,width:n,height:h,fill:l,"fill-opacity":this.chart.theme("heatmapBackgroundOpacity"),stroke:this.chart.theme("heatmapBorderColor"),"stroke-opacity":this.chart.theme("heatmapBorderOpacity"),"stroke-width":i});var p=this.chart.text({"text-anchor":"middle",fill:this.chart.theme("heatmapFontColor"),"font-size":r,width:n,height:h,x:d,y:f+r/2}).text(t.typeCheck("function",this.brush.format)?this.format(u):c);this.addEvent(o,s,null);o.append(v);o.append(p);a.append(o);(function(t){o.hover(function(){t.attr({"fill-opacity":e.chart.theme("heatmapHoverBackgroundOpacity")})},function(){t.attr({"fill-opacity":e.chart.theme("heatmapBackgroundOpacity")})})})(v)}return a}};e.setup=function(){return{format:null}};return e}};var C={name:"chart.brush.timeline",extend:"chart.brush.core",component:function(){var t=a.a.include("util.base");var e=function(){var e=this;var i,r,a,n,h,s,o,l,u,c;var d={},f=[],v=null;this.setActiveRect=function(t){for(var e=0;e<f.length;e++){var i=f[e].r1,r=f[e].r2,a=f[e].color,n=r.element==t;i.attr({fill:n?this.chart.theme("timelineActiveBarBackgroundColor"):a});r.attr({fill:n?this.chart.theme("timelineActiveLayerBackgroundColor"):this.chart.theme("timelineHoverLayerBackgroundColor"),stroke:n?this.chart.theme("timelineActiveLayerBorderColor"):this.chart.theme("timelineHoverLayerBorderColor"),"fill-opacity":n?this.chart.theme("timelineLayerBackgroundOpacity"):0,"stroke-width":n?1:0});if(n){v=e}}};this.setHoverRect=function(t){for(var i=0;i<f.length;i++){var r=f[i].r2,a=r.element==t;r.attr({fill:a&&v==i?e.chart.theme("timelineActiveLayerBackgroundColor"):this.chart.theme("timelineHoverLayerBackgroundColor"),stroke:a&&v==i?e.chart.theme("timelineActiveLayerBorderColor"):this.chart.theme("timelineHoverLayerBorderColor"),"fill-opacity":a||v==i?this.chart.theme("timelineLayerBackgroundOpacity"):0,"stroke-width":a||v==i?1:0})}};this.setActiveBar=function(t){for(var e=0;e<f.length;e++){var i=f[e].r1,r=f[e].t1,a=f[e].color,h=f[e].y-n/2,s=f[e].y-f[e].height/2,o=i.element==t;if(o){i.attr({fill:this.chart.theme("timelineActiveBarBackgroundColor")||a,height:n,y:h});r.attr({visibility:"visible"})}else{i.attr({fill:a,height:f[e].height,y:s});r.attr({visibility:"hidden"})}if(o){v=e}}};this.setHoverBar=function(t){var e=this.chart.theme("timelineHoverBarBackgroundColor"),i=this.chart.theme("timelineActiveBarBackgroundColor");for(var r=0;r<f.length;r++){var a=f[r].r1,n=f[r].color,h=a.element==t;a.attr({fill:h&&v!=r?e||n:v==r?i||n:n})}};this.drawBefore=function(){i=this.svg.group();r=this.axis.get("padding");a=this.axis.y.domain();n=this.axis.y.rangeBand();h=this.axis.x.rangeBand();s=this.axis.x.ticks(this.axis.get("x").step);l=this.brush.active;u=this.brush.activeType;c=this.brush.hideTitle?0:r.left;o=this.axis.area("x")-c;for(var t=0;t<a.length;t++){d[a[t]]=t}};this.drawGrid=function(){var r=this.axis.get("y").format,h=this.axis.area("width")+c;var s=this.chart.theme("timelineColumnBackgroundColor"),l=this.chart.theme("timelineHoverRowBackgroundColor"),u=this.chart.theme("timelineEvenRowBackgroundColor"),d=this.chart.theme("timelineOddRowBackgroundColor");for(var f=0;f<a.length;f++){var v=a[f],p=this.axis.y(f),g=f==0?s:f%2?u:d;var m=this.svg.rect({width:h,height:n,fill:g,x:o,y:p-n/2});(function(t,e){if(e>0){t.hover(function(){t.attr({fill:l})},function(){t.attr({fill:e%2?u:d})})}})(m,f);i.append(m);if(c>0){var x=this.chart.text({"text-anchor":"start",dx:5,dy:this.chart.theme("timelineTitleFontSize")/3,"font-size":this.chart.theme("timelineTitleFontSize"),fill:this.chart.theme("timelineTitleFontColor"),"font-weight":this.chart.theme("timelineTitleFontWeight")}).translate(o,p);var y=t.typeCheck("function",r)?r.apply(this.chart,[v,f]):v;x.html(y);(function(t){x.on("mouseover",function(i){e.chart.emit("timeline.title",[t,i])})})(v);i.append(x)}}};this.drawLine=function(){var e=this.axis.y(0)-n/2,a=this.axis.get("x").format;for(var h=0;h<s.length;h++){var l=this.axis.x(s[h]);if(h<s.length-1){var u=this.svg.line({stroke:this.chart.theme(h==0?"timelineHorizontalLineColor":"timelineVerticalLineColor"),"stroke-width":1,x1:l,x2:l,y1:e,y2:e+this.axis.area("height"),visibility:c==0&&h==0?"hidden":"visible"});i.append(u)}if(h>0){var d=this.chart.text({"text-anchor":"end",dx:-5,dy:this.chart.theme("timelineColumnFontSize")/2,"font-size":this.chart.theme("timelineColumnFontSize"),fill:this.chart.theme("timelineColumnFontColor")}).translate(l,this.axis.y(0));var f=t.typeCheck("function",a)?a.apply(this.chart,[s[h],h]):s[h];d.text(f);i.append(d)}}var v=this.svg.line({stroke:this.chart.theme("timelineHorizontalLineColor"),"stroke-width":1,x1:o,x2:this.axis.area("width")+r.left,y1:e+n,y2:e+n});i.append(v)};this.drawData=function(){var r=this.axis.area("height"),a=this.axis.area("y"),n=this.axis.data.length,h=this.brush.barSize,s=this.brush.activeTooltip,o=this.chart.theme("timelineActiveBarFontSize"),c=this.chart.theme("timelineActiveBarFontColor");for(var p=0;p<n;p++){var g=this.axis.data[p],m=this.axis.x(this.getValue(g,"stime",0)),x=this.axis.x(this.getValue(g,"etime",this.axis.x.max())),y=this.axis.y(d[this.getValue(g,"key")]),b=t.typeCheck("function",h)?h.apply(this.chart,[g,p]):h,w=this.color(p,0);if(x-m<0||isNaN(x)){continue}var k=this.svg.rect({width:x-m,height:b,fill:w,x:m,y:y-b/2,cursor:"pointer"});var B=this.svg.text({"text-anchor":"end","font-size":o,fill:c,x:m+x-m,y,dx:-o/2,dy:o/3,visibility:"hidden"});var C=this.svg.rect({width:x-m,height:r-6,"fill-opacity":0,"stroke-width":0,x:m,y:a+3,cursor:"pointer"});if(p<n-1){var T=this.axis.data[p+1],z=this.axis.x(this.getValue(T,"stime",0)),S=this.axis.y(d[this.getValue(T,"key")]);var E=this.svg.line({x1:x,y1:y,x2:z,y2:S,stroke:w,"stroke-width":this.brush.lineWidth});i.append(E)}if(t.typeCheck("function",s)){B.text(s.apply(this.chart,[g,p]))}i.append(k);i.append(B);i.append(C);this.addEvent(k,p);f[p]={r1:k,r2:C,t1:B,color:w,y,height:b};if(u=="rect"){(function(t){C.on(e.brush.activeEvent,function(i){e.setActiveRect(i.target);e.chart.emit("timeline.active",[t,i])})})(g);C.on("mouseover",function(t){e.setHoverRect(t.target)})}else{C.attr({visibility:"hidden"});(function(t){k.on(e.brush.activeEvent,function(i){e.setActiveBar(i.target);e.chart.emit("timeline.active",[t,i])})})(g);k.on("mouseover",function(t){e.setHoverBar(t.target)})}}if(t.typeCheck("integer",l)&&f.length>0){if(l<0)return;v=l;if(u=="rect"){this.setActiveRect(f[v].r2.element)}else{this.setActiveBar(f[v].r1.element)}}};this.draw=function(){this.drawGrid();this.drawLine();this.drawData();i.on("mouseout",function(t){if(u=="rect"){e.setHoverRect(null)}else{e.setHoverBar(null)}});return i}};e.setup=function(){return{barSize:7,lineWidth:1,active:null,activeEvent:"click",activeType:"rect",activeTooltip:null,hideTitle:false,clip:false}};return e}};var T={name:"chart.brush.polygon.column3d",extend:"chart.brush.polygon.core",component:function(){var t=a.a.include("util.color");var e=a.a.include("chart.polygon.cube");var i=function(){var i,r;this.createColumn=function(a,n,h,s){var o=i,l=r,u=this.axis.x(h)-o/2,c=this.axis.y(a[n]),d=this.axis.y(0),f=this.axis.z(s)-l/2,v=this.color(s);return this.createPolygon(new e(u,d,f,o,c-d,l),function(e){var i=this.svg.group();for(var r=0;r<e.faces.length;r++){var o=e.faces[r];var l=this.svg.polygon({fill:v,"fill-opacity":this.chart.theme("polygonColumnBackgroundOpacity"),stroke:t.darken(v,this.chart.theme("polygonColumnBorderOpacity")),"stroke-opacity":this.chart.theme("polygonColumnBorderOpacity")});for(var u=0;u<o.length;u++){var c=e.vectors[o[u]];l.point(c.x,c.y)}i.append(l)}if(a[n]!=0){this.addEvent(i,h,s)}return i})};this.drawBefore=function(){var t=this.brush.padding,e=this.axis.x.rangeBand(),a=this.axis.z.rangeBand();i=this.brush.width>0?this.brush.width:e-t*2;r=this.brush.height>0?this.brush.height:a-t*2};this.draw=function(){var t=this.chart.svg.group(),e=this.listData(),i=this.brush.target;for(var r=0;r<e.length;r++){for(var a=0;a<i.length;a++){t.append(this.createColumn(e[r],i[a],r,a))}}return t}};i.setup=function(){return{width:0,height:0,padding:20,clip:false}};return i}};var z={name:"chart.brush.polygon.line3d",extend:"chart.brush.polygon.core",component:function(){var t=a.a.include("util.color");var e=a.a.include("chart.polygon.point");var i=function(){this.createLine=function(i,r,a,n){var h=this.color(a,n),s=this.axis.z.rangeBand()-this.brush.padding*2,o=this.axis.x(a),l=this.axis.y(i[a][r]),u=this.axis.z(n)-s/2,c=this.axis.x(a+1),d=this.axis.y(i[a+1][r]),f=this.axis.z(n)+s/2,v=null;var p=this.chart.svg.polygon({fill:h,"fill-opacity":this.chart.theme("polygonLineBackgroundOpacity"),stroke:t.darken(h,this.chart.theme("polygonLineBorderOpacity")),"stroke-opacity":this.chart.theme("polygonLineBorderOpacity")});var g=[new e(o,l,u),new e(o,l,f),new e(c,d,f),new e(c,d,u)];for(var m=0;m<g.length;m++){this.createPolygon(g[m],function(t){var e=t.vectors[0];p.point(e.x,e.y);if(v==null){v=t}else{if(e.z>v.vectors[0].z){v=t}}})}p.order=this.axis.depth-v.max().z;return p};this.draw=function(){var t=this.chart.svg.group(),e=this.listData(),i=this.brush.target;for(var r=0;r<e.length-1;r++){for(var a=0;a<i.length;a++){t.append(this.createLine(e,i[a],r,a))}}return t}};i.setup=function(){return{padding:10,clip:false}};return i}};var S={name:"chart.widget.cross",extend:"chart.widget.core",component:function(){var t=a.a.include("util.base");var e=function(e,i,r){var a=this;var n=50,h=18,s=n/10;var o=0,l=0;var u,c,d,f,v;var p=[];function g(t,e,i){if(!p[t]){var r=document.createElementNS("http://www.w3.org/2000/svg","tspan");e.element.appendChild(r);p[t]=r}p[t].textContent=i}this.drawBefore=function(){i=this.chart.axis(r.axis);o=e.padding("left")+i.area("x");l=e.padding("top")+i.area("y");u=e.svg.group({visibility:"hidden"},function(){if(t.typeCheck("function",r.yFormat)){c=e.svg.line({x1:0,y1:0,x2:i.area("width"),y2:0,stroke:e.theme("crossBorderColor"),"stroke-width":e.theme("crossBorderWidth"),opacity:e.theme("crossBorderOpacity")});v=e.svg.group({},function(){e.svg.polygon({fill:e.theme("crossBalloonBackgroundColor"),"fill-opacity":e.theme("crossBalloonBackgroundOpacity"),points:a.balloonPoints("left",n,h,s)});e.text({"font-size":e.theme("crossBalloonFontSize"),fill:e.theme("crossBalloonFontColor"),"text-anchor":"middle",x:n/2,y:12})}).translate(-(n+s),0)}if(t.typeCheck("function",r.xFormat)){d=e.svg.line({x1:0,y1:0,x2:0,y2:i.area("height"),stroke:e.theme("crossBorderColor"),"stroke-width":e.theme("crossBorderWidth"),opacity:e.theme("crossBorderOpacity")});f=e.svg.group({},function(){e.svg.polygon({fill:e.theme("crossBalloonBackgroundColor"),"fill-opacity":e.theme("crossBalloonBackgroundOpacity"),points:a.balloonPoints("bottom",n,h,s)});e.text({"font-size":e.theme("crossBalloonFontSize"),fill:e.theme("crossBalloonFontColor"),"text-anchor":"middle",x:n/2,y:17})}).translate(0,i.area("height")+s)}}).translate(o,l)};this.draw=function(){this.on("axis.mouseover",function(t){u.attr({visibility:"visible"})},r.axis);this.on("axis.mouseout",function(t){u.attr({visibility:"hidden"})},r.axis);this.on("axis.mousemove",function(t){u.attr({visibility:"visible"});var e=3;var p=t.bgX-o+e,m=t.bgY-l+e;if(c){c.attr({y1:m,y2:m})}if(d){d.attr({x1:p,x2:p})}if(v){v.translate(-(n+s),m-h/2);var x=i.y.invert(t.chartY+e),y=r.yFormat.call(a.chart,x);g(0,v.get(1),y)}if(f){f.translate(p-n/2,i.area("height")+s);var x=i.x.invert(t.chartX+e),y=r.xFormat.call(a.chart,x);g(1,f.get(1),y)}},r.axis);return u}};e.setup=function(){return{axis:0,xFormat:null,yFormat:null}};return e}};var E={name:"chart.widget.legend",extend:"chart.widget.core",component:function(){var t=a.a.include("util.base");var e=17,i=13,r=5,n=5.5,h=1.2,s=2;var o=function(a,o,l){var u=[];var c={};function d(e){var i=[0];if(t.typeCheck("array",e)){i=e}else if(t.typeCheck("integer",e)){i=[e]}return i}function f(){var t=d(l.brush),e=[];for(var i=0;i<t.length;i++){e[i]=a.get("brush",t[i])}return e}function v(t){if(!l.filter)return;if(!u[t.index]){u[t.index]={}}for(var e=0;e<t.target.length;e++){u[t.index][t.target[e]]=true}}function p(t){var e=[],i=[],r=t[0].index;for(var n in u[r]){if(u[r][n]){e.push(n);i.push(c[n])}}for(var h=0;h<t.length;h++){a.updateBrush(t[h].index,{target:e,colors:i})}if(!a.isRender()){a.render()}a.emit("legend.filter",[e])}this.getLegendIcon=function(o){var d=[],v=o.target,g=v.length;for(var m=0;m<g;m++){var x=a.svg.group(),y=o.target[m],b=y,w=a.color(m,l.colors||o.colors);c[y]=w;if(t.typeCheck("function",l.format)){b=this.format(y)}var k=a.svg.getTextSize(b,{fontSize:a.theme("legendFontSize")});if(l.filter){x.append(a.svg.line({x1:0,x2:e,y1:-(n/2),y2:-(n/2),stroke:w,"stroke-width":i,"stroke-linecap":"round"}));x.append(a.svg.circle({cx:e,cy:-(n/2),r:n,fill:a.theme("legendSwitchCircleColor")}));x.append(a.text({x:e+r*2,y:0,"font-size":a.theme("legendFontSize"),fill:a.theme("legendFontColor"),"text-anchor":"start"},b));d.push({icon:x,width:e+k.width+r*2.5,height:i+r/2});(function(t,i){i.attr({cursor:"pointer"});i.on("click",function(r){if(u[o.index][t]){i.get(0).attr({stroke:a.theme("legendSwitchDisableColor")});i.get(2).attr({fill:a.theme("legendSwitchDisableColor")});i.get(1).attr({cx:0});u[o.index][t]=false}else{i.get(0).attr({stroke:c[t]});i.get(2).attr({fill:a.theme("legendFontColor")});i.get(1).attr({cx:e});u[o.index][t]=true}p(l.brushSync?f():[o])})})(y,x)}else{var B=a.theme("legendFontSize");if(l.icon!=null){var C=t.typeCheck("function",l.icon)?l.icon.apply(a,[y]):l.icon;x.append(a.text({x:0,y:s,"font-size":B,fill:w},C))}else{x.append(a.svg.circle({cx:B/2,cy:-s,r:B/2,fill:w}))}x.append(a.text({x:B*h,y:0,"font-size":B,fill:a.theme("legendFontColor"),"text-anchor":"start"},b));d.push({icon:x,width:B+k.width+r*2,height:i+r/2})}}return d};this.draw=function(){var t=a.svg.group();var e=0,i=0,n=0,h=0,s=0,o=0,u=d(l.brush);var c=[];for(var f=0;f<u.length;f++){var p=u[f];if(l.brushSync&&f>0)continue;var g=a.get("brush",u[p]),m=this.getLegendIcon(g);for(var x=0;x<m.length;x++){t.append(m[x].icon);m[x].icon.translate(e,i);if(l.orient=="bottom"||l.orient=="top"){if(e+m[x].width>a.area("x2")){e=0;i+=m[x].height;o+=m[x].height;m[x].icon.translate(e,i);c.push(n);n=0}e+=m[x].width+r*2.5;n+=m[x].width+r*2.5;if(o<m[x].height){o=m[x].height}}else{i+=m[x].height;h+=m[x].height;if(s<m[x].width){s=m[x].width}}}if(n>0){c.push(n)}if(c.length>0){n=Math.max.apply(Math,c)}v(g)}if(l.orient=="bottom"||l.orient=="top"){var i=(l.orient=="bottom"?a.area("y2")+a.padding("bottom")-o:a.area("y")-a.padding("top"))+r;if(l.align=="start"){e=a.area("x")}else if(l.align=="center"){e=a.area("x")+(a.area("width")/2-n/2)}else if(l.align=="end"){e=a.area("x2")-n}}else{var e=(l.orient=="left"?a.area("x")-a.padding("left"):a.area("x2")+a.padding("right")-s)+r;if(l.align=="start"){i=a.area("y")}else if(l.align=="center"){i=a.area("y")+(a.area("height")/2-h/2)}else if(l.align=="end"){i=a.area("y2")-h}}t.translate(Math.floor(e)+l.dx,Math.floor(i)+l.dy);return t}};o.setup=function(){return{orient:"bottom",align:"center",filter:false,icon:null,dx:0,dy:0,colors:null,brushSync:false,brush:0,format:null}};return o}};var A={name:"chart.widget.title",extend:"chart.widget.core",component:function(){var t=25,e=20;var i=function(i,r,a){var n=0,h=0,s="middle";this.drawBefore=function(){var r=i.axis(a.axis);if(r){if(a.orient=="bottom"){h=r.area("y2")+r.padding("bottom")-e}else if(a.orient=="top"){h=r.area("y")-r.padding("top")+t}else{h=r.area("y")+r.area("height")/2}if(a.align=="middle"){n=r.area("x")+r.area("width")/2;s="middle"}else if(a.align=="start"){n=r.area("x")-r.padding("left")+e;s="start"}else{n=r.area("x2")+r.padding("right")-e;s="end"}n+=i.area("x");h+=i.area("y")}else{if(a.orient=="bottom"){h=i.area("y2")+i.padding("bottom")-e}else if(a.orient=="top"){h=e}else{h=i.area("y")+i.area("height")/2}if(a.align=="middle"){n=i.area("x")+i.area("width")/2;s="middle"}else if(a.align=="start"){n=i.area("x");s="start"}else{n=i.area("x2");s="end"}}};this.draw=function(){var t=i.svg.getTextSize(a.text);var e=t.width/2,r=t.height/2;var o=i.text({x:n+a.dx,y:h+a.dy,"text-anchor":s,fill:a.color||i.theme("titleFontColor"),"font-size":a.size||i.theme("titleFontSize"),"font-weight":i.theme("titleFontWeight")},a.text);if(a.orient=="center"){if(a.align=="start"){o.rotate(-90,n+a.dx+e,h+a.dy+r)}else if(a.align=="end"){o.rotate(90,n+a.dx-e,h+a.dy+r)}}return o}};i.setup=function(){return{axis:null,orient:"top",align:"middle",text:"",dx:0,dy:0,size:null,color:null}};return i}};var L={name:"chart.widget.tooltip",extend:"chart.widget.core",component:function(){var t=a.a.include("util.base");var e=a.a.include("util.color");var i=7,r=7,n=1.2;var h=function(a,h,s){var o=this,l={},u=0;function c(e,i){var r=null,a=null;if(t.typeCheck("function",s.format)){var n=o.format(i,e);if(t.typeCheck("object",n)){r=n.key;a=n.value}else{a=n}}else{if(e&&!i){a=e}if(e&&i){r=e;a=o.format(i[e])}}return{key:r,value:a}}function d(e){var r=l[e.brush.index],a=r.get(1).get(1),n=0,h=0,o=false;if(e.dataKey&&s.all===false){d([e.dataKey])}else{d(e.brush.target)}function d(r){for(var s=0;s<r.length;s++){var l=r[s],d=c(l,e.data);a.get(s).attr({x:i});if(d.key){a.get(s).get(0).text(d.key)}else{a.get(s).get(1).attr({"text-anchor":"middle"});o=true}if(!t.typeCheck(["null","undefined"],d.value)){a.get(s).get(1).attr({x:0}).text(d.value)}n=Math.max(n,a.get(s).size().width)}h=r.length*u}return{width:n+i*3,height:h+i,onlyValue:o}}function f(e){var i=o.getIndexArray(o.widget.brush);return t.inArray(e,i)==-1?false:true}function v(t){var i=t.brush.target;for(var r=0;r<i.length;r++){if(i[r]==t.dataKey){return e.lighten(o.chart.color(r,t.brush.colors))}}return null}function p(t,e,a){var n=t.bgX-e.width/2,h=t.bgY-e.height-r-i/2,s=2;if(a=="left"||a=="right"){h=t.bgY-e.height/2-i/2}if(a=="left"){n=t.bgX-e.width-r}else if(a=="right"){n=t.bgX+r;s=-2}else if(a=="bottom"){h=t.bgY+r*2}return{x:n,y:h,c:s}}function g(){var t=false,e=null,n=null,h=null;o.on("mouseover",function(c,g){if(t||!f(c.brush.index))return;if(!c.dataKey&&!c.data)return;e=d(c);n=s.orient;h=a.axis(c.brush.axis);var m=p(g,e,n),x=m.x-a.padding("left"),y=m.y-a.padding("top");if(s.flip){if(n=="left"&&x<0){n="right"}else if(n=="right"&&x+e.width>h.area("width")){n="left"}else if(n=="top"&&y<0){n="bottom"}else if(n=="bottom"&&y+e.height>h.area("height")){n="top"}}var b=l[c.brush.index],w=b.get(0),k=b.get(1).get(0),B=b.get(1).get(1).translate(0,n!="bottom"?u:u+r),C=a.theme("tooltipBorderColor")||v(c),T=a.theme("tooltipLineColor")||v(c);k.attr({points:o.balloonPoints(n,e.width,e.height,s.anchor?r:null),stroke:C});w.attr({stroke:T});B.each(function(t,r){r.get(1).attr({x:e.onlyValue?e.width/2:e.width-i})});b.attr({visibility:"visible"});t=true});o.on("mousemove",function(i,r){if(!t)return;var s=l[i.brush.index],o=s.get(0),u=s.get(1),c=p(r,e,n);o.attr({x1:r.bgX+c.c,y1:a.padding("top")+h.area("y"),x2:r.bgX+c.c,y2:a.padding("top")+h.area("y2")});u.translate(c.x,c.y)});o.on("mouseout",function(e,i){if(!t)return;var r=l[e.brush.index];r.attr({visibility:"hidden"});t=false})}this.drawBefore=function(){u=a.theme("tooltipFontSize")*n};this.draw=function(){var t=a.svg.group(),e=this.getIndexArray(this.widget.brush);for(var r=0;r<e.length;r++){var h=a.get("brush",e[r]),o=[""];if(s.all&&h.target.length>1){for(var u=1;u<h.target.length;u++){o.push("")}}l[h.index]=a.svg.group({visibility:"hidden"},function(){a.svg.line({"stroke-width":a.theme("tooltipLineWidth"),visibility:s.line?"visible":"hidden"});a.svg.group({},function(){a.svg.polygon({fill:a.theme("tooltipBackgroundColor"),"fill-opacity":a.theme("tooltipBackgroundOpacity"),"stroke-width":a.theme("tooltipBorderWidth")});var t=a.texts({"font-size":a.theme("tooltipFontSize"),fill:a.theme("tooltipFontColor")},o,n);for(var e=0;e<o.length;e++){t.get(e).append(a.svg.tspan({"text-anchor":"start","font-weight":"bold",x:i}));t.get(e).append(a.svg.tspan({"text-anchor":"end"}))}})});t.append(l[h.index])}g();return t}};h.setup=function(){return{orient:"top",anchor:true,all:false,line:false,flip:false,format:null,brush:0}};return h}};var O={name:"chart.widget.polygon.rotate3d",extend:"chart.widget.polygon.core",component:function(){var t=a.a.include("util.base");var e=180;var i=function(){var i=this;function r(t){var r=i.chart.axis(t),a=false,n=0,h=0,s=0,o=0,l=null,u=i.widget.unit,c=r.area("width"),d=r.area("height");i.on("axis.mousedown",f,t);i.on("axis.mousemove",v,t);i.on("axis.mouseup",p,t);i.on("bg.mouseup",p);i.on("chart.mouseup",p);function f(t){if(a)return;a=true;n=t.chartX;h=t.chartY;s=r.degree.x;o=r.degree.y}function v(t){if(!a)return;var f=t.chartX-n,v=t.chartY-h,p=s+Math.floor(v/d*e),g=o-Math.floor(f/c*e);if(p%u!=0&&g%u!=0)return;var m=p+":"+g;if(l==m)return;r.set("degree",{x:p,y:g});i.chart.render();l=m}function p(t){if(!a)return;a=false;n=0;h=0}}this.draw=function(){var e=t.typeCheck("array",this.widget.axis)?this.widget.axis:[this.widget.axis];for(var i=0;i<e.length;i++){r(e[i])}}};i.setup=function(){return{unit:5,axis:[0]}};return i}};n.use([h,s,o,l,u,c,d,f,v,p,g,m,x,y,b,w,k,B,C,T,z,S,E,A,L,O])}});